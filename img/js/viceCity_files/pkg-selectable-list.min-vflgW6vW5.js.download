define("modules/clean/react/path_filter_button",["require","exports","tslib","react","spectrum/dropdown_button","modules/clean/react/title_bubble","modules/clean/em_string","modules/clean/filepath","dig-components/buttons","dig-components/tooltips","modules/clean/react/sticky_position"],(function(e,t,i,o,n,l,r,a,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathFilterButton=void 0,o=i.__importDefault(o),a=i.__importStar(a),t.PathFilterButton=function(e){var t=e.path,i=e.defaultText,u=e.dropdownClasses,f=e.disabled,p=e.onClick,m=e.useDigComponents,h=t&&!a.paths_are_equal(t,"/")?r.Emstring.em_snippet(a.filename(t),10,.6):null;if(m){var g=o.default.createElement(s.Button,{className:u,disabled:f,onClick:p,variant:"opacity",withDropdownIcon:!0},h||i);return t&&h?o.default.createElement(d.Tooltip,{title:t,placement:"bottom"},g):g}var _=o.default.createElement(n.DropdownButton,{className:u,disabled:f,onClick:p},h||i);return h?o.default.createElement(l.TitleBubble,{content:t,position:c.StickyPosition.BOTTOM},_):_}})),define("modules/clean/react/selectable_list",["require","exports","tslib","immutable","keymaster","react","lodash","react-dom","modules/core/browser_detection"],(function(e,t,i,o,n,l,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectableList=t.findSelectionRange=t.findNeighboringItem=t.SelectOptions=t.SelectDirection=t.SelectableListActionSource=t.SELECTABLE_TILE_GRID_KEY_SCOPE=t.SELECTABLE_LIST_KEY_SCOPE=void 0,o=i.__importStar(o),n=i.__importDefault(n),l=i.__importDefault(l),r=i.__importStar(r),a=i.__importStar(a),s=i.__importStar(s),t.SELECTABLE_LIST_KEY_SCOPE="SelectableList",t.SELECTABLE_TILE_GRID_KEY_SCOPE="SelectableTileGrid";var d,c,u,f="";function p(e,t,i,o,n,l){switch(e){case c.PREV:return Math.max(0,t-1);case c.NEXT:return Math.min(i-1,t+1);case c.PREV_ROW:case c.NEXT_ROW:return(function(e,t,i,o,n,l){if(void 0===l&&(l=!1),t<0||t>=i)return 0;n&&0!==n.length||(n=[0]);var a=r.sortedIndex(n,t),s=n[a]===t?a:a-1,d=n[s],u=(t-d)%o;switch(e){case c.NEXT_ROW:var f=n.length;if(s===f-1&&t+o>=i){var p=(i-d)%o;if((t-d)%o<p||0===p)return l?i-1:t}var m=s+1,h=m<n.length?n[m]:i;if(t+o-(o-((h-d)%o||o))<h){var g=h-1;return Math.min(t+o,g)}var _=m+1<f?n[m+1]-1:i-1;return Math.min(h+u,_);case c.PREV_ROW:if(0===s&&t-o<0)return l?0:t;if(t-o>=d)return t-o;var E=n[s-1],T=d-1,S=d-E,v=E+S-(S%o||o);return Math.min(v+u,T)}})(e,t,i,o,n,l)}}function m(e,t,i,o,n,l,r,a,s){switch(e){case c.PREV:case c.PREV_ROW:if(0===t)return r;for(var d=p(e,t,a.length,i,s,!0),u=Math.min(t,o)-d,f=t-Math.max(d,o),m=l;m>l-f;m--){var h=r.indexOf(a[m]);r.splice(h,1)}for(m=n-1;m>=n-u;m--)r.push(a[m]);break;case c.NEXT:case c.NEXT_ROW:if(t===a.length)return r;var g=p(e,t,a.length,i,s,!0);for(f=Math.min(g,o)-n,u=g-Math.max(t,o),m=n;m<n+f;m++){h=r.indexOf(a[m]);r.splice(h,1)}for(m=l+1;m<=l+u;m++)r.push(a[m])}return r}(function(e){e.KEYBOARD="keyboard",e.DRAG_TO_SELECT="drag_to_select"})(d=t.SelectableListActionSource||(t.SelectableListActionSource={})),(function(e){e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e[e.PREV_ROW=2]="PREV_ROW",e[e.NEXT_ROW=3]="NEXT_ROW"})(c=t.SelectDirection||(t.SelectDirection={})),(function(e){e.DEFAULT="DEFAULT",e.EXTEND="EXTEND",e.ONLY="ONLY"})(u=t.SelectOptions||(t.SelectOptions={})),t.findNeighboringItem=p,t.findSelectionRange=m;var h=(function(e){function r(t){var i=e.call(this,t)||this;return i.isFocused=!1,i.updateSelection=function(e,t,n){void 0===n&&(n=!1);var l=i.props.selection,r=n?e.length?e[0]:i.props.itemIds[0]:l.anchor,a=l.merge({selected:o.OrderedSet(e),anchor:r});i.props.onSelectionChange(a,t)},i.handleSelectPrevious=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.selectNeighboringItem(c.PREV,d.KEYBOARD))},i.handleSelectPreviousRow=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.selectNeighboringItem(c.PREV_ROW,d.KEYBOARD))},i.handleExtendSelectionToPrevious=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.extendSelectionRange(c.PREV,d.KEYBOARD))},i.handleExtendSelectionToPreviousRow=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.extendSelectionRange(c.PREV_ROW,d.KEYBOARD))},i.handleSelectNext=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.selectNeighboringItem(c.NEXT,d.KEYBOARD))},i.handleSelectNextRow=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.selectNeighboringItem(c.NEXT_ROW,d.KEYBOARD))},i.handleExtendSelectionToNext=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.extendSelectionRange(c.NEXT,d.KEYBOARD))},i.handleExtendSelectionToNextRow=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.extendSelectionRange(c.NEXT_ROW,d.KEYBOARD))},i.handleKeyboardDeselectAll=function(e){var t=i.props.selection;e&&!i.isGlobalEvent(e)||!t.selected.size||i.handleDeselectAll(d.KEYBOARD)},i.handleDeselectAll=function(e){if(i.updateSelection([],e,!0),a.findDOMNode(i).contains(document.activeElement)){var t=document.activeElement;t.blur&&t.blur()}i.props.onDeselectAll&&i.props.onDeselectAll()},i.handleKeyboardSelectAll=function(e){var t=i.props,o=t.itemIds,n=t.selection;e&&!i.isGlobalEvent(e)||n.selected.size===o.length||i.handleSelectAll(d.KEYBOARD)},i.handleSelectAll=function(e){i.updateSelection(i.props.itemIds,e,!0)},i.handleDeselect=function(e,t,o){if(t)return i.extendOrShrinkSelectionByFile(e,o);i.updateSelectionById(e,"delete",o)},i.handleSelect=function(e,t,o){if(void 0===t&&(t=u.DEFAULT),t===u.EXTEND)return i.extendOrShrinkSelectionByFile(e);t===u.ONLY?i.updateSelection([e],o,!0):i.updateSelectionById(e,"add",o)},i.handleFocusFile=function(e){i.setState({focusedFileId:e})},i.isSelectableListEvent=function(){return i.isFocused},i.handleFocus=function(){i.isFocused=!0},i.handleBlur=function(){i.isFocused=!1},i.state={selection:t.selection,keyScope:t.keyScope},i}return i.__extends(r,e),r.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.keyScope!==e.keyScope&&(this.setState({keyScope:e.keyScope}),this.isFocused=!1)},r.prototype.componentDidMount=function(){this.setupKeyboardShortcuts(),this.setFocusedIdFromSelection(this.props.selection)},r.prototype.componentDidUpdate=function(e,t){e.selection&&this.props.selection&&e.selection.anchor!==this.props.selection.anchor&&this.setFocusedIdFromSelection(this.props.selection),this.state.keyScope!==t.keyScope&&this.setupKeyboardShortcuts(),e.isActive!==this.props.isActive&&(this.props.isActive?this.setupKeyboardShortcuts():this.cleanupKeyboardShortcuts())},r.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts()},r.prototype.setupKeyboardShortcuts=function(){var e=this,i=this.state.keyScope;(f=n.default.getScope())!==i&&n.default.setScope(i);var o=n.default.filter||function(e){var t=e.target||e.srcElement;if(!(t instanceof Element))return!0;var i=t.tagName;return!("INPUT"===i||"SELECT"===i||"TEXTAREA"===i)};n.default.filter=function(t){var i=t.target||t.srcElement,n=i.tagName;return(!e.isSelectableListEvent()||"BUTTON"!==n)&&(i instanceof HTMLInputElement&&"checkbox"===i.type||o.call(e,t))},i===t.SELECTABLE_LIST_KEY_SCOPE?(n.default("up",i,this.handleSelectPrevious),n.default("shift+up",i,this.handleExtendSelectionToPrevious),n.default("down",i,this.handleSelectNext),n.default("shift+down",i,this.handleExtendSelectionToNext)):i===t.SELECTABLE_TILE_GRID_KEY_SCOPE&&(n.default("left",i,this.handleSelectPrevious),n.default("shift+left",i,this.handleExtendSelectionToPrevious),n.default("right",i,this.handleSelectNext),n.default("shift+right",i,this.handleExtendSelectionToNext),n.default("up",i,this.handleSelectPreviousRow),n.default("shift+up",i,this.handleExtendSelectionToPreviousRow),n.default("down",i,this.handleSelectNextRow),n.default("shift+down",i,this.handleExtendSelectionToNextRow)),n.default("escape",i,this.handleKeyboardDeselectAll),s.mac?n.default("command+a",i,this.handleKeyboardSelectAll):n.default("ctrl+a",i,this.handleKeyboardSelectAll)},r.prototype.cleanupKeyboardShortcuts=function(){n.default.clearScope(this.state.keyScope),f&&n.default.setScope(f),n.default.resetFilter()},r.prototype.setFocusedIdFromSelection=function(e){e.anchor&&0!==e.selected.size&&this.setState({focusedFileId:e.anchor})},r.prototype.selectNeighboringItem=function(e,t){var i=this.props,o=i.itemIds,n=i.selection,l=i.tilesPerRow,r=i.sectionStartIndices,a=o.indexOf(n.selected.last()),s=o[p(e,a,o.length,l,r)];this.setState({focusedFileId:s}),this.updateSelection([s],t,!0)},r.prototype.extendSelectionRange=function(e,t){var i=this.props,o=i.itemIds,n=i.selection,l=i.tilesPerRow,r=i.sectionStartIndices,a=n.anchor||o[0];if(a){var s=o.indexOf(n.selected.last()),d=n.selected.toArray(),c=o.indexOf(a),u=this.getRangeOfSelectedBlock(a);d=m(e,s,l,c,u.startIndex,u.endIndex,d,o,r),this.setState({focusedFileId:d[d.length-1]}),this.updateSelection(d,t)}},r.prototype.getRangeOfSelectedBlock=function(e){for(var t=this.props,i=t.itemIds,o=t.selection,n=i.indexOf(e),l=0,r=0;l=n,!(--n<0)&&o.selected.has(i[n]););for(n=l;;){var a=i[n];if(!a||!o.selected.has(a))break;r=n,n++}return{startIndex:l,endIndex:r}},r.prototype.extendOrShrinkSelectionByFile=function(e,t){var i=this.props,o=i.itemIds,n=i.selection,l=n.anchor||o[0];if(l){var r=o.indexOf(l),a=o.indexOf(e),s=this.getRangeOfSelectedBlock(l),d=s.startIndex,c=s.endIndex,u=[],f=[];o.forEach((function(e,t){d<=t&&t<=c&&u.push(e),(a<=t&&t<=r||r<=t&&t<=a)&&f.push(e)})),a<r&&f.reverse();var p=n.update("selected",(function(e){return e.subtract(u).union(f)}));this.setState({focusedFileId:e}),this.props.onSelectionChange(p,t)}},r.prototype.updateSelectionById=function(e,t,i){var o=this.props.selection,n="add"===t?e:o.anchor,l=o.selected[t](e),r=o.merge({selected:l,anchor:n||null});this.props.onSelectionChange(r,i)},r.prototype.isGlobalEvent=function(e){var t=e.target instanceof HTMLInputElement,i=e.target instanceof HTMLElement,o=t&&"checkbox"===e.target.type,n=i&&(e.target.classList.contains("mc-popover-selectable-item")||e.target.classList.contains("mc-popover-content-item")||e.target.classList.contains("mc-popover-trigger"));return!document.activeElement||document.activeElement===document.body||e.target instanceof Element&&(a.findDOMNode(this).contains(e.target)&&(!t||o)&&!n)},r.prototype.render=function(){var e=this.props.children,t=this.state.focusedFileId;if(!e)return null;var i=e;return"function"==typeof e&&(i=e({focusedFileId:t,updateSelection:this.updateSelection,handleDeselect:this.handleDeselect,handleDeselectAll:this.handleDeselectAll,handleFocusFile:this.handleFocusFile,handleSelect:this.handleSelect,handleSelectAll:this.handleSelectAll,isSelectableListEvent:this.isSelectableListEvent})),l.default.createElement("div",{className:"selectable-list",onBlur:this.handleBlur,onFocus:this.handleFocus},i)},r.defaultProps={isActive:!0},r})(l.default.PureComponent);t.SelectableList=h})),define("modules/clean/react/tree",["require","exports","tslib","immutable"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=void 0,o=i.__importStar(o);var n=(function(){function e(e){var t=o.Map();this.rootItem=e.rootItem,this.items=e.items,this.childItemsByParentKey=e.childItemsByParentKey||t,this.parentItemByChildKey=e.parentItemByChildKey||o.Map()}return e.createWithRootItem=function(t){return new e({rootItem:t,items:o.Map([[t.key,t]])})},e.prototype.getParentItem=function(e){if(e){var t=this.parentItemByChildKey.get(e.key);return t?this.items.get(t):null}},e.prototype.getChildItems=function(e){return this.childItemsByParentKey.get(e.key)||null},e.prototype.isParent=function(e){return this.childItemsByParentKey.has(e.key)},e.prototype.getClosestExistingChildFromKey=function(e){for(var t,i=e.split("/"),o=this.rootItem,n=function(e){var n=i.slice(0,e).join("/"),r=null===(t=l.getChildItems(o))||void 0===t?void 0:t.find((function(e){return e.key===n}));if(void 0===r)return{value:o};o=r},l=this,r=2;r<i.length+1;r++){var a=n(r);if("object"==typeof a)return a.value}return o},e.prototype.setChildItems=function(t,i){i=o.List(i);var n=o.Map(i.map((function(e){return[e.key,e]}))),l=o.Map(this.items).merge(n),r=o.Map(this.childItemsByParentKey).set(t.key,i),a=o.Map(this.parentItemByChildKey);return i.forEach((function(e){return a=a.set(e.key,t.key)})),new e({rootItem:this.rootItem,items:l,childItemsByParentKey:r,parentItemByChildKey:a})},e})();t.Tree=n})),define("modules/clean/react/tree_item",["require","exports","tslib"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderTreeItem=t.TreeItem=t.RootStyle=void 0,(function(e){e[e.None=0]="None",e[e.TreeItem=1]="TreeItem",e[e.HeaderItem=2]="HeaderItem",e[e.StaticHeader=3]="StaticHeader"})(t.RootStyle||(t.RootStyle={}));var o=function(e){this.key=e.key,this.label=e.label?e.label:"",this.icon=e.icon?e.icon:"",this.disabled=!!e.disabled,this.canExpand=!!e.canExpand,this.forceExpanded=!!e.forceExpanded,this.readOnly=!!e.readOnly};t.TreeItem=o;var n=(function(e){function t(t,i){var o=e.call(this,t)||this;return o.folderNsId=i,o}return i.__extends(t,e),t})(o);t.FolderTreeItem=n})),define("modules/clean/react/files_view/contexts/callback_context",["require","exports","tslib","react"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewCallbackContextProvider=t.FilesViewCallbackContext=void 0,o=i.__importStar(o),t.FilesViewCallbackContext=o.createContext(void 0),t.FilesViewCallbackContextProvider=function(e){var i=e.props,n=i.onDelete,l=i.onShowRename,r=i.onNewFolderSubmit,a=i.onNewFolderCancel,s=i.onRenameSubmit,d=i.onRenameCancel,c=i.onSetClipboard,u=i.onPasteFromClipboard,f=i.onSwitchViewType,p=i.onColumnsChanged,m=i.onCanDisplayFolderSizesChanged,h=i.onAddFileJumpKeyCode,g=i.onResetFileJump,_=i.onShowShare,E=i.onPresentInZoom,T=i.onLocationLinkClick,S=i.onNavigateToFileOrFolder,v=i.onNavigateToParentFolder,b=i.onOpenFileSharedWithMe,w=i.onOpenPaper,I=i.onSelectionChange,L=i.onSortChange,y=i.onStarClick,M=i.onComponentTTI,F=i.onFocusSearchBar,C=e.children,D=o.useMemo((function(){return{onDelete:n,onShowRename:l,onNewFolderSubmit:r,onNewFolderCancel:a,onRenameSubmit:s,onRenameCancel:d,onSetClipboard:c,onPasteFromClipboard:u,onSwitchViewType:f,onColumnsChanged:p,onCanDisplayFolderSizesChanged:m,onAddFileJumpKeyCode:h,onResetFileJump:g,onShowShare:_,onPresentInZoom:E,onLocationLinkClick:T,onNavigateToFileOrFolder:S,onNavigateToParentFolder:v,onOpenFileSharedWithMe:b,onOpenPaper:w,onSelectionChange:I,onSortChange:L,onStarClick:y,onComponentTTI:M,onFocusSearchBar:F}}),[n,l,r,a,s,d,c,u,f,p,m,h,g,_,E,T,S,v,b,w,I,L,y,M,F]);return o.createElement(t.FilesViewCallbackContext.Provider,{value:D},C)}})),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],(function(e,t,i,o){"use strict";var n,l,r;Object.defineProperty(t,"__esModule",{value:!0}),t.defaultViewTypes=t.IMAGE_THUMBNAIL_EXTENSIONS=t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=t.VIEW_TYPE_SCOPE_TEXT_SEARCH=t.VIEW_TYPE_GLOBAL_SCOPE=t.VIEW_TYPE_COOKIE_NAME=t.OverflowMenuConstants=t.CulledListConstants=t.ViewTypeGridSizes=t.ViewTypeThumbnailSizes=t.AllSortDirections=t.AllLoadingStates=t.SortIsFilename=t.AllSortFields=t.AllDropTargetHighlightModes=t.AllViewTypes=t.AllRenameStates=t.AllNewFolderCreationStates=t.FilesViewTileGridConstants=t.SEARCH_LIST_VIEW_COLUMNS_DELETED=t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_COLUMNS=t.GRID_VIEW_COLUMNS=t.LIST_VIEW_COLUMNS=t.GRID_VIEW_COLUMN_FLEX=t.COLUMN_MAX_WIDTHS=t.COLUMN_MIN_WIDTHS=t.COLUMN_DEFAULT_WIDTHS=t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX=t.FILE_NAME_CELL_SEARCH_FLEX_BASIS=t.LIST_VIEW_COLUMN_FLEX=t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=t.CHECKBOX_CELL_FLEX=t.COMPACT_COLUMN_HEADER_HEIGHT=t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.MEDIA_CELL_ICON_WIDTH=t.SNIPPET_HORIZONTAL_PADDING=t.SNIPPET_HEIGHT_PER_ROW=t.ROW_SNIPPET_VERTICAL_MARGIN=t.ROW_VERTICAL_PADDING=t.ROW_SUBTITLE_HEIGHT=t.ROW_TITLE_HEIGHT=t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=t.DEFAULT_ROW_HEIGHT_DENSE=t.DEFAULT_ROW_HEIGHT=t.DEFAULT_COLUMN_HEADER_HEIGHT=void 0;var a=o.intl.formatMessage({id:"P+XAua",defaultMessage:"Name"});t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_ROW_HEIGHT_DENSE=60,t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=40,t.ROW_TITLE_HEIGHT=24,t.ROW_SUBTITLE_HEIGHT=16,t.ROW_VERTICAL_PADDING=16,t.ROW_SNIPPET_VERTICAL_MARGIN=8,t.SNIPPET_HEIGHT_PER_ROW=16,t.SNIPPET_HORIZONTAL_PADDING=16,t.MEDIA_CELL_ICON_WIDTH=64,t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.ROW_VERTICAL_PADDING+t.ROW_TITLE_HEIGHT+t.ROW_SUBTITLE_HEIGHT+t.ROW_SNIPPET_VERTICAL_MARGIN+3*t.SNIPPET_HEIGHT_PER_ROW,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.CHECKBOX_CELL_FLEX="0 0 36px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.FILE_NAME_CELL_SEARCH_FLEX_BASIS={3:50,2:65,1:100},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[3]+"%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[2]+"%","0 0 35%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[1]+"%"]},t.COLUMN_DEFAULT_WIDTHS={FILENAME:300,MODIFIED:160,CATEGORY:160,EXTENSION:160,SIZE:160,SHARED_WITH:160,SYNC_SETTING:160,FILE_COUNTS:160,RELEVANCE:160,LOCKED_FILES:160,POLICY:160},t.COLUMN_MIN_WIDTHS={FILENAME:200,MODIFIED:140,CATEGORY:120,EXTENSION:160,SIZE:120,SHARED_WITH:120,SYNC_SETTING:120,FILE_COUNTS:120,RELEVANCE:150,LOCKED_FILES:120,POLICY:120},t.COLUMN_MAX_WIDTHS={FILENAME:1200,MODIFIED:200,CATEGORY:300,EXTENSION:300,SIZE:200,SHARED_WITH:300,SYNC_SETTING:300,FILE_COUNTS:300,RELEVANCE:300,LOCKED_FILES:300,POLICY:300},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.LIST_VIEW_COLUMNS=[{sortField:i.SortField.FILENAME,label:a,popoverTriggerLabel:a,isLocked:!0},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"})},{sortField:i.SortField.SHARED_WITH,label:o.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}),popoverTriggerLabel:o.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}),isSortOrderOptionDisabled:!0},{sortField:i.SortField.CATEGORY,label:o.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:o.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"})},{sortField:i.SortField.EXTENSION,label:o.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:o.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"})},{sortField:i.SortField.SIZE,label:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"})}],t.GRID_VIEW_COLUMNS=[{sortField:i.SortField.FILENAME,label:a,popoverTriggerLabel:a},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"})},{sortField:i.SortField.CATEGORY,label:o.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:o.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"})},{sortField:i.SortField.EXTENSION,label:o.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:o.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"})},{sortField:i.SortField.SIZE,label:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"})}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:i.SortField.FILENAME,label:a,popoverTriggerLabel:a,isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.SIZE,label:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=[{sortField:i.SortField.FILENAME,label:a,popoverTriggerLabel:a,isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.RELEVANCE,label:o.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:o.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),isLocked:!1,isSortDisabled:!1},{sortField:i.SortField.SIZE,label:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),isLocked:!1,isSortDisabled:!1}],t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=[{sortField:i.SortField.RELEVANCE,label:o.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:o.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),isLocked:!1,isSortDisabled:!1},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:i.SortField.FILENAME,label:a,popoverTriggerLabel:a,isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),popoverTriggerLabel:o.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[i.NewFolderCreationState.CREATE_FOLDER_INACTIVE,i.NewFolderCreationState.PENDING_INPUT,i.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[i.RenameState.PENDING_INPUT,i.RenameState.SAVING_INPUT],t.AllViewTypes=[i.ViewType.Grid,i.ViewType.LargeGrid,i.ViewType.List,i.ViewType.CondensedList],t.AllDropTargetHighlightModes=[i.DropTargetHighlightMode.NONE,i.DropTargetHighlightMode.ALL_FOLDERS,i.DropTargetHighlightMode.NONSELECTED_FOLDERS,i.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,i.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[i.SortField.FILENAME,i.SortField.MODIFIED,i.SortField.CATEGORY,i.SortField.EXTENSION,i.SortField.SIZE,i.SortField.SHARED_WITH,i.SortField.SYNC_SETTING,i.SortField.FILE_COUNTS],t.SortIsFilename=[i.SortField.FILENAME,i.SortField.CATEGORY,i.SortField.EXTENSION,i.SortField.SHARED_WITH,i.SortField.SYNC_SETTING],t.AllLoadingStates=[i.LoadingState.LOADED,i.LoadingState.LOADING_FIRST_PAGE,i.LoadingState.LOADING_REMAINING_PAGES,i.LoadingState.LOAD_ERROR],t.AllSortDirections=[i.SortDirection.ASCENDING,i.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=((n={})[i.ViewType.Grid]=256,n[i.ViewType.LargeGrid]=512,n[i.ViewType.List]=32,n),t.ViewTypeGridSizes=((l={})[i.ViewType.Grid]=160,l[i.ViewType.LargeGrid]=480,l[i.ViewType.List]=0,l),t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.VIEW_TYPE_GLOBAL_SCOPE="*",t.VIEW_TYPE_SCOPE_TEXT_SEARCH=":search/text",t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=":search/image",t.IMAGE_THUMBNAIL_EXTENSIONS=["heic","jpg","jpeg","png","tiff","tif","gif","bmp","webp","wbmp","psd","svg","svgz","ai","eps","otf","ttf","3gp","3gpp","3gpp2","asf","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","mxf","oggtheora","ogv","rm","ts","vob","webm","wmv","indd"],t.defaultViewTypes=((r={})[t.VIEW_TYPE_GLOBAL_SCOPE]=i.ViewType.List,r[t.VIEW_TYPE_SCOPE_TEXT_SEARCH]=i.ViewType.List,r[t.VIEW_TYPE_SCOPE_IMAGE_SEARCH]=i.ViewType.LargeGrid,r)})),define("modules/clean/react/files_view/drag_drop/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/files_view/util"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFileDragEnterItem=t.cleanupExternalDragHandler=t.setupExternalDragHandler=void 0;var n=new o.ScopedEventHandlers(document);t.setupExternalDragHandler=function(e,t,i,o,l,r,a){n.add(e,"dragenter",(function(e){(t()||i())&&!e.target.closest(l)&&r()&&(a(null),o())}))},t.cleanupExternalDragHandler=function(e){n.remove(e,"dragenter")},t.onFileDragEnterItem=function(e,t,o,n,l,r,a,s){if(t||o)if(e.is_dir&&!(n&&o)){if(l)return;var d=r.isCurrentPathWriteable()&&!i.File.isReadOnlySharedFolder(e);a(e),s({path:e.fq_path,hasPermissionToUploadToFolder:d,isMovingIntoVault:Boolean(e.is_in_vault_folder)})}else a(null),s()}})),define("modules/clean/react/files_view/drag_drop/drag_to_select",["require","exports","tslib","react","modules/clean/react/css","modules/clean/react/files_view/types","modules/clean/react/selectable_list","lodash"],(function(e,t,i,o,n,l,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragToSelectController=t.shouldMouseDownInitiateDragToSelect=t.isItemInSelectArea=void 0,o=i.__importDefault(o),t.isItemInSelectArea=function(e,t){return!(e.top+e.height<t.top||e.top>t.top+t.height||e.left+e.width<t.left||e.left>t.left+t.width)},t.shouldMouseDownInitiateDragToSelect=function(e,o,n,l){return!d(e)&&(e.target===e.currentTarget||(null==n||!n.selected||!n.selected.some((function(e){return l[e]&&t.isItemInSelectArea(l[e],i.__assign(i.__assign({},o),{height:0,width:0}))}))))};var s=a.throttle((function(e,i,o,n,a){Object.keys(e).forEach((function(s){t.isItemInSelectArea(e[s],i)?(null==a?void 0:a.selected.has(s))||o(s,r.SelectOptions.DEFAULT,l.FilesViewActionSource.DRAG_TO_SELECT):(null==a?void 0:a.selected.has(s))&&n(s,!1,l.FilesViewActionSource.DRAG_TO_SELECT)}))}),25),d=function(e){for(var t=e.target;t instanceof Node&&t!==e.currentTarget;){if(!0===t.draggable)return!0;t=t.parentElement}return!1};t.DragToSelectController=n.requireCssWithComponent((function(e){var i=o.default.useState(!1),n=i[0],r=i[1],d=o.default.useState(!1),c=d[0],u=d[1],f=o.default.useState(0),p=f[0],m=f[1],h=o.default.useRef(null),g=o.default.useRef({}),_=o.default.useState({top:0,left:0}),E=_[0],T=_[1],S=o.default.useState({top:0,left:0,width:0,height:0}),v=S[0],b=S[1];o.default.useEffect((function(){var e=a.throttle(w,8);return c&&(window.document.addEventListener("mouseup",I),window.document.addEventListener("mousemove",e)),function(){window.document.removeEventListener("mousemove",e),window.document.removeEventListener("mouseup",I)}}),[c,n]),o.default.useEffect((function(){return window.document.addEventListener("click",L,!0),function(){window.document.removeEventListener("click",L,!0)}}),[p]),o.default.useEffect((function(){n&&s(g.current,v,e.handleSelect,e.handleDeselect,e.selection)}),[n,v,e.selection]);var w=function(t){var i;if(c){if(1!==t.buttons)return u(!1),void r(!1);var o=null===(i=h.current)||void 0===i?void 0:i.getBoundingClientRect(),a=t.clientX-((null==o?void 0:o.left)||0),s=t.clientY-((null==o?void 0:o.top)||0);s<0&&(s=0),a<0&&(a=0),o&&a-10>o.width&&(a=o.width-10),o&&s-20>o.height&&(s=o.height-20);var d={top:Math.min(E.top,s),left:Math.min(E.left,a),height:Math.abs(E.top-s),width:Math.abs(E.left-a)};!n&&d.width<=5&&d.height<=5||(n?n&&b(d):(t.preventDefault(),e.updateSelection([],l.FilesViewActionSource.DRAG_TO_SELECT,!0),b(d),r(!0)))}},I=function(e){c&&(n&&m(Date.now()),r(!1),u(!1),b({top:0,left:0,width:0,height:0}),T({top:0,left:0}),e.preventDefault())},L=function(e){Date.now()-p<50&&e.preventDefault(),window.document.removeEventListener("click",L,!0)};if(!e.isDragToSelectEnabled){return o.default.createElement("div",null,e.children({registerSelectableItem:function(e,t){}}))}return o.default.createElement("div",{className:"files-view_drag-to-select",onMouseDown:function(i){var o;if(!i.isDefaultPrevented()&&!c&&1===i.buttons){var n=null===(o=h.current)||void 0===o?void 0:o.getBoundingClientRect(),l=i.clientX-((null==n?void 0:n.left)||0),r=i.clientY-((null==n?void 0:n.top)||0);t.shouldMouseDownInitiateDragToSelect(i,{top:r,left:l},e.selection,g.current)&&(T({top:r,left:l}),b({top:r,left:l,width:0,height:0}),u(!0))}},ref:h},o.default.createElement("div",{className:"files-view_drag-to-select-removal"},e.children({registerSelectableItem:function(e,t){var i,o=t.top+40,n=null===(i=h.current)||void 0===i?void 0:i.getBoundingClientRect();if(n){var l=t.width||n.width;g.current[e]={top:o,width:l,left:t.left,height:t.height}}}})),n&&o.default.createElement("div",{className:"files-view_select-box",style:{top:v.top+"px",left:v.left+"px",width:v.width+"px",height:v.height+"px"}}))}),["/static/css/files_view/drag_to_select-vflRc0IIx.css"])})),define("modules/clean/react/files_view/file_jump",["require","exports","tslib","ts-keycode-enum","modules/core/dom"],(function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyPress=void 0,n=i.__importStar(n);var l=["/","\\",":","?","*","<",">","|"],r=null;t.handleKeyPress=function(e,t,i,a){var s=null!=e.which?e.which:e.keyCode,d=String.fromCharCode(s);s<o.Key.Space||l.includes(d)||!document.activeElement.closest(".brws-checkbox-cell")&&n.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||s===o.Key.Space&&!t()||(s===o.Key.Space&&t()&&e.preventDefault(),i(d),null!=r&&clearTimeout(r),r=setTimeout((function(){a()}),1e3))}})),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","immutable","lodash","react","spectrum/media_table","spectrum/table","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/types"],(function(e,t,i,o,n,l,r,a,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyFolderTable=void 0,o=i.__importStar(o),n=i.__importStar(n),l=i.__importDefault(l);t.EmptyFolderTable=function(e){var t=e.subtitle,i=e.subtitleLink,c=e.subtitleOnClick,u=e.numRowsAbove,f=void 0===u?2:u,p=e.totalRows,m=void 0===p?14:p,h=e.title,g=e.onTTI,_=e.onFocusSearchBar,E=void 0===_?n.noop:_,T=e.onNavigateToParentFolder,S=void 0===T?n.noop:T,v=e.onOpenKeyboardShortcutModal,b=void 0===v?n.noop:v,w=e.onPasteFromClipboard,I=void 0===w?n.noop:w,L=l.default.useRef(null);l.default.useEffect((function(){return null==g||g(),s.setupFilesViewKeyboardShortcuts({viewType:d.ViewType.List,getIsGlobalEvent:s.generateGetIsGlobalEventForRef(L),getIsItemEvent:function(){return!1},getSelectedFiles:function(){return o.OrderedMap()},isCurrentPathWriteable:function(){return!1},selectAllAction:n.noop,deselectAllAction:n.noop,onCopyToClipboard:n.noop,onCutToClipboard:n.noop,onDelete:n.noop,onFocusSearchBar:E,onNavigateToFileOrFolder:n.noop,onNavigateToParentFolder:S,onPasteFromClipboard:I,onShowRename:n.noop,scope:"EmptyFolderTable",onShowHelpMenu:function(){return b()}}),function(){s.resetFilesViewKeyboardShortcuts("EmptyFolderTable")}}),[]);for(var y=[],M=0;M<f;M++)y.push(l.default.createElement(r.MediaRow,{key:-M-1}));var F=[],C=Math.max(m-f-1,0);for(M=0;M<C;M++)F.push(l.default.createElement(r.MediaRow,{key:M+1}));var D=l.default.createElement("h3",{className:"u-font-strong empty-folder-table-title"},h);return l.default.createElement(a.Table,{role:"main","aria-atomic":"true","aria-live":"polite",className:"empty-folder-table",ref:L},l.default.createElement(a.TableHead,null),l.default.createElement(a.TableBody,null,y,l.default.createElement(r.MediaRow,{key:0},l.default.createElement(r.MediaCell,{className:"empty-folder-table-cell",title:D,subtitle:t&&i?l.default.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:i,onClick:c},t):t?l.default.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0})),F))}})),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],(function(e,t,i,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSharingDisabledForFile=t.shouldFileBeHighlightedDropTarget=void 0,t.shouldFileBeHighlightedDropTarget=function(e){var t=e.file,l=e.isSelected,r=e.dropTargetHighlightMode;if(r===o.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(n.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(r){case o.DropTargetHighlightMode.ALL_FOLDERS:return!0;case o.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!l;case o.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!l&&t.type!==i.FileTypes.SHARED_FOLDER;case o.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!l&&![i.FileTypes.SHARED_FOLDER,i.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1},t.isSharingDisabledForFile=function(e){var t=e.context,o=e.file,r=(e.user,e.expVaultEnableViewOnlySharing),a=void 0!==r&&r,s=o.per_node_metadata,d=!!((null==s?void 0:s.link_node)||(null==s?void 0:s.suppress_ns_partition)||(null==s?void 0:s.suppress_shared_link));return o.isDeleted||o.is_dir&&l.shouldUsePublicFolderSharing(t.config,o.fq_path)||n.File.isTeamMemberFolder(o)||!n.File.canViewFileMembers(o,t)||t.isInsideVaultFolder&&!a||o.type===i.FileTypes.VAULT_FOLDER||o.type===i.FileTypes.SANDBOX||d}})),define("modules/clean/react/files_view/contexts/file_thumb_store",["require","exports","tslib","react","modules/clean/photos/thumb_loading/buffered_thumb_store","modules/clean/photos/thumb_loading/generic_thumb_store","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/react/files_view/files_view_hooks","modules/clean/react/icon/file_folder_icon","modules/clean/react/files_view/constants"],(function(e,t,i,o,n,l,r,a,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withThumbStore=t.ThumbStoreContext=t.ThumbStoreProvider=void 0,o=i.__importDefault(o),t.ThumbStoreProvider=function(e){var i=e.shouldPrewarm,u=e.path,f=e.children,p=e.items,m=s.useIsPostTTI(),h=o.default.useMemo((function(){return m?new l.GenericThumbStore:new n.BufferedThumbStore}),[u]);return o.default.useEffect((function(){if(i){var e=[];return null==p||p.slice(0,100).forEach((function(t){if(t instanceof a.File||t instanceof a.FileSharedWithMe){var i=d.getThumbnailUrlForItem(t.thumbnail_url_tmpl,c.ViewTypeThumbnailSizes[r.ViewType.Grid]);if(i){var o=h.bind_url(i,{onSuccess:function(){}});o&&e.push(o)}}})),function(){return e.forEach((function(e){return h.unbind_url(e)}))}}}),[u,p,h,i]),o.default.createElement(t.ThumbStoreContext.Provider,{value:h},f)},t.ThumbStoreContext=o.default.createContext(new l.GenericThumbStore),t.withThumbStore=function(e){return function(n){return o.default.createElement(t.ThumbStoreContext.Consumer,null,(function(t){return o.default.createElement(e,i.__assign({},n,{thumbStore:t}))}))}}})),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","tslib","keymaster","react-dom","modules/clean/react/browse/action_logger","modules/clean/react/files_view/file_jump","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/undo","modules/core/browser_detection","modules/core/i18n","modules/core/notify"],(function(e,t,i,o,n,l,r,a,s,d,c,u,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFileJumpKeyboardShortcuts=t.setupFileJumpKeyboardShortcuts=t.setupFilesViewKeyboardShortcuts=t.getActionsAndAttachLogging=t.resetFilesViewKeyboardShortcuts=t.generateGetIsGlobalEventForRef=t.generateGetIsGlobalEvent=t.FILES_VIEW_TILE_GRID_SHORTCUTS=t.FILES_VIEW_LIST_SHORTCUTS=t.FILES_VIEW_SHORTCUTS=void 0,o=i.__importDefault(o),n=i.__importStar(n),r=i.__importStar(r),d=i.__importStar(d),c=i.__importStar(c),t.FILES_VIEW_SHORTCUTS=[{key:u.intl.formatMessage({id:"kOb587",defaultMessage:"/"}),desc:u.intl.formatMessage({id:"vOBkFB",defaultMessage:"Search"})},{windowsKey:u.intl.formatMessage({id:"JD6thv",defaultMessage:"Ctrl + a"}),macKey:u.intl.formatMessage({id:"vXQEej",defaultMessage:"⌘ + a"}),desc:u.intl.formatMessage({id:"n7drWm",defaultMessage:"Select all files"})},{windowsKey:u.intl.formatMessage({id:"yY9fAj",defaultMessage:"Esc"}),macKey:u.intl.formatMessage({id:"yIq4Am",defaultMessage:"esc"}),desc:u.intl.formatMessage({id:"m7zp3J",defaultMessage:"Deselect all files"})},{windowsKey:u.intl.formatMessage({id:"BmNZ7+",defaultMessage:"Ctrl + c"}),macKey:u.intl.formatMessage({id:"L/3I1a",defaultMessage:"⌘ + c"}),desc:u.intl.formatMessage({id:"jD02CF",defaultMessage:"Copy selected file(s)"})},{windowsKey:u.intl.formatMessage({id:"TeH7ne",defaultMessage:"Ctrl + x"}),macKey:u.intl.formatMessage({id:"Hjoc2x",defaultMessage:"⌘ + x"}),desc:u.intl.formatMessage({id:"JvfueH",defaultMessage:"Cut selected file(s)"})},{windowsKey:u.intl.formatMessage({id:"pApXZD",defaultMessage:"Ctrl + v"}),macKey:u.intl.formatMessage({id:"1MiQRb",defaultMessage:"⌘ + v"}),desc:u.intl.formatMessage({id:"ORvNm9",defaultMessage:"Paste selected file(s) into the current folder"})},{key:u.intl.formatMessage({id:"u3d9dU",defaultMessage:"F2"}),desc:u.intl.formatMessage({id:"GrOPDo",defaultMessage:"Rename selected file"})},{windowsKey:u.intl.formatMessage({id:"kHlg2I",defaultMessage:"Delete"}),macKey:u.intl.formatMessage({id:"ZZU2Yr",defaultMessage:"delete"}),desc:u.intl.formatMessage({id:"45XRF8",defaultMessage:"Delete selected file(s)"})},{windowsKey:u.intl.formatMessage({id:"8X8aMD",defaultMessage:"Ctrl + z"}),macKey:u.intl.formatMessage({id:"10+RMZ",defaultMessage:"⌘ + z"}),desc:u.intl.formatMessage({id:"HGnEOI",defaultMessage:"Undo recent move/copy/rename/delete"})},{key:u.intl.formatMessage({id:"YQJt5v",defaultMessage:"?"}),desc:u.intl.formatMessage({id:"mFXmY0",defaultMessage:"Show keyboard shortcuts"})}],t.FILES_VIEW_LIST_SHORTCUTS=i.__spreadArrays([{key:u.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:u.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:u.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:u.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})},{key:u.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:u.intl.formatMessage({id:"rJHa1d",defaultMessage:"Go up a folder"})},{key:u.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:u.intl.formatMessage({id:"+WMBQW",defaultMessage:"Open folder"})}],t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=i.__spreadArrays([{key:u.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:u.intl.formatMessage({id:"Xg+zFf",defaultMessage:"Select file in previous row (hold shift to select range)"})},{key:u.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:u.intl.formatMessage({id:"erVlBC",defaultMessage:"Select file in next row (hold shift to select range)"})},{key:u.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:u.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:u.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:u.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})}],t.FILES_VIEW_SHORTCUTS);var p="",m=new s.ScopedEventHandlers(document);function h(e,t){return function(i){e(i)&&(i.preventDefault(),"function"==typeof t&&t(i))}}function g(e){var t=e.user,i=e.viewType,o=e.getSelectedFiles,n=e.isCurrentPathWriteable,r=e.onShowHelpMenu,a=e.onDelete,s=e.onShowRename,c=e.onFocusSearchBar,p=e.onNavigateToFileOrFolder,m=e.onNavigateToParentFolder,h=e.selectAllAction,g=e.onCopyToClipboard,_=e.onCutToClipboard,E=e.onPasteFromClipboard,T=e.deselectAllAction,S=function(){var e=o(),t=e.some((function(e){return e.read_only}));if(1===e.size)if(n()&&!t){var i=e.first();i.isDeleted?f.Notify.error(u.intl.formatMessage({id:"CCUrto",defaultMessage:"Deleted files can’t be renamed."})):s(i)}else f.Notify.warning(u.intl.formatMessage({id:"jXim1P",defaultMessage:"You don’t have permission to rename files in this folder."}))},v=function(){var e=o();e.size&&a(e)},b=function(){d.performUndo()},w=function(){var e=o();1===e.size&&p(e.first())},I=function(){var e=o(),t=e.first();1===e.size&&t.is_dir&&p(t)},L=function(e,o){l.logKeyboardShortcutUsage({user_id:t?t.id:null,view_type:i,keyboard_shortcut_type:e}),o()};return{renameFile:function(){L("rename",S)},focusSearchBar:function(){L("search",c)},showHelpMenu:function(){L("help",r)},selectAll:function(){L("select-all",h)},copyToClipboard:function(){L("copy",g)},cutToClipboard:function(){L("cut",_)},deleteFiles:function(){L("delete",v)},pasteFromClipboard:function(){L("paste",E)},undoAction:function(){L("undo",b)},deselectFiles:function(){L("deselect",T)},navigateToFileOrFolder:function(){L("navigate-file-folder",w)},navigateToFolder:function(){L("navigate-folder",I)},navigateToParent:function(){L("navigate-parent",m)}}}t.generateGetIsGlobalEvent=function(e){return function(t){return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&n.findDOMNode(e).contains(t.target)}},t.generateGetIsGlobalEventForRef=function(e){return function(t){var i;return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&(null===(i=e.current)||void 0===i?void 0:i.contains(t.target))||!1}},t.resetFilesViewKeyboardShortcuts=function(e){var t;t=e,o.default.clearScope(t),o.default.setScope(p),m.remove(e,"keydown"),m.remove(e,"keyup")},t.getActionsAndAttachLogging=g,t.setupFilesViewKeyboardShortcuts=function(e){var t=e.scope,i=e.getIsItemEvent,n=e.getIsGlobalEvent;(p=o.default.getScope())!==t&&o.default.setScope(t);var l=g(e);o.default("f2",t,h(i,l.renameFile)),o.default("/",t,h(n,l.focusSearchBar)),o.default("shift+/",t,h(n,l.showHelpMenu)),o.default("escape",t,h(n,l.deselectFiles)),c.mac?(o.default("command+a",t,h(n,l.selectAll)),o.default("command+c",t,h(i,l.copyToClipboard)),o.default("backspace",t,h(i,l.deleteFiles)),o.default("command+v",t,h(n,l.pasteFromClipboard)),o.default("command+x",t,h(i,l.cutToClipboard)),o.default("command+z",t,h(n,l.undoAction))):(o.default("ctrl+a",t,h(n,l.selectAll)),o.default("ctrl+c",t,h(i,l.copyToClipboard)),o.default("delete",t,h(i,l.deleteFiles)),o.default("ctrl+v",t,h(n,l.pasteFromClipboard)),o.default("ctrl+x",t,h(i,l.cutToClipboard)),o.default("ctrl+z",t,h(n,l.undoAction))),e.viewType===a.ViewType.List&&(o.default("right",t,h(i,l.navigateToFolder)),o.default("left",t,h(n,l.navigateToParent)))},t.setupFileJumpKeyboardShortcuts=function(e){var t=e.scope,i=e.getIsFileJumping,n=e.onAddFileJumpKeyCode,l=e.onResetFileJump;m.add(t,"keypress",(function(e){o.default.getScope()===t&&r.handleKeyPress(e,i,n,l)}))},t.resetFileJumpKeyboardShortcuts=function(e){m.remove(e,"keypress")}})),define("modules/clean/react/files_view/name_input",["require","exports","tslib","react","ts-keycode-enum","modules/clean/react/files_view/types","dig-components/text_fields"],(function(e,t,i,o,n,l,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameInput=void 0,o=i.__importDefault(o);var a=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=o.default.createRef(),t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(l.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===n.Key.Escape?(e.preventDefault(),t.props.onCancel({source:l.NameInputActionSource.ESC})):e.keyCode===n.Key.Enter&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(l.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.current&&this.inputRef.current.focus(),window.requestAnimationFrame((function(){if(e.inputRef.current){var t=e.inputRef.current.value,i=e.props.ignoreFileExtension?t.length:t.lastIndexOf(".");i<0&&(i=t.length),e.inputRef.current.setSelectionRange(0,i)}}))},t.prototype.submitIfChanged=function(e){if(this.inputRef.current){var t=this.inputRef.current.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)}},t.prototype.render=function(){return o.default.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},o.default.createElement(r.TextInput,{ref:this.inputRef,defaultValue:this.props.defaultValue,className:this.props.className,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:a,onClick:a,onSubmit:a,idDir:null},t})(o.default.PureComponent);t.NameInput=s})),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","modules/clean/react/async/loadable","modules/core/browser_detection","modules/core/i18n"],(function(e,t,i,o,n,l,r,a,s,d,c,u){"use strict";var f;Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewOverflowMenu=t.OverflowMenuSize=t.AsyncFilesViewMobileOverflowMenu=void 0,o=i.__importDefault(o),n=i.__importDefault(n),a=i.__importStar(a),t.AsyncFilesViewMobileOverflowMenu=d.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/files_view/mobile_overflow_menu"],t,i)})).then(i.__importStar).then((function(e){return e.FilesViewMobileOverflowMenu}))}}),(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(f=t.OverflowMenuSize||(t.OverflowMenuSize={}));var p=(function(e){function l(t){var i=e.call(this,t)||this;return i.handleSelection=function(e){e.performAction()},i.handleMenuToggle=function(e){var t=e.isOpen;if(t&&i.props.onMenuOpen&&i.props.onMenuOpen(),l.isDynamicProps(i.props)&&t){var o=i.props.getOverflowMenuActions(i.props.file,!!i.props.canDisplayFolderSizes);i.setState({actionSection:o})}},i.handlePreventMouseDown=function(e){e.preventDefault(),e.stopPropagation()},i.handleMobileMenuOpen=function(e){return function(t){i.handlePreventMouseDown(t),i.handleMenuToggle({isOpen:!0}),e()}},i.handleClick=function(e){return function(t){i.handlePreventMouseDown(t),e({})}},i.state={actionSection:l.isDynamicProps(t)?[]:t.actionSection},i}return i.__extends(l,e),l.prototype.render=function(){var e=this,r=this.props,a=r.isResponsive,d=r.size,u=r.showBorders,p=r.ariaHidden,h=(l.isDynamicProps(this.props)?this.props:{}).file,g=void 0===h?void 0:h,_=a&&c.is_mobile_or_tablet(),E=d===f.Small?"small":"standard";return o.default.createElement("div",{"aria-hidden":p?"true":void 0,className:"browse-overflow-menu"},_?o.default.createElement(t.AsyncFilesViewMobileOverflowMenu,{trigger:function(t){var i=t.openMobileMenu;return o.default.createElement(m,{onClick:e.handleMobileMenuOpen(i),showBorders:u,size:E})},file:g,actionSection:this.state.actionSection}):o.default.createElement(s.Menu.Wrapper,{onSelection:this.handleSelection,onToggle:this.handleMenuToggle,onClick:this.handlePreventMouseDown,onDoubleClick:this.handlePreventMouseDown,isPortaled:!1},(function(t){var l=t.getTriggerProps,r=t.getContentProps,a=t.openMenu;return o.default.createElement(o.default.Fragment,null,o.default.createElement(m,{triggerProps:l(),onClick:e.handleClick(a),showBorders:u,size:E,tabIndex:p?-1:0}),o.default.createElement(s.Menu.Content,i.__assign({placement:"bottom-end"},r(),{className:"browse-overflow-menu-content"}),e.state.actionSection.map((function(e,t){return o.default.createElement(s.Menu.Segment,{key:"action-group-"+t},e.map((function(e,t){return o.default.createElement(s.Menu.ActionItem,{key:t+"-"+e.label,value:e,disabled:e.disabled,className:n.default("browse-overflow-menu-item",e.className)},e.label)})))}))))})))},l.isDynamicProps=function(e){return"file"in e},l.defaultProps={onMenuToggle:function(){},isResponsive:!0},l})(o.default.Component);t.FilesViewOverflowMenu=p;var m=function(e){var t=e.size,n=e.showBorders,s=e.onClick,d=e.tabIndex,c=e.triggerProps,f=u.intl.formatMessage({id:"oeNPkV",defaultMessage:"More actions"});return o.default.createElement(l.IconButton,i.__assign({},c,{"aria-label":f,onClick:s,size:t,variant:n?"outline":"transparent",tabIndex:d}),o.default.createElement(r.UIIcon,{src:a.MoreHorizontalLine,size:t}))}})),define("modules/clean/react/files_view/overflow_menu_item_section",["require","exports","tslib","react","spectrum/popover"],(function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverflowMenuItemSection=void 0,o=i.__importDefault(o),t.OverflowMenuItemSection=function(e){var t=e.actionSection,l=e.showSeparators,r=void 0===l||l,a=e.renderItem;return 0===t.length?null:o.default.createElement(o.default.Fragment,null,t.map((function(e){return e.map((function(e,t){return o.default.createElement(o.default.Fragment,{key:t+"-"+e.label},a(e))}))})).reduce((function(e,t,l){return i.__spreadArrays(e,r?[o.default.createElement(n.PopoverItemGroupSeparator,{key:l})]:[],t)})))}})),define("modules/clean/react/files_view/star",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/files_view/contexts/callback_context","modules/clean/react/browse/models"],(function(e,t,i,o,n,l,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarContainer=void 0,o=i.__importDefault(o),t.StarContainer=n.Loadable({loader:function(){return i.__awaiter(void 0,void 0,void 0,(function(){var t,n,a,s,d;return i.__generator(this,(function(c){switch(c.label){case 0:return[4,new Promise((function(t,i){e(["modules/clean/react/starred/browse_exports"],t,i)})).then(i.__importStar)];case 1:return t=c.sent(),n=t.idTypePairFromStarrableItem,a=t.itemNameFromStarrableItem,s=t.Star,d=t.StarredSource,[2,function(e){var t=e.item,i=e.user,c=e.className,u=e.isReadOnly,f=e.tabIndex,p=e.starButtonClassName,m=e.alwaysShowUnstarred,h=n(t),g=h.id,_=h.type,E=a(t),T=(o.default.useContext(l.FilesViewCallbackContext)||{}).onStarClick;return o.default.createElement("div",{className:c},o.default.createElement(s,{id:g,key:"star",idType:_,isDir:Boolean(t.is_dir),user:i,onStarClick:function(e){t instanceof r.File&&(null==T||T(t,e))},source:d.BROWSE,isReadOnly:u,tabIndex:f,starButtonClassName:p,alwaysShowUnstarred:m,itemName:E}))}]}}))}))}})})),define("modules/clean/react/files_view/file_thumbnail",["require","exports","tslib","classnames","react","spectrum/file_icon/get_extension","modules/clean/react/files_view/constants","modules/clean/react/files_view/types","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/user_education/react/user_education_effect","modules/clean/react/files_view/contexts/file_thumb_store"],(function(e,t,i,o,n,l,r,a,s,d,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileThumbnail=t.FileThumbnailComponentForTests=void 0,o=i.__importDefault(o);var f=(function(e){function t(t){var i=e.call(this,t)||this;i._thumbRequestId=null,i.handleThumbnailError=function(){i.setState({thumbnailSrc:null})};var o=t.thumbStore,n=t.file.thumbnail_url_tmpl;return i.state={thumbnailSrc:n?o.get_thumb(n):null},i}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchThumbnail(this.props)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e))},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded()},t.prototype.fetchThumbnail=function(e){var t=this,i=e.file,o=e.thumbStore,n=i.fq_path||i.filename||"",d=l.getExtension(n);if(d&&r.IMAGE_THUMBNAIL_EXTENSIONS.includes(d)){var c=s.getThumbnailUrlForItem(i.thumbnail_url_tmpl,this.props.thumbnailSize?this.props.thumbnailSize:r.ViewTypeThumbnailSizes[a.ViewType.List]);c&&(this._thumbRequestId=o.bind_url(c,{onSuccess:function(){t.setState({thumbnailSrc:o.get_thumb(c)})},onError:function(){t.handleThumbnailError()}}))}},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbnailSrc:null})},t.prototype.render=function(){var e=this.props,t=e.file,i=e.showCDMUserEducationEffects,l=e.iconSize,r=this.state.thumbnailSrc,a=t.fq_path||t.filename;return r?n.default.createElement(d.LockBadge,{file:this.props.file,variant:"preview-small"},n.default.createElement("img",{alt:a,draggable:!1,className:o.default("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:r,onError:this.handleThumbnailError})):n.default.createElement(p,{file:t,showCDMUserEducationEffects:i,iconSize:l})},t})((n=i.__importDefault(n)).default.PureComponent);t.FileThumbnailComponentForTests=f,t.FileThumbnail=u.withThumbStore(f);var p=function(e){var t=e.file,o=e.showCDMUserEducationEffects,l=e.iconSize,r=l?{height:l.toString(),width:l.toString()}:{},a=n.default.createElement(s.FileOrFolderIcon,i.__assign({className:"brws-file-name-cell-icon",file:t,showPreview:!1},r));return o?n.default.createElement(c.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},a):a}})),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","classnames","immutable","react","modules/clean/em_string","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/browse/action_logger","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_drop/drag_and_drop","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/react/icon/file_folder_icon","modules/clean/react/maestro/components/tile_grid","modules/clean/react/selectable_list","modules/clean/react/sticky_position","modules/clean/react/title_bubble","modules/clean/web_user_action_events","modules/core/browser","modules/core/i18n"],(function(e,t,i,o,n,l,r,a,s,d,c,u,f,p,m,h,g,_,E,T,S,v,b,w,I,L,y,M){"use strict";function F(e){var t=e instanceof c.File?a.filename(e.fq_path):T.isFswm(e)?e.filename:e instanceof c.Paper?e.title:e.name;if(e instanceof c.File)switch(e.type){case s.FileTypes.FOLDER:t=M.intl.formatMessage({id:"C/gp+a",defaultMessage:"Folder, {alt}"},{alt:t});break;case s.FileTypes.PACKAGE:t=M.intl.formatMessage({id:"FhSkpL",defaultMessage:"Package, {alt}"},{alt:t});break;case s.FileTypes.SHARED_FOLDER:t=M.intl.formatMessage({id:"rWEPV0",defaultMessage:"Shared folder, {alt}"},{alt:t});break;case s.FileTypes.SANDBOX:t=M.intl.formatMessage({id:"+vbakm",defaultMessage:"Sandbox, {alt}"},{alt:t});break;case s.FileTypes.TEAM_SHARED_FOLDER:t=M.intl.formatMessage({id:"ZtOyAr",defaultMessage:"Team shared folder, {alt}"},{alt:t});break;case s.FileTypes.TEAM_MEMBER_FOLDER:t=M.intl.formatMessage({id:"1yRjbu",defaultMessage:"Team member folder, {alt}"},{alt:t});break;default:t=M.intl.formatMessage({id:"e8WrLw",defaultMessage:"File, {alt}"},{alt:t})}return t}function C(e){e.stopPropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewTileGrid=t.TileLabel=void 0,o=i.__importDefault(o),n=i.__importStar(n),l=i.__importDefault(l),a=i.__importStar(a),y=i.__importStar(y);var D=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props,i=t.fileRename,o=t.arePostTTIModulesLoaded,n=t.user,s=t.item,d=t.createRenameCancelHandler,f=t.createRenameSubmitHandler;if(e=s instanceof c.File?a.filename(s.fq_path):s instanceof c.FileSharedWithMe?s.filename:s instanceof c.Paper?s.title:s.name,s instanceof c.File&&i&&a.paths_are_equal(i.file.fq_path,s.fq_path)){if(i.state===E.RenameState.PENDING_INPUT)return l.default.createElement(_.TileLabelInput,{defaultValue:e,label:e,onCancel:d(s),onSubmit:f(s)});if(i.state===E.RenameState.SAVING_INPUT)return l.default.createElement(v.TileItemLabelText,{className:"tile-label__text--saving",label:M.intl.formatMessage({id:"OefYpa",defaultMessage:"Renaming…"})})}var p=r.Emstring.em_snippet(e,14,.5),m=o&&s instanceof c.File&&!c.File.isNoAccessSharedFolder(s),h=l.default.createElement(v.TileItemLabelText,{key:"label",label:p});if(e!==p){var T=e.length<=u.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?e:l.default.createElement("div",{className:"tile-label-tooltip"},e);h=l.default.createElement(I.TitleBubble,{content:T,position:w.StickyPosition.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},h)}var S=l.default.createElement(g.StarContainer,{item:s,user:n,className:"tile-star",key:"tileStar",tabIndex:-1});return l.default.createElement("span",null,[h,m&&!i&&S])},t})(l.default.PureComponent);t.TileLabel=D;var N=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileGridRef=l.default.createRef(),t.state={inSelectMode:!1,selectedIds:n.Set(),menuOpenId:void 0},t.createRenameCancelHandler=function(e){return function(){t.props.onRenameCancel(e)}},t.createRenameSubmitHandler=function(e){return function(i){t.props.onRenameSubmit(e,i)}},t.logOverflowMenuOpen=function(){var e=t.props,i=e.selectedFiles,o=e.user,n=e.viewType,l=i?i.count((function(e){return e.is_dir})):0,r=i?i.count()-l:0;d.logContextMenuClick({uid:o.id,viewType:n,action_surface:L.ActionSurfaceLogValue.CENTER_PANE,numFilesSelected:r,numFoldersSelected:l})},t.hrefForItem=function(e,i){return i instanceof c.File?t.props.hrefForFile(e,i):i instanceof c.FileSharedWithMe?i.href:i.url},t.getTileItem=function(e,i){var o=t.props,n=o.activeDropTarget,l=o.isCreateFolderUIActive,r=o.isPhotosPage,a=o.items,s=o.selection,d=o.user,f=o.viewType,p=o.focusedFileIndex,m=o.disabledMultiselect,h=o.cutItems,g=t.state.menuOpenId,_=t.state.inSelectMode;if(l){if(0===e)return t.getCreateFolderTile();e-=1}var v=a.get(e);if(!v){var b="Placeholder "+e;return{altText:b,id:b,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var w=T.isFile(v)||T.isFswm(v),I=v,L=_&&w,y=p===e,C=L&&s.selected.some((function(e){return I instanceof c.FileSharedWithMe?I.file_id===e:I.fq_path===e})),D=t.createToggleSelectHandler(I,C),N=t.createClickHandler({item:v,inSelectModeAndIsFile:L,toggleSelectHandler:D}),O=t.createViewFileHandler(v,E.FilesViewActionSource.ROW_DOUBLE_CLICK),R=t.createViewFileHandler(v,E.FilesViewActionSource.ROW_TITLE),P=T.isFile(v)||T.isFswm(v)?t.renderTileOverflowMenu(v,i,r):void 0,A=t.renderLabelElement(e),x=F(v),H=v===n,k=t.hrefForItem(d,v),V=v instanceof c.File||v instanceof c.FileSharedWithMe?S.getThumbnailUrlForItem(v.thumbnail_url_tmpl,u.ViewTypeThumbnailSizes[f]):void 0;return{file:I,paper:v instanceof c.Paper?v:void 0,fileSharedWithMe:v instanceof c.FileSharedWithMe?v:void 0,id:c.itemId(v),labelNode:A,altText:x,thumbnailUrl:V,actionNode:P,onClick:N,onDoubleClick:O,onLabelClick:R,isDraggable:!r&&(C||!L),isViewOnly:m,isFocused:y,isSelectable:w,handleToggleSelect:D,checkboxAriaText:M.intl.formatMessage({id:"o3Djy2",defaultMessage:"Select tile"}),href:k,onDragEnter:r?void 0:t.createDragEnterHandler(I,C,H),onDragStart:r?void 0:t.createDragStartHandler(I,C,D),isCheckboxFocusable:r,isCutToClipboard:h&&T.isCutToClipboard(v,h),className:g===c.itemId(v)?"tile--hover-forced":void 0}},t.shouldFileBeHighlightedDropTarget=function(e,i){var o=t.props.dropTargetHighlightMode;return p.shouldFileBeHighlightedDropTarget({file:e,isSelected:i,dropTargetHighlightMode:o})},t.scrollIntoView=function(e,i){var o=e.top,n=e.bottom,l=t.props.viewportTopOffset,r=void 0===l?0:l,a=t.getScrollPane(),s=a.height,d=a.scrollTop,c=a.scrollTo,u=s-r,f=d+u;o<d?c(0,o):n>f&&c(0,i&&n-o<u/2?n-u/2:n-u)},t}return i.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setSelectedTiles(this.props)},t.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.props.isPhotosPage||m.resetFileJumpKeyboardShortcuts(b.SELECTABLE_TILE_GRID_KEY_SCOPE),m.resetFilesViewKeyboardShortcuts(b.SELECTABLE_TILE_GRID_KEY_SCOPE),f.cleanupExternalDragHandler(b.SELECTABLE_TILE_GRID_KEY_SCOPE)},t.prototype.componentWillReceiveProps=function(e){e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0}))},t.prototype.componentDidUpdate=function(e){(e.createNewFolderState===E.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===E.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGridRef.current&&this.tileGridRef.current.forceUpdate(),e.isActive!==this.props.isActive&&(this.props.isActive?this.setupKeyboardShortcuts():m.resetFilesViewKeyboardShortcuts(b.SELECTABLE_TILE_GRID_KEY_SCOPE))},t.prototype.getTotalNumItems=function(){var e=this.props,t=e.items,i=e.totalNumItems,o=e.isCreateFolderUIActive,n=Math.max(t.size,i);return o&&(n+=1),n},t.prototype.createToggleSelectHandler=function(e,t){var i=this,o=e instanceof c.FileSharedWithMe?e.file_id:e.fq_path;return function(e){var n=i.props,l=n.onDeselectFile,r=n.onSelectFile,a=Boolean(!("keyCode"in e)&&e.shiftKey);t?l(o,a):r(o,a?b.SelectOptions.EXTEND:b.SelectOptions.DEFAULT)}},t.prototype.renderTileOverflowMenu=function(e,t,i){var o=this,n=this.props,r=n.getOverflowMenuActions,a=n.arePostTTIModulesLoaded,s=n.inlineActions;return s&&e instanceof c.File?l.default.createElement("div",{onClick:C},l.default.createElement(s,{file:e,className:"tile__action-button--overflow-menu",onHoverLocked:function(t){var i=t.isOpen;o.setState({menuOpenId:i?c.itemId(e):void 0})}})):a&&l.default.createElement(h.FilesViewOverflowMenu,{file:e,getOverflowMenuActions:r,size:h.OverflowMenuSize.Small,showBorders:!0,ariaHidden:!i,onMenuOpen:this.logOverflowMenuOpen})},t.prototype.renderLabelElement=function(e){var t=this.props,i=t.items,o=t.focusedFileIndex,n=t.user,r=t.fileRename,a=t.arePostTTIModulesLoaded;if(!t.isPhotosPage){var s=i.get(e);if(s){var d=this.state.inSelectMode,c=o===e;return l.default.createElement(D,{item:s,user:n,fileRename:r,arePostTTIModulesLoaded:a,inSelectMode:d,isTileFocused:c,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler})}}},t.prototype.createViewFileHandler=function(e,t){var i=this;return function(o){if(o.preventDefault(),o.stopPropagation(),"click"===o.type){var n=o;if(0===n.button){var l=i.hrefForItem(i.props.user,e);if(T.hasModifierKey(n))return void y.open_tab(l)}}e instanceof c.File?i.props.onNavigateToFileOrFolder(e,{actionSource:t}):e instanceof c.FileSharedWithMe?i.props.onOpenFileSharedWithMe(e):e instanceof c.Paper&&i.props.onOpenPaper(e)}},t.prototype.createClickHandler=function(e){var t=this,i=e.item,o=(e.inSelectModeAndIsFile,e.toggleSelectHandler),n=i instanceof c.File||i instanceof c.FileSharedWithMe;return function(e){if(n){var l="keyCode"in e;if(e.preventDefault(),l)o(e);else{var r=i instanceof c.FileSharedWithMe?i.file_id:i.fq_path;t.props.onSelectFile&&(e.shiftKey?t.props.onSelectFile(r,b.SelectOptions.EXTEND):e.ctrlKey||e.metaKey?o(e):t.props.onSelectFile(r,b.SelectOptions.ONLY))}}}},t.prototype.setSelectedTiles=function(e){var t=n.Set().withMutations((function(t){e.selectedFiles.forEach((function(e){var i;t.add((i=e)instanceof c.FileSharedWithMe?i.file_id:i.fq_path)}))}));this.setState({selectedIds:t})},t.prototype.setupExternalDragHandler=function(){var e=this;f.setupExternalDragHandler(b.SELECTABLE_TILE_GRID_KEY_SCOPE,(function(){return!!e.props.isDraggingInternalFiles}),(function(){return!!e.props.isDraggingExternalFiles}),this.props.onSetFileUploaderPath,".tile",(function(){return e.props.activeDropTarget}),this.props.onSetDropTarget)},t.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,i=t.user,o=t.viewType,n=t.onDelete,l=t.onShowRename,r=t.deselectAll,a=t.getIsCurrentPathWriteable,s=t.getIsFileJumping,d=t.onAddFileJumpKeyCode,c=t.onResetFileJump,u=t.onCopyToClipboard,f=t.onCutToClipboard,p=t.onFocusSearchBar,h=t.onPasteFromClipboard,g=t.selectAll,_=m.generateGetIsGlobalEvent(this),E=_;this.props.isPhotosPage||m.setupFileJumpKeyboardShortcuts({scope:b.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:s,onAddFileJumpKeyCode:d,onResetFileJump:c}),m.setupFilesViewKeyboardShortcuts({user:i,viewType:o,getIsGlobalEvent:_,getIsItemEvent:E,getSelectedFiles:function(){return e.props.selectedFiles},isCurrentPathWriteable:a,selectAllAction:g,deselectAllAction:r,onCopyToClipboard:u,onCutToClipboard:f,onDelete:n,onFocusSearchBar:p,onPasteFromClipboard:h,onShowRename:l,onNavigateToFileOrFolder:function(){},onNavigateToParentFolder:function(){},scope:b.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:this.props.onOpenKeyboardShortcutModal})},t.prototype.createDragEnterHandler=function(e,t,i){var o=this;return function(n){o.props.onDragEnter(n,e,t,i)}},t.prototype.createDragStartHandler=function(e,t,i){var o=this;return function(n){t?o.props.onDragStart(n):(i(n),o.props.onDragStart(n,[e]))}},t.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,i=e.onNewFolderCancel,o=e.onNewFolderSubmit,n=M.intl.formatMessage({id:"pxGZm3",defaultMessage:"New folder"}),r=l.default.createElement("div",null);return t===E.NewFolderCreationState.PENDING_INPUT?(n=M.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),r=l.default.createElement(_.TileLabelInput,{label:n,onCancel:i,onSubmit:o})):t===E.NewFolderCreationState.SAVING_INPUT&&(n=M.intl.formatMessage({id:"p58M12",defaultMessage:"Creating new folder…"}),r=l.default.createElement(v.TileItemLabelText,{className:"tile-label__text--saving",label:n})),{altText:n,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:r}},t.prototype.getScrollPane=function(){var e=this.props.scrollContainer;if(e&&e.current){var t=e.current,i=t.clientHeight,o=t.scrollTop,n=t.scrollTo;return{height:i,scrollTop:o,scrollTo:n?n.bind(e.current):function(){}}}return{height:window.innerHeight,scrollTop:"scrollingElement"in window.document&&window.document.scrollingElement?window.document.scrollingElement.scrollTop:window.document.documentElement.scrollTop,scrollTo:window.scrollTo?window.scrollTo.bind(window):function(){}}},t.prototype.getWindow=function(){var e=this.props.scrollContainer;return e&&e.current?T.createFakeWindow(e.current):window},t.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,i=e.sections,n=e.viewType,r=e.viewportTopOffset,a=e.scrollContainer,s=e.scrollPositionOffset,d=e.registerSelectableTile,c=o.default({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode,"file-tile-grid-container--click-to-select":!0}),f=new Set;return this.state.selectedIds.forEach((function(e){return f.add(e)})),a&&!a.current?null:l.default.createElement("div",{role:"grid","aria-multiselectable":"true"},l.default.createElement(v.InfiniteTileGrid,{key:"tileGrid",ref:this.tileGridRef,totalNumItems:this.getTotalNumItems(),containerClass:c,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:u.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:u.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:i.sectionStartIndices,sectionLabels:i.sectionLabels,showLabels:!this.props.isPhotosPage,contentOffset:r,getTileItem:this.getTileItem,selectedIds:f,handleTTI:this.props.onTTI,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:u.ViewTypeGridSizes[n],tileHeight:u.ViewTypeGridSizes[n],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget,scrollToIndex:this.props.focusedFileIndex,scrollIntoView:this.scrollIntoView,scrollPositionOffset:s||0,window:this.getWindow(),registerSelectableTile:d}))},t.defaultProps={enableMaxHeightGrouping:!1},t})(l.default.PureComponent);t.FilesViewTileGrid=N})),define("modules/clean/react/files_view/tile_label_input",["require","exports","tslib","classnames","react","modules/clean/react/files_view/name_input"],(function(e,t,i,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileLabelInput=void 0,o=i.__importDefault(o),n=i.__importDefault(n),t.TileLabelInput=function(e){var t=o.default("tile-label-input",e.className),i=e.defaultValue||"";return n.default.createElement(l.NameInput,{className:t,defaultValue:i,label:e.label,onCancel:e.onCancel,onClick:function(e){e&&(e.stopPropagation(),e.preventDefault())},onSubmit:e.onSubmit})}})),define("modules/clean/react/files_view/util",["require","exports","tslib","retrieval-components/view-mode-toggle/index","modules/clean/filepath","modules/clean/pnm/utils","modules/clean/react/browse/models","modules/clean/react/files_view/types"],(function(e,t,i,o,n,l,r,a){"use strict";function s(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileMode=t.ScopedEventHandlers=t.isCutToClipboard=t.viewModeFromViewType=t.viewTypeFromViewMode=t.shouldClickDeselect=t.createFakeWindow=t.getFilename=t.isFswm=t.isFile=t.hasModifierKey=t.shouldHandleClick=void 0,n=i.__importStar(n),t.shouldHandleClick=function(e){return 0===e.button&&!s(e)},t.hasModifierKey=s,t.isFile=function(e){return e instanceof r.File},t.isFswm=function(e){return e instanceof r.FileSharedWithMe},t.getFilename=function(e){return t.isFile(e)?l.hasValidLinkNode(e.per_node_metadata)?n.filename_without_extension(n.filename(e.fq_path)):n.filename(e.fq_path):e.filename},t.createFakeWindow=function(e){var t=new Proxy(window.document,{get:function(t,i){switch(i){case"body":case"documentElement":case"scrollingElement":return e}return t[i]}});return new Proxy(window,{get:function(i,o){switch(o){case"document":return t;case"innerHeight":return e.clientHeight;case"pageYOffset":return e.scrollTop;case"addEventListener":case"removeEventListener":case"scrollTo":var n=e[o];return n?n.bind(e):function(){}}var l=i[o];return"function"==typeof l?l.bind(i):l}})},t.shouldClickDeselect=function(e,t){if(e.defaultPrevented)return!1;for(var i=e.target;i instanceof Node&&i!==e.currentTarget;){if(0===i.tabIndex&&!t||i instanceof HTMLAnchorElement||i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLLabelElement||"button"===i.getAttribute("role")||i.classList.contains("mc-popover"))return!1;i=i.parentElement}return!0},t.viewTypeFromViewMode=function(e){switch(e){case o.ViewMode.GRID:return a.ViewType.Grid;case o.ViewMode.TILE:return a.ViewType.LargeGrid;case o.ViewMode.CONDENSED_LIST:return a.ViewType.CondensedList;case o.ViewMode.LIST:return a.ViewType.List}},t.viewModeFromViewType=function(e){switch(e){case a.ViewType.Grid:return o.ViewMode.GRID;case a.ViewType.LargeGrid:return o.ViewMode.TILE;case a.ViewType.List:return o.ViewMode.LIST;case a.ViewType.CondensedList:return o.ViewMode.CONDENSED_LIST}},t.isCutToClipboard=function(e,t){if(!(e instanceof r.File))return!1;var i=t.get(e.fq_path);return Boolean(i&&i.file_id===e.file_id)};var d=(function(){function e(e){this.handlers={},this.element=e}return e.prototype.add=function(e,t,i){this.handlers[e]=this.handlers[e]||{},this.handlers[e][t]=i,this.element.addEventListener(t,i)},e.prototype.remove=function(e,t,i){this.handlers[e]&&this.handlers[e][t]&&(this.element.removeEventListener(t,i||this.handlers[e][t]),this.handlers[e][t]===i&&delete this.handlers[e][t])},e.prototype.removeAll=function(e){if(this.handlers[e])for(var t in this.handlers[e])this.handlers[e].hasOwnProperty(t)&&(this.element.removeEventListener(t,this.handlers[e][t]),delete this.handlers[e][t])},e})();t.ScopedEventHandlers=d,t.isMobileMode=function(e){return!e.isMatchedLarge&&!e.isMatchedMedium}}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("modules/clean/react/file_viewer/async_controller",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncOpenPreview=t.showElementsBehindFileViewer=t.hideElementsBehindFileViewer=void 0;var i=[".maestro-chrome","#maestro-nav","#page-footer","#page-content","#page-header","#page-sidebar","#flash-upload-container","#maestro-header","#maestro-header-portal","#maestro-prompt",".snackbar-container","#onboarding-sidebar-pagelet",".maestro-portal"].join();t.hideElementsBehindFileViewer=function(){Array.from(document.querySelectorAll(i)).forEach((function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"}))},t.showElementsBehindFileViewer=function(){Array.from(document.querySelectorAll(i)).forEach((function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""}))},t.asyncOpenPreview=function(t){var i=t.containerId,o=t.files,n=t.fileViewAction,l=t.fileViewOrigin,r=t.fileViewTarget,a=t.indexOfPreviewFile,s=t.onFileViewerDidMount,d=t.onFileViewerUnmount,c=(t.shouldFocusComment,t.shouldPresentInZoom),u=void 0!==c&&c,f=t.updateBrowserLocation,p=void 0===f||f,m=t.user,h=t.expGrowthActSmbWorkflowsBaton,g=t.hidePageChrome,_=void 0!==g&&g,E=t.headerHeight,T=void 0===E?"0":E,S=t.forceDisplayToolbar,v=void 0!==S&&S,b=t.doNotUpdateDocumentTitle,w=void 0!==b&&b,I=t.onFullscreenChange,L=void 0===I?function(){}:I,y=t.onFlipNext,M=void 0===y?function(){}:y,F=t.onFlipPrevious,C=void 0===F?function(){}:F,D=t.onPreviewSessionInitialized,N=void 0===D?function(){}:D;return new Promise((function(t,i){e(["modules/clean/react/file_viewer/controller"],t,i)})).then(__importStar).then((function(e){return e.open(o,a,m,i,{fileViewTarget:r,fileViewOrigin:l,fileViewAction:n,disableRouting:!p,onComponentDidMount:s,onComponentWillUnmount:d,shouldPresentInZoom:u,expGrowthActSmbWorkflowsBaton:h,hidePageChrome:_,headerHeight:T,forceDisplayToolbar:v,doNotUpdateDocumentTitle:w,onFullscreenChange:L,onFlipNext:M,onFlipPrevious:C,onPreviewSessionInitialized:N}),e}))}})),define("modules/clean/react/maestro/components/tile_grid",["require","exports","tslib","classnames","react","resize-observer-polyfill","react-dom","spectrum/culled_list","modules/clean/filepath","modules/clean/js_client_stopwatch","modules/clean/react/maestro/components/tile_element","modules/clean/react/maestro/components/tile_grid_logger"],(function(e,t,i,o,n,l,r,a,s,d,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteTileGrid=t.TileItemLabelText=t.memoizeCallback=void 0,o=i.__importDefault(o),n=i.__importDefault(n),l=i.__importDefault(l),r=i.__importStar(r),s=i.__importStar(s);function f(e){var t=null;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!t||t.length!==i.length||!t.every((function(e,t){return e===i[t]})))return t=i,e.apply(void 0,i)}}t.memoizeCallback=f,t.TileItemLabelText=function(e){var t=e.className,i=e.label;return t=o.default("tile-label__text",t),n.default.createElement("div",{className:t},i)};var p=(function(e){function t(t){var i=e.call(this,t)||this;if(i.tileIndexToRowIndex=[],i.rowHeights=[],i.ttiReported=!1,i.itemRangeByRow=[],i.tileLoadLogger=null,i.updateLayout=function(){i.animationFrameRequestId=window.requestAnimationFrame((function(){var e=i.getAndUpdateTileLayout();i.props.logTileLoading&&!i.tileLoadLogger&&i.setupTileLogging(i.getRowHeight(),e.tilesPerRow)}))},i.updateScroll=function(e){var t=i.props,o=t.scrollToIndex,n=t.scrollIntoView,l=t.scrollPositionOffset;if(void 0!==o&&n){var r=i.tileIndexToRowIndex[o],a=i.rowHeights.slice(0,r).reduce((function(e,t){return e+t}),l);n({top:a,bottom:a+i.rowHeights[r]},e)}},i.getAndUpdateTileLayout=function(){var e=i.props.maxTileWidth+i.props.tilePadding,t=r.findDOMNode(i);if(!t||0===t.clientWidth)return{tileWidth:i.state.tileWidth,tilesPerRow:i.props.tilesPerRow};var o=t.clientWidth,n=Math.max(1,Math.floor(o/e)),l=i.props.maxTileWidth;return o%e>1&&(l=o/++n-i.props.tilePadding),i.state.tileWidth!==l&&i.setState({tileWidth:l}),i.props.tilesPerRow!==n&&i.props.onTilesPerRowChange(n),{tileWidth:l,tilesPerRow:n}},i.handleTTI=function(){i.ttiReported=!0;var e=i.props.handleTTI;e&&e()},i.setLastViewedPage=function(e){if(i.tileLoadLogger){var t=document.documentElement.scrollTop||document.body.scrollTop,o=Math.round(t/e);if(i.tileLoadLogger.pruneTrackedPages(),i.tileLoadLogger.logCompletedPages(),!i.tileLoadLogger.pagesCompletedLogging.has(o)&&!i.tileLoadLogger.pagesToLog.has(o))if(o!==i.tileLoadLogger.lastViewedPage){if(i.tileLoadLogger.lastViewedPage=o,i.tileLoadLogger.pageChangeTime=i.tileLoadLogger.getTimeNow(),!i.tileLoadLogger.startTimeByPage.get(o)){var n=i.tileLoadLogger.getTimeNow();i.tileLoadLogger.startTimeByPage.set(o,n)}}else(n=i.tileLoadLogger.getTimeNow())-i.tileLoadLogger.pageChangeTime>1e3&&i.tileLoadLogger.pagesToLog.add(o)}},i.logTileError=function(e){i.tileLoadLogger&&i.tileLoadLogger.recordTileError(e),i.props.logTileLoading&&u.InfiniteTileGridLogger.logThumbLoadError()},i.logTileLoaded=function(e,t,o){i.tileLoadLogger&&i.tileLoadLogger.recordTileLoaded(e,t,o)},i.renderTileElement=function(e,t,o,l){var r,a;if(e<0||e>i.props.totalNumItems)return null;var d=i.props.getTileItem(e,o);if(!d)return n.default.createElement(c.TilePlaceholder,{leftOffset:t,tileHeight:i.state.tileWidth,tileWidth:i.state.tileWidth});var u,f=i.ttiReported&&i.props.delayRenderFullTile,p=d.isSelectable&&!!i.props.selectedIds&&i.props.selectedIds.has(d.id),m=d.file&&i.props.shouldFileBeHighlightedDropTarget(d.file,p),h=m&&d.file===i.props.activeDropTarget,g="";d.fileSharedWithMe?(g=d.fileSharedWithMe.file_id,u={type:d.fileSharedWithMe.type,icon:d.fileSharedWithMe.icon,fq_path:"/"+d.fileSharedWithMe.filename,thumbnail_url_tmpl:d.fileSharedWithMe.thumbnail_url_tmpl,name:d.fileSharedWithMe.filename}):d.file&&(g=d.file.fq_path,u={type:d.file.type,icon:d.file.icon,fq_path:d.file.fq_path,thumbnail_url_tmpl:d.file.thumbnail_url_tmpl,name:s.filename(d.file.fq_path),isDeleted:d.file.isDeleted,is_locked:d.file.is_locked,is_lockholder:d.file.is_lockholder,lockholder_name:d.file.lockholder_name,lock_info:d.file.lock_info});var _=d.labelNode?i.props.labelHeight:0;null===(a=(r=i.props).registerSelectableTile)||void 0===a||a.call(r,g,{top:l,left:t,width:i.state.tileWidth,height:_+i.state.tileWidth});var E=0===e&&i.props.selectedIds&&0===i.props.selectedIds.size;return n.default.createElement(c.TileElement,{file:u,paper:d.paper,key:d.id,onClick:d.onClick,onDoubleClick:d.onDoubleClick,onLabelClick:d.onLabelClick,width:i.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:_,delayRenderFullTile:f,actionNode:d.actionNode,thumbnailUrl:d.thumbnailUrl,labelNode:d.labelNode,altText:d.altText,onThumbnailError:i.props.logTileLoading?i.logTileError:void 0,onThumbnailLoad:i.props.logTileLoading?i.logTileLoaded:void 0,isDraggable:d.isDraggable,onDragEnter:d.onDragEnter,onDragStart:d.onDragStart,isFocused:d.isFocused,isSelectable:d.isSelectable,isSelected:p,isViewOnly:d.isViewOnly,isActiveDropTarget:h,isAvailableDropTarget:m,handleToggleSelect:d.handleToggleSelect,checkboxAriaText:d.checkboxAriaText,checkboxTabIndex:d.isCheckboxFocusable?0:-1,href:d.href,overrideTabIndex:E,isCutToClipboard:d.isCutToClipboard,className:d.className})},i.renderRow=function(e,t,o){var l=i.getRowHeight(t);if(!e)return n.default.createElement(a.CulledItem,{className:i.props.rowClass,height:l,key:t,tagName:"div",topOffset:o});if(!Array.isArray(e))return n.default.createElement(a.CulledItem,{className:i.props.rowClass,height:l,key:t,tagName:"div",topOffset:o},e);for(var r=e,s=r[0],d=r[1],c=i.state.tileWidth+i.props.tilePadding,u=[],f=4,p=s;p<d;p++)u.push(i.renderTileElement(p,f,u.length,o)),f+=c;return n.default.createElement(a.CulledItem,{className:i.props.rowClass,height:l,key:t,tagName:"div",topOffset:o},u)},i.handleRangeInView=f((function(e,t){var o=i.props.onRangeInView;if(o&&0!==i.props.totalNumItems){var n=i.translateRowRangeToItemRange(e,t),l=n[0],r=n[1];isNaN(l)||isNaN(r)||o(l,r)}})),i.props.sectionLabels||i.props.sectionStartIndices){if(!i.props.sectionLabels||!i.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(i.props.sectionLabels.length!==i.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return i.state={tileWidth:i.props.maxTileWidth},d.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),i.resizeObserver=new l.default(i.updateLayout),i}return i.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateLayout),this.updateLayout(),this.updateScroll(!0);var e=document.querySelector(".maestro-secondary-sidebar-v2");e&&this.resizeObserver.observe(e)},t.prototype.componentDidUpdate=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(this.props.totalNumItems),e.scrollToIndex!==this.props.scrollToIndex&&this.updateScroll(void 0===e.scrollToIndex||e.scrollToIndex<0),e.maxTileWidth!==this.props.maxTileWidth&&this.updateLayout()},t.prototype.componentWillUnmount=function(){this.resizeObserver.disconnect(),window.removeEventListener("resize",this.updateLayout),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),this.tileLoadLogger=null)},t.prototype.getRowHeight=function(e){if(void 0!==e&&this.rowHeights)return this.rowHeights[e];var t=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(t+=this.props.labelHeight+4),t},t.prototype.getPageHeight=function(){var e=(document.documentElement.clientHeight||window.outerHeight)-(this.props.contentOffset||0),t=this.getRowHeight(),i=t*Math.ceil(e/t);return Math.max(i,t)},t.prototype.setupTileLogging=function(e,t){var i=this.getPageHeight(),o=t*Math.ceil(i/e);this.tileLoadLogger=new u.InfiniteTileGridLogger(this.props.totalNumItems,o,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);var n=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,n),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,i)},t.prototype.translateRowRangeToItemRange=function(e,t){var i=this.itemRangeByRow;return[i[e][0],i[t][1]]},t.prototype.render=function(){var e=this;this.itemRangeByRow=[],this.rowHeights=[],this.tileIndexToRowIndex=[];var t=[],i=this.getRowHeight(),o=this.props,l=o.containerClass,r=o.enableMaxHeightGrouping,s=o.numThresholdRows,d=o.scrollDeltaThreshold,c=o.sectionStartIndices,u=o.sectionLabels,f=o.totalNumItems,p=o.window;if(c&&c.length>0)c.forEach((function(o,l){var r=f;l!==c.length-1&&(r=c[l+1]),e.rowHeights.push(32);var a=r-o,s=Math.ceil(a/e.props.tilesPerRow),d=u[l],p=n.default.createElement("div",{className:"tile-section-header",role:"heading","aria-level":2},d);t.push(p),e.itemRangeByRow.push([o,o]);for(var m=0;m<s;m++){var h=o+m*e.props.tilesPerRow,g=Math.min(h+e.props.tilesPerRow,r),_=[h,g];t.push(_),e.itemRangeByRow.push(_);for(var E=h;E<g;E++)e.tileIndexToRowIndex.push(e.rowHeights.length);e.rowHeights.push(i)}}));else for(var m=Math.ceil(f/this.props.tilesPerRow),h=0;h<m;h++){var g=h*this.props.tilesPerRow,_=Math.min(g+this.props.tilesPerRow,f),E=[g,_];t.push(E),this.itemRangeByRow.push(E);for(var T=g;T<_;T++)this.tileIndexToRowIndex.push(this.rowHeights.length);this.rowHeights.push(i)}return n.default.createElement(a.CulledList,{enableMaxHeightGrouping:r,items:t,listItemHeight:this.rowHeights,itemBuffer:s,className:l,renderRow:this.renderRow,scrollThreshold:d,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView,tagName:"div",window:p})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(){return null},handleTTI:function(){}},t})(n.default.PureComponent);t.InfiniteTileGrid=p})),define("modules/clean/react/maestro/components/tile_element",["require","exports","tslib","classnames","react","dig-components/controls","ts-keycode-enum","modules/clean/paper_formatting_utils","modules/clean/react/files_view/double_click","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/react/maestro/components/tile_grid_logger","modules/clean/user_education/react/user_education_effect","modules/clean/react/files_view/contexts/file_thumb_store"],(function(e,t,i,o,n,l,r,a,s,d,c,u,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileElement=t.TileElementComponentForTests=t.TilePlaceholder=t.TileLabel=void 0,o=i.__importDefault(o),n=i.__importDefault(n),a=i.__importStar(a);var m=function(){return null};t.TileLabel=function(e){var t=e.ariaLabel,i=e.children,o=e.onClick;if(!i)return null;var l=n.default.createElement("div",{className:"tile-label","aria-hidden":"true"},i);return o?n.default.createElement("a",{onClick:o,tabIndex:-1,"aria-label":t},l):l},t.TilePlaceholder=function(e){var i=e.leftOffset,o=e.tileHeight,l=e.tileWidth,r=e.thumbNode,a=e.labelNode;return n.default.createElement("div",{className:"tile",style:{left:i,height:o,width:l,pointerEvents:"none"}},n.default.createElement("div",{className:"tile__thumb-container",style:{height:l,width:l}},r||n.default.createElement("div",{className:"tile__preview--placeholder"})),n.default.createElement(t.TileLabel,null,a))};var h=(function(e){function p(t){var o=e.call(this,t)||this;return o.thumbRequestId=null,o.animationRequestIds=[],o.handleThumbnailError=function(){var e=o.props,t=e.onThumbnailError,i=e.tileIndex;o.setState({thumbLoaded:!1}),t&&t(i)},o.logTileInteractive=function(){var e=!!o.props.thumbnailUrl,t=o.state.thumbLoaded;if(o.props.onThumbnailLoad){var i=window.requestAnimationFrame((function(){var i=window.requestAnimationFrame((function(){o.props.onThumbnailLoad(o.props.tileIndex,e,t)}));o.animationRequestIds.push(i)}));o.animationRequestIds.push(i)}},o.toggleSelect=function(e){e.stopPropagation(),o.props.handleToggleSelect(e)},o.handleKeyDown=function(e){var t=e.keyCode;e.currentTarget!==e.target||t!==r.Key.Space&&t!==r.Key.Enter||(e.preventDefault(),o.props.onClick(e))},o.handleCheckboxChange=function(){},o.state=i.__assign({thumbLoaded:p.isThumbLoaded(t)},o.calcPaperTitleState(t)),o}return i.__extends(p,e),p.prototype.componentDidMount=function(){var e=this;this.props.delayRenderFullTile?this.renderCompleteTileTimeout=setTimeout((function(){e.renderCompleteTileTimeout=0,e.fetchThumbnail(e.props)}),100):this.fetchThumbnail(this.props),this.logTileInteractive()},p.prototype.componentDidUpdate=function(e,t){if(!e.isFocused&&this.props.isFocused){var i=this.refs.tileContainer;i&&i.focus()}},p.prototype.componentWillReceiveProps=function(e){if(e.thumbnailUrl!==this.props.thumbnailUrl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e)),p.getPaperTitle(this.props)!==p.getPaperTitle(e)){var t=this.calcPaperTitleState(e);this.setState(t)}},p.getPaperTitle=function(e){return e.paper?e.paper.title:null},p.prototype.calcPaperTitleState=function(e){return e.paper?{paperTitleParts:a.getPaperDocTitleParts(e.paper,"brws-file-name-grid-icon","brws-file-name-grid-icon-emoji",!0)}:{}},p.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded(),this.renderCompleteTileTimeout&&clearTimeout(this.renderCompleteTileTimeout),this.animationRequestIds.forEach((function(e){window.cancelAnimationFrame(e)})),this.animationRequestIds=[]},p.prototype.fetchThumbnail=function(e){var t=this,i=e.thumbnailUrl,o=e.thumbStore;if(i){var n=Date.now();this.thumbRequestId=o.bind_url(i,{onSuccess:function(){t.setState({thumbLoaded:!0}),u.InfiniteTileGridLogger.logThumbRTT(Date.now()-n)},onError:function(){t.handleThumbnailError()}})}},p.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this.thumbRequestId&&(e.unbind_url(this.thumbRequestId),this.thumbRequestId=null),this.setState({thumbLoaded:!1})},p.isThumbLoaded=function(e){var t=e.thumbStore,i=e.thumbnailUrl;return!(!i||!t.get_thumb(i))},p.prototype.renderCheckbox=function(){var e=n.default.createElement(l.Checkbox,{className:"tile-checkbox","aria-label":this.props.checkboxAriaText,onClick:this.toggleSelect,onChange:this.handleCheckboxChange,tabIndex:this.props.checkboxTabIndex,checked:this.props.isSelected});return 0===this.props.tileIndex&&(e=n.default.createElement(f.UserEducationEffect,{containerName:"FileItemRow",name:"FirstFileSelectCheckbox"},e)),n.default.createElement("div",{key:"tile-select-checkbox",className:"tile-select-checkbox"},e)},p.prototype.renderActionNode=function(){return n.default.createElement("div",{key:"tile-action-node",className:"tile__action-button"},this.props.actionNode)},p.prototype.renderThumbnail=function(){var e=this.props,t=e.thumbnailUrl,i=e.thumbStore,o=e.height,l=e.width,r=e.isSelected;if(this.state.thumbLoaded){var a=i.get_thumb(t);if(a){var s=r?l-24:l,d=o||s;return n.default.createElement(c.LockBadge,{file:this.props.file,variant:"preview-large"},n.default.createElement("img",{className:"tile__preview tile__preview--thumb",draggable:!1,src:a,style:{maxHeight:d,maxWidth:s},onError:this.handleThumbnailError,alt:""}))}}return this.renderFileIcon()},p.prototype.renderFileIcon=function(){var e=this.props,t=e.file;return e.paper?this.state.paperTitleParts.icon:t?n.default.createElement(d.FileOrFolderIcon,i.__assign({className:"tile__preview tile__preview--icon brws-file-name-grid-icon",file:t,variant:"large",showPreview:!1},{"aria-hidden":!0})):n.default.createElement("div",{className:"tile__preview--placeholder"})},p.prototype.render=function(){var e=this,l=this.props,r=l.altText,a=l.file,d=l.height,c=l.href,u=l.isActiveDropTarget,f=l.isAvailableDropTarget,p=l.isCutToClipboard,m=l.isDraggable,h=l.isFocused,g=l.isSelectable,_=l.isSelected,E=l.isViewOnly,T=l.labelHeight,S=l.labelNode,v=l.leftOffset,b=l.onClick,w=l.onDoubleClick,I=l.onLabelClick,L=l.onDragEnter,y=l.onDragStart,M=l.overrideTabIndex,F=l.width,C=l.className,D=d||F,N=D+T;if(E)return n.default.createElement(t.TilePlaceholder,{leftOffset:v,tileHeight:N,tileWidth:F,thumbNode:this.renderThumbnail(),labelNode:S});var O={left:v,height:N,width:F},R={height:D,width:F},P={className:o.default("tile",C,{"tile--is-selected":_,"tile--is-dragover":u,"tile--is-droppable":f&&!u,"tile--is-cut":p}),"data-filename":a&&a.name,style:O,draggable:m,href:c,onDragEnter:L,onDragStart:y,"aria-label":a&&a.name,role:"gridcell"},A=n.default.createElement("div",{className:"tile__thumb-container",style:R},this.renderThumbnail());return n.default.createElement("div",{role:"row",ref:"tileContainer",className:"tile__container",onKeyDown:this.handleKeyDown,tabIndex:M||h?0:-1,"aria-label":r,"aria-selected":_},n.default.createElement(s.WithDoubleClick,{onClick:b,onDoubleClick:w},(function(o){return n.default.createElement("div",i.__assign({},P,{onClick:o.onClick}),A,g&&e.renderCheckbox(),e.renderActionNode(),n.default.createElement(t.TileLabel,{onClick:I,ariaLabel:a&&a.name},S))})))},p.defaultProps={checkboxAriaText:"",checkboxTabIndex:-1,delayRenderFullTile:!0,handleToggleSelect:m,isFocused:!1,isSelected:!1,isViewOnly:!1,onDragEnter:m,onDragStart:m,onClick:m},p})(n.default.PureComponent);t.TileElementComponentForTests=h,t.TileElement=p.withThumbStore(h)})),define("modules/clean/react/maestro/components/tile_grid_logger",["require","exports","modules/clean/js_client_stopwatch","modules/core/browser"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteTileGridLogger=void 0;var n=(function(){function e(e,t,i,o){var n=this;this.recordTileError=function(e){var t=Math.floor(e/n.numTilesPerPage);n.pagesWithThumbErrors.has(t)||n.pagesWithThumbErrors.add(t)},this.recordTileLoaded=function(e,t,i){if(i){if(n.thumbsLoaded.has(e))return;n.thumbsLoaded.add(e)}else{if(n.iconsLoaded.has(e))return;n.iconsLoaded.add(e)}var o=!1;o=n.numTiles%n.numTilesPerPage==0?e>=n.numTiles-n.numTilesPerPage:e>=n.numTiles-n.numTiles%n.numTilesPerPage;var l=n.numTilesPerPage;if(o){var r=n.numTiles%n.numTilesPerPage;0!==r&&(l=r)}var a=Math.floor(e/n.numTilesPerPage);if(i||!t){var s=n.numTilesFinalizedByPage[a]||0;n.numTilesFinalizedByPage[a]=s+1}0===a&&n.handleTTI&&(!(n.iconsLoaded.has(e)&&n.thumbsLoaded.has(e))&&(n.numTilesLoadedOnFirstPage++,n.numTilesLoadedOnFirstPage===l&&n.handleTTI()));i&&(n.pagesWithThumbs.has(a)||n.pagesWithThumbs.add(a),n.anyThumbLoadedTimeByPage.get(a)||n.anyThumbLoadedTimeByPage.set(a,n.getTimeNow()),n.numTilesFinalizedByPage[a]===l&&n.allThumbsLoadedTimeByPage.set(a,n.getTimeNow()))},this.pruneTrackedPages=function(){n.startTimeByPage.forEach((function(e,t){!n.pagesToLog.has(t)&&!n.pagesCompletedLogging.has(t)&&n.getTimeNow()-e>2e3&&n.startTimeByPage.delete(t)}))},this.logCompletedPages=function(){n.pagesToLog.forEach((function(e){var t=n.startTimeByPage.get(e),i=Math.max(n.allThumbsLoadedTimeByPage.get(e),t),o=Math.max(n.anyThumbLoadedTimeByPage.get(e),t);!i||n.pagesWithThumbs.has(e)?n.pagesWithThumbErrors.has(e)?n.handlePageCompletedLogging(e):t&&i&&o&&(n.logPerfStats(e,t,o,i),n.handlePageCompletedLogging(e)):n.handlePageCompletedLogging(e)}))},this.numTiles=e,this.numTilesPerPage=t,this.numTilesFinalizedByPage=[],this.numTilesLoadedOnFirstPage=0,this.iconsLoaded=new Set,this.thumbsLoaded=new Set,this.startTimeByPage=new Map,this.allThumbsLoadedTimeByPage=new Map,this.anyThumbLoadedTimeByPage=new Map,this.pagesWithThumbErrors=new Set,this.pagesWithThumbs=new Set,this.pagesCompletedLogging=new Set,this.pagesToLog=new Set,this.handleTTI=o}return e.prototype.getTimeNow=function(){var e=o.performance(),t=-1;return e&&e.now&&(t=e.now()),t},e.prototype.updateNumTiles=function(e){this.numTiles>=e||(this.numTiles=e)},e.prototype.handlePageCompletedLogging=function(e){this.pagesCompletedLogging.add(e),this.pagesToLog.delete(e),this.startTimeByPage.delete(e),this.anyThumbLoadedTimeByPage.delete(e),this.allThumbsLoadedTimeByPage.delete(e)},e.logThumbLoadError=function(){i.JSStopwatch.recordTrace("visual_browse_thumb_load_error",{stopwatchName:"infinite_tile_grid_logging",traceTime:0})},e.logThumbRTT=function(e){i.JSStopwatch.recordTrace("visual_browse_thumb_rtt",{stopwatchName:"infinite_tile_grid_logging",traceTime:e})},e.prototype.logPerfStats=function(e,t,o,n){i.JSStopwatch.recordTrace("loaded_any_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:o-t}),i.JSStopwatch.recordTrace("loaded_all_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:n-t})},e})();t.InfiniteTileGridLogger=n})),define("modules/clean/undo",["require","exports","tslib","dompurify","react","modules/constants/undo_strings","modules/core/notify"],(function(e,t,i,o,n,l,r){"use strict";var a,s;function d(){s&&(s(a),s=void 0,a=null)}Object.defineProperty(t,"__esModule",{value:!0}),t.notifyWithUndo=t.setHandleUndo=t.performUndo=void 0,o=i.__importStar(o),n=i.__importStar(n),t.performUndo=d,t.setHandleUndo=function(e,t){s=e,a=t||null},t.notifyWithUndo=function(e,t,i,o,u){if(void 0===u&&(u=l.UNDO),t&&Object.keys(t).length){a=t,s=i,o=null==o?30:o;var f=function(e){e.preventDefault(),d(),r.Notify.clear()};r.Notify.customSuccess(n.createElement(c,{message:e,undoButtonText:u,onUndo:f}),e,o)}else r.Notify.success(e)};var c=function(e){return"string"==typeof e.message?n.createElement("span",{"aria-live":"polite"},e.message," ",n.createElement("button",{className:"button-as-link",onClick:e.onUndo},e.undoButtonText)):n.createElement(n.Fragment,null,n.createElement("span",{"aria-live":"polite",dangerouslySetInnerHTML:{__html:o.sanitize(e.message.toHTML())}})," ",n.createElement("button",{className:"button-as-link",onClick:e.onUndo},e.undoButtonText))}})),define("retrieval-components/view-mode-toggle/index",["require","exports","tslib","retrieval-components/view-mode-toggle/view_mode_toggle"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.__exportStar(o,t)})),define("retrieval-components/view-mode-toggle/view_mode_toggle",["require","exports","tslib","react","react-intl","dig-components/icons/src","dig-components/menu","dig-components/buttons","dig-components/icons"],(function(e,t,i,o,n,l,r,a,s){"use strict";var d;function c(e,i,o){var r=n.defineMessage({id:"izeluw",defaultMessage:"Grid"}),a=n.defineMessage({id:"BOj5uG",defaultMessage:"Large grid"}),s=n.defineMessage({id:"kn0aTF",defaultMessage:"List"}),d=n.defineMessage({id:"+ElFUY",defaultMessage:"Large list"}),c=!i&&!o,u=[{mode:t.ViewMode.GRID,icon:l.GridViewDenseLine,label:e.formatMessage(r)},{mode:t.ViewMode.TILE,icon:l.GridViewLine,label:e.formatMessage(a)}];return c&&u.push({mode:t.ViewMode.CONDENSED_LIST,icon:l.ListViewDenseLine,label:e.formatMessage(s)}),u.push({mode:t.ViewMode.LIST,icon:l.ListViewLine,label:i?e.formatMessage(s):e.formatMessage(d)}),u}Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModeMenu=t.ViewModeToggle=t.ViewMode=void 0,o=i.__importStar(o),(d=t.ViewMode||(t.ViewMode={})).GRID="grid",d.TILE="tile",d.CONDENSED_LIST="condensed_list",d.LIST="list",t.ViewModeToggle=function(e){var i=e.className,l=e.currentMode,d=e.disabled,u=e.onSelection,f=e.treatLargeListAsList,p=e.withoutCondensedListMode,m=n.defineMessage({id:"slo33I",defaultMessage:"Select view type"}),h=n.useIntl(),g=h.formatMessage(m),_=c(h,f,p),E=_.find((function(e){return e.mode===l}))||_.find((function(e){return e.mode===t.ViewMode.LIST}));return o.createElement(r.Menu.Wrapper,{onSelection:u},(function(e){var n=e.getTriggerProps,c=e.getContentProps;return o.createElement(o.Fragment,null,o.createElement(a.IconButton,Object.assign({className:i,variant:"transparent","aria-label":g,disabled:d,withDropdownIcon:!0},n()),o.createElement(s.UIIcon,{src:E.icon})),o.createElement(r.Menu.Content,Object.assign({},c(),{placement:"bottom-end"}),o.createElement(t.ViewModeMenu,{currentMode:l,treatLargeListAsList:f,withoutCondensedListMode:p})))}))},t.ViewModeMenu=function(e){var t=e.currentMode,i=e.treatLargeListAsList,l=e.withoutCondensedListMode,a=c(n.useIntl(),i,l);return o.createElement(r.Menu.Segment,null,a.map((function(e){return o.createElement(r.Menu.SelectItem,{key:e.mode,value:e.mode,selected:e.mode===t,"aria-checked":e.mode===t,withRightAccessory:o.createElement(s.UIIcon,{src:e.icon})},e.label)})))}})),(function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("prod_assets_web_modules/keymaster",[],t);else{var i=t();for(var o in i)("object"==typeof exports?exports:e)[o]=i[o]}})(window,(function(){return(function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)})({"./keymaster.js":function(e,t){var i,o={},n={16:!1,18:!1,17:!1,91:!1},l="all",r={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220};for(i=1;i<20;i++)a["f"+i]=111+i;function s(e,t){for(var i=e.length;i--;)if(e[i]===t)return i;return-1}function d(){for(i in n)n.hasOwnProperty(i)&&(n[i]=!1)}function c(e,t,i){var n,l,s,d;for(void 0===i&&(i=t,t="all"),""==(n=(e=e.replace(/\s/g,"")).split(","))[n.length-1]&&(n[n.length-2]+=","),s=0;s<n.length;s++){if(l=[],(e=n[s].split("+")).length>1){for(l=e.slice(0,e.length-1),d=0;d<l.length;d++)l[d]=r[l[d]];e=[e[e.length-1]]}e=e[0],(e=a[e]||e.toUpperCase().charCodeAt(0))in o||(o[e]=[]),o[e].push({shortcut:n[s],scope:t,method:i,key:n[s],mods:l})}}for(i in r)c[i]=!1;function u(e){l=e||"all"}function f(){return l}function p(e){for(var t=e.slice(0,e.length-1),i=0;i<t.length;i++)t[i]=r[t[i]];return t}function m(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function h(e){var t=e.target||e.srcElement,i=t.tagName,o=e.keyCode,n=t.hasAttribute&&t.hasAttribute("contenteditable")&&"false"!=t.getAttribute("contenteditable").toLowerCase()||"undefined"!=typeof jest&&"true"==t.contentEditable;return!(("INPUT"==i||"SELECT"==i||"TEXTAREA"==i||n)&&-1==["submit","button"].indexOf(t.type)&&o!=a.escape&&o!=a.tab)}function g(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){i(window.event)}))}const _=c;_.setScope=u,_.getScope=f,_.clear=function(){o={},u(),d()},_.clearScope=function(e){for(var t in o)if(o.hasOwnProperty(t))for(var i=0;i<o[t].length;i++)o[t][i].scope===e&&(o[t].splice(i,1),i-=1)},_.filter=h,_.resetFilter=function(){c.filter=h},_.unbind=function(e,t,i){var n,l,r,s,d,c,u,h=[];for(l=(function(e){var t=e.replace(/\s/g,"").split(",");return""==t[t.length-1]&&(t[t.length-2]+=","),t})(e),d=0;d<l.length;d++){if((r=l[d].split("+")).length>1&&(h=p(r)),n=r[r.length-1],n=a[u=n]||u.toUpperCase().charCodeAt(0),void 0===t&&(t=f()),!o[n])return;for(s=0;s<o[n].length;s++)(c=o[n][s]).scope===t&&m(c.mods,h)&&(i&&c.method!==i||(o[n][s]={}))}},window.key||(g(document,"keydown",(function(e){var t,i,a,d,u;if((e.target||e.srcElement).tagName,93!=(t=e.keyCode)&&224!=t||(t=91),t in n)for(a in n[t]=!0,r)r[a]==t&&(c[a]=!0);else if(c.filter.call(this,e)&&t in o)for(originalScope=l,d=0;d<o[t].length;d++)if((i=o[t][d]).scope==originalScope||"all"==i.scope){for(a in u=i.mods.length>0,n)(!n[a]&&s(i.mods,+a)>-1||n[a]&&-1==s(i.mods,+a))&&(u=!1);(0!=i.mods.length||n[16]||n[18]||n[17]||n[91])&&!u||!1===i.method(e,i)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}})),g(document,"keyup",(function(e){var t,i=e.keyCode;if(93!=i&&224!=i||(i=91),i in n)for(t in n[i]=!1,r)r[t]==i&&(c[t]=!1)})),g(window,"focus",d),g(document,"contextmenu",d),window.key=_),e.exports=window.key},0:function(e,t,i){e.exports=i("./keymaster.js")}})}));
//# sourceMappingURL=pkg-selectable-list.min.js-vfldAJulU.map