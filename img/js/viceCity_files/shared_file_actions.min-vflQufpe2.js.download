define(["require","exports","tslib","prop-types","react","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/more_dropdown","modules/clean/react/share_download/util","modules/clean/react/title_bar/controls_container","modules/clean/react/user_notifications/dropdown","modules/clean/sharing/api/client","modules/clean/sharing/delete_link_modal","modules/core/browser","modules/clean/react/file_viewer_sidebar/render_utils/call_to_action","modules/clean/react/size_class/utils"],(function(e,n,t,r,i,o,l,s,a,d,u,c,p,h,m,f){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SharedFileActions=n.SharedFileMoreDropdown=void 0,r=t.__importDefault(r),i=t.__importDefault(i),h=t.__importStar(h);var _=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.removeShareLink=function(){var e=new c.ShareApiClient({userId:n.props.sharePermission.canRemoveLinkUids[0]});return p.deleteLinkWithConfirmLegacy({client:e,contentName:n.props.file.filename,onCancel:null,onDeleteLink:function(){return h.redirect("/home")},tkey:n.getTkey()})},n}return t.__extends(n,e),n.prototype.getTkey=function(){return this.props.sharePermission&&this.props.sharePermission.canRemoveLinkUids.length>0?this.props.shareToken.linkKey:null},n.prototype.render=function(){var e=this.props,n=e.sizeClass,t=e.file,r=e.shouldDisplayActionButtons,o=e.user,l=e.sharePermission,d=e.sharedLinkInfo,u=e.shareToken,c=e.direction,p=e.encryptionOptions;return f.isSmallerThanLarge(n)?i.default.createElement(s.MoreDropdown,{allowRemoveLink:!!this.getTkey()&&r,file:t,isPrivate:!1,onRemoveShareLink:this.removeShareLink,renderSignIn:!o,sizeClass:n,direction:c,shareDownloadOptions:r?a.getDownloadOptions(l,d,u,t,this.context.authModalKind||null,p,null):[]}):i.default.createElement(s.MoreDropdown,{allowRemoveLink:!!this.getTkey(),file:t,isPrivate:!1,onRemoveShareLink:this.removeShareLink,sizeClass:n,direction:c,user:o||void 0,sharedLink:d.url})},n})(i.default.PureComponent);n.SharedFileMoreDropdown=_;var v=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.file,r=e.sharedLinkInfo,s=e.sharePermission,a=e.shareToken,c=e.shouldDisplayActionButtons,p=e.sizeClass,h=e.user,v=e.encryptionOptions;if(f.isSmallerThanLarge(p))return i.default.createElement(_,t.__assign({},this.props));var k,g=m.renderSharedFileActions(n,h||void 0,p,r,a,s,c,!1,!1,v);return i.default.createElement(d.TitleBarControlsContainer,null,g,i.default.createElement(_,t.__assign({},this.props)),h?i.default.createElement("div",{className:"react-title-bar__divider"}):null,h&&!h.is_guest_admin?i.default.createElement(u.UserNotificationsDropdown,{isPagelet:!1,onClick:(k=l.UserAction.ClickNotifications,function(){return o.logUserAction(k,l.UserActionContext.TitleBarMain)})}):null)},n.defaultProps={user:null},n.contextTypes={authModalKind:r.default.oneOf(["download","immediate",null])},n})(i.default.Component);n.SharedFileActions=v}));
//# sourceMappingURL=shared_file_actions.min.js-vflwCdCEP.map