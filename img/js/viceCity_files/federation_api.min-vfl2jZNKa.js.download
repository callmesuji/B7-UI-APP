define(["require","exports","tslib","modules/clean/api_v2/default_team_client","modules/clean/viewer","modules/core/browser","modules/clean/api_v2/types"],(function(e,r,o,t,n,i,a){"use strict";function s(){var e=n.Viewer.get_viewer().work_user;return e&&new t.DefaultTeamApiV2Client(e).ns("federation")}Object.defineProperty(r,"__esModule",{value:!0}),r.API=r.redirectNotLoggedIn=r.redirectNotLoggedOrNoPermission=r.redirectOnTags=r.CommonErrorTags=r.createFederationClient=void 0,i=o.__importStar(i),r.createFederationClient=s;var d=s();r.CommonErrorTags={UserNotLoggedIn:"user_not_logged_in",NoPermission:"no_permission"},r.redirectOnTags=function(e,r){return void 0===r&&(r="/"),function(o){var t=o.error&&o.error[".tag"];throw t&&e.filter((function(e){return e===t})).length>0&&i.redirect(r),o}},r.redirectNotLoggedOrNoPermission=function(){return r.redirectOnTags([r.CommonErrorTags.UserNotLoggedIn,r.CommonErrorTags.NoPermission])},r.redirectNotLoggedIn=function(){return r.redirectOnTags([r.CommonErrorTags.UserNotLoggedIn])};var c=function(e){var r;return(r={})[a.ApiV2HeaderNames.DropboxTeamAuthorization]=JSON.stringify({auth_role:String(a.TeamAuthRequestRole.FederationAdminRole),auth_action_type:String(a.TeamAuthRequestActionType.OnBehalfOfAction)}),r[a.ApiV2HeaderNames.DropboxTeamId]=e,r};r.API={getInstancesPageData:function(){return null==d?void 0:d.rpc("get_instances_page_data",void 0,{}).catch(r.redirectNotLoggedOrNoPermission())},getSingleInstancesData:function(e){return null==d?void 0:d.rpc("get_single_instance_summary",void 0,{headers:c(e)}).catch(r.redirectNotLoggedIn())},listInstances:function(e){var o;return void 0===e&&(e=!1),null!==(o=null==d?void 0:d.rpc("list_instances",{include_federation:e},{}).catch(r.redirectNotLoggedOrNoPermission()))&&void 0!==o?o:Promise.resolve([])}}}));
//# sourceMappingURL=federation_api.min.js-vfl4q4lnK.map