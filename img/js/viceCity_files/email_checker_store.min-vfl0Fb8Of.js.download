define(["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery"],(function(e,i,t,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.EmailCheckerStore=i.EmailCheckResult=void 0,c=t.__importStar(c);var n=(function(){function e(){this.inFlight=!0,this.canInvite=!1,this.reason="checking",this.callbacks=[]}return e.prototype.whenReady=function(e){this.inFlight?this.callbacks.push(e):e()},e.prototype.resultArrived=function(e,i){if(this.inFlight){this.inFlight=!1,this.canInvite=e,this.reason=i;for(var t=0,c=this.callbacks;t<c.length;t++){(0,c[t])()}this.callbacks=[]}},e})();i.EmailCheckResult=n;var r=(function(){function e(e,i){var t=this;void 0===i&&(i=!0),this.checkEmails=function(e,i){var r={},s=e.length;if(0===s)return i(r);for(var a=[],h=function(e){var c=t.checkedEmails[e];c||(c=t.checkedEmails[e]=new n,a.push(e)),c.whenReady((function(){r[e]=c,0==--s&&i(r)}))},l=0,o=e;l<o.length;l++){h(o[l])}a.length>0&&(function(e){c.WebRequest({url:t.checkUrl,data:{emails:e.join(",")},async:t.checkAsync,success:function(e){var i=JSON.parse(e);for(var c in i)if(i[c]){var n=i[c],r=n.can_invite,s=n.reason;t.checkedEmails[c]&&t.checkedEmails[c].resultArrived(r,s)}},error:function(){for(var i=0,c=e;i<c.length;i++){var n=c[i];delete t.checkedEmails[n]}}})})(a)},this.checkUrl=e,this.checkedEmails={},this.checkAsync=i}return e.prototype.getEmailCheckResult=function(e){return this.checkedEmails[e]},e})();i.EmailCheckerStore=r}));
//# sourceMappingURL=email_checker_store.min.js-vflayhvJl.map