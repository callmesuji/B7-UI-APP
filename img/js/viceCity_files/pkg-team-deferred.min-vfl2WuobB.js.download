define("modules/clean/teams/admin/widgets/admin_permissions_modal/admin_permissions_modal",["require","exports","tslib","react","react-intl","react-dom-factories","modules/core/i18n","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/viewer","modules/clean/components/modals/show_modal","modules/clean/teams/admin/modals/modal_ajax","modules/clean/teams/constants","modules/constants/trademark","modules/clean/deprecated_ajax/ajax_jquery","modules/core/notify","modules/clean/react/modal_controller","dig-components/modal","dig-components/typography","dig-components/buttons"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p,c,f,g,_,M,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showAdminPermissionsModal=t.AdminPermissionsModal=t.DeprecatedShowLegacyAdminPermissionsModal=t.AdminPermissionsModalAction=t.SUCCESS_NOTIFY=t.CHANGE_ADMIN_PERMISSION_URL=t.LegacyAdminPermissionsModal=void 0,o=a.__importDefault(o),r=a.__importDefault(r),c=a.__importStar(c),g=a.__importStar(g),t.LegacyAdminPermissionsModal=function(e){e.userId;var t=e.displayName,a=e.enablePermissions,l=e.limited,u=e.removeOwnPermission,d=void 0!==u&&u,m=e.onRequestClose,c=void 0===m?function(){}:m,f=e.onPrimaryAction,g=void 0===f?function(){}:f,_=e.onSecondaryAction,M=void 0===_?function(){}:_,h=n.intl.formatMessage(a?s.defineMessage({id:"IUj/kj",defaultMessage:"Add admin permissions for {display_name}"}):s.defineMessage({id:"DXC6te",defaultMessage:"Remove admin privileges from {display_name}"}),{display_name:t}),b=a?n.intl.formatMessage({id:"2h/hqK",defaultMessage:"Add admin permissions"}):n.intl.formatMessage({id:"xzzsCz",defaultMessage:"Remove admin permissions"}),v=n.intl.formatMessage((function(e,t,a){return!e&&t?s.defineMessage({id:"nbCsok",defaultMessage:"Are you sure you want to add admin permissions for {display_name}?"}):e||t?e&&t?s.defineMessage({id:"/DXio5",defaultMessage:"Are you sure you want to give admin permissions to {display_name}? All users with admin permissions will be able to upgrade this team to <businessLink>{trademark_business}</businessLink>."}):a?s.defineMessage({id:"n8X+HI",defaultMessage:"If you remove your admin permissions, you’ll no longer be able to upgrade or delete your team, change team settings, or remove invited and existing users."}):s.defineMessage({id:"6CCjcR",defaultMessage:"{display_name} won’t be able to manage team settings, remove and un-invite users, or upgrade the team to <businessLink>{trademark_business}</businessLink>. Are you sure you want to continue?"}):s.defineMessage({id:"9L15vT",defaultMessage:"Are you sure you want to remove admin permissions from {display_name}?"})})(l,a,d),{display_name:t,trademark_business:p.TRADEMARK_BUSINESS,businessLink:function(e){return r.default.a({href:"/business"},e)}});return o.default.createElement(i.ActionUtilityModal,{className:"admin-status-modal",title:h,id:"admin-permissions-modal",primaryAction:b,onPrimaryAction:g,onSecondaryAction:M,onRequestClose:c},v)},t.CHANGE_ADMIN_PERMISSION_URL="/account/team/set_admin_status",t.SUCCESS_NOTIFY=function(e,t){return n.intl.formatMessage(t?s.defineMessage({id:"2F2ibz",defaultMessage:"Admin permissions added to {display_name}"}):s.defineMessage({id:"0P+Y1J",defaultMessage:"Admin permissions removed from {display_name}"}),{display_name:e})},t.AdminPermissionsModalAction=function(e){var o=e.userId,s=e.displayName,r=e.enablePermissions,n=e.limited,i=e.team_id,u=e.removeOwnPermission,p=a.__rest(e,["userId","displayName","enablePermissions","limited","team_id","removeOwnPermission"]),c=n?{user_id:o,on:r?"yes":"no",role:m.ADMIN_ROLE.LIMITED,team_id:i}:{user_id:o,on:r?"yes":"no"};return d.modalAjax({modal:t.LegacyAdminPermissionsModal,ajax:{url:t.CHANGE_ADMIN_PERMISSION_URL,data:c,subject_user:l.Viewer.get_viewer().work_user},notify:{successNotify:t.SUCCESS_NOTIFY(s,r)}})(a.__assign({userId:o,displayName:s,enablePermissions:r,limited:n,team_id:i,removeOwnPermission:u},p))},t.DeprecatedShowLegacyAdminPermissionsModal=function(e){return u.showModal(o.default.createElement(t.AdminPermissionsModalAction,a.__assign({},e)))},t.AdminPermissionsModal=function(e){var t=e.userId,a=e.displayName,r=e.enablePermissions,i=e.onPrimaryAction,l=void 0===i?function(){}:i,u=o.default.useState(!0),d=u[0],m=u[1],p=o.default.useState(!1),c=p[0],f=p[1];return o.default.createElement(_.Modal,{open:d,isCentered:!0,onAfterClose:function(){return g.unmountModal()},shouldCloseOnOverlayClick:!1},o.default.createElement(_.Modal.Header,{hasBottomSpacing:"title-standard"},o.default.createElement(M.Title,null,n.intl.formatMessage(r?s.defineMessage({id:"X+BzF3",defaultMessage:"Add admin permissions for {display_name}"}):s.defineMessage({id:"lpaQyB",defaultMessage:"Remove admin privileges from {display_name}"}),{display_name:a}))),o.default.createElement(_.Modal.Body,{hasVerticalSpacing:!1},o.default.createElement(M.Text,null,n.intl.formatMessage(r?s.defineMessage({id:"X/GYfj",defaultMessage:"Are you sure you want to add admin permissions for {display_name}?"}):s.defineMessage({id:"QB/fps",defaultMessage:"Are you sure you want to remove admin permissions from {display_name}?"}),{display_name:a}))),o.default.createElement(_.Modal.Footer,null,o.default.createElement(h.Button,{variant:"opacity",onClick:function(){m(!1)},autoFocus:!0,disabled:c},n.intl.formatMessage({id:"0pIb4L",defaultMessage:"Cancel"})),o.default.createElement(h.Button,{variant:"primary",onClick:function(){f(!0),b(t,r,a,(function(){m(!1),l()}))},isLoading:c},r?n.intl.formatMessage({id:"2h/hqK",defaultMessage:"Add admin permissions"}):n.intl.formatMessage({id:"xzzsCz",defaultMessage:"Remove admin permissions"}))))};var b=function(e,a,o,s){void 0===s&&(s=function(){}),c.WebRequest({url:"/account/team/set_admin_status",data:{user_id:e,on:a?"yes":"no"},subject_user:l.Viewer.get_viewer().work_user,complete:function(){s()},success:function(){f.Notify.success(t.SUCCESS_NOTIFY(o,a))}})};t.showAdminPermissionsModal=function(e){return g.mountModal(o.default.createElement(t.AdminPermissionsModal,a.__assign({},e)))}})),define("modules/clean/groups/add_group_members_modal",["require","exports","tslib","create-react-class","react","react-dom-factories","prop-types","jquery","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/analytics","modules/clean/groups/group_members_form","modules/clean/groups/utils","modules/clean/react/modal","modules/clean/viewer","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p,c,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),s=a.__importDefault(s),r=a.__importDefault(r),n=a.__importDefault(n),i=a.__importDefault(i),l=a.__importStar(l),d=a.__importDefault(d),m=a.__importDefault(m);var _=c.Viewer.get_viewer(),M=o.default({displayName:"AddGroupMembersModal",propTypes:{group:n.default.object,insideAdminConsole:n.default.bool,onGroupChanged:n.default.func},getInitialState:function(){return{canProceed:!1,submitting:!1}},componentDidMount:function(){return i.default(".contacts-tokenizer-input").select()},_canProceed:function(){return(null!=this.refs.members?this.refs.members.areAllContactsValid():void 0)&&!(null!=this.refs.members?this.refs.members.isEmpty():void 0)},onClickAddMembers:function(e){var t=this;return e.preventDefault(),this.refs.members.getFinalData((function(e){var a=e.emails,o=t._canProceed();if(t.setState({canProceed:o}),o)return t.setState({submitting:!0}),l.WebRequest({url:"/groups_ajax/add_users_to_group",data:{members:JSON.stringify(a),group_id:t.props.group.id},subject_user:_.work_user,complete:function(){if(t.isMounted())return t.setState({submitting:!1})},success:function(e){return e=JSON.parse(e),g.Notify.success(f.intl.formatMessage({id:"1tC4ob",defaultMessage:"{count, plural, one{Adding member...} other{Adding members...}}"},{count:a.length})),p.Modal.close(),t.props.onGroupChanged(!0,null)},error:function(e){if(m.default.isGroupDeleted(e))return p.Modal.close(),m.default.redirectToGroupsPage(t.props.insideAdminConsole)}})}))},onMembersFormChange:function(){return this.setState({canProceed:this._canProceed()})},logWebTeamsEvent:function(){var e={group_owner_ids:this.props.group.users.filter((function(e){return e.is_owner})).map((function(e){return e.user_id})),team_id:this.props.group.team_id,team_type:_.team_type,group_id:this.props.group.id};return u.TeamsWebActionsLogger.log("groups_add_members_cancelled",e)},render:function(){return s.default.createElement(p.Modal,{title:f.intl.formatMessage({id:"OCdQsd",defaultMessage:"Add members to “{group_name}”"},{group_name:this.props.group.name}),className:"no-scroll-modal",id:"add-group-members-modal",acceptButtonText:f.intl.formatMessage({id:"tRUDJx",defaultMessage:"Add members"}),dismissButtonText:f.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onAccept:this.onClickAddMembers,onDismiss:this.logWebTeamsEvent,acceptButtonDisabled:!this.state.canProceed,submitting:this.state.submitting,ref:"modal"},s.default.createElement(d.default,{ref:"members",group:this.props.group,onChange:this.onMembersFormChange,errorMessageSpaceFixed:!1,includeCustomMessage:!1,emailPlaceholder:f.intl.formatMessage({id:"QsxVTO",defaultMessage:"Add names or emails"}),disallowGroupMembers:!0}),r.default.label({},r.default.br({}),f.intl.formatMessage({id:"ystVF4",defaultMessage:"Giving new members access to all of this group’s shared folders might take a little while."})))}});t.default=M})),define("modules/clean/teams/modals/create_group_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/viewer","modules/clean/teams/admin/modals/modal_ajax","modules/clean/rondo/forms/index","modules/clean/react/tooltip","modules/clean/static_urls","modules/clean/groups/utils","spectrum/button"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p,c){"use strict";function f(e,t,a){return null==e&&(e=!1),null==t&&(t=!1),e||!t||!a}function g(e,t,a){return null==e&&(e=!1),null==t&&(t=!1),!e&&t&&a}Object.defineProperty(t,"__esModule",{value:!0}),t.showCreateGroupModal=t.CreateGroupModalAction=t.CREATE_GROUP_URL=t.CreateGroupModal=void 0,o=a.__importDefault(o),p=a.__importDefault(p),t.CreateGroupModal=function(e){var t=e.canHaveAdminUi,r=e.isLimitedTeam,i=e.groupNameField,l=e.radio,f=e.onPrimaryAction,g=void 0===f?function(){}:f,_=e.onSecondaryAction,M=e.onRequestClose,h=void 0===M?function(){}:M,b=n.intl.formatMessage({id:"Jlk66P",defaultMessage:"Create a new group"}),v=null;!r&&t&&(v=(function(e){return o.default.createElement("div",{className:"group-type"},o.default.createElement("span",{className:"tooltip-label group-kind-label"},n.intl.formatMessage({id:"vRnlaU",defaultMessage:"What kind of group is it?"}),o.default.createElement(d.Tooltip,{position:d.TooltipPosition.RIGHT,tooltip_contents:n.intl.formatMessage({id:"Ej5kjR",defaultMessage:"In company-managed groups, admins are responsible for adding and removing members. In user-managed groups, users approve new members, and existing members can leave whenever they like."}),tooltip_classname:"group-kind-tooltip-bubble"},o.default.createElement("img",{src:m.static_url("/static/images/sprites/teams/tool_tip_icon-vflUvSKa8.png"),alt:n.intl.formatMessage({id:"+SX5vq",defaultMessage:"More information"})}))),o.default.createElement("div",{className:"group-type-selection"},o.default.createElement(u.RadioButton,a.__assign({className:"admin-managed-radio",value:"true",name:"group_type",id:"admin-managed-radio"},e),n.intl.formatMessage({id:"lAgVxS",defaultMessage:"Company-managed group"})),o.default.createElement("br",null),o.default.createElement(u.RadioButton,a.__assign({className:"member-managed-radio",value:"false",name:"group_type",id:"member-managed-radio"},e),n.intl.formatMessage({id:"KhLThn",defaultMessage:"User-managed group"}))))})(l));var y=o.default.createElement("label",{className:"label-description",htmlFor:"group-name-input"},n.intl.formatMessage({id:"67fhSx",defaultMessage:"Group name"})),A=i.fieldValue.length>0&&i.fieldValue.length<=p.default.MAX_GROUP_NAME_LEN;if(i.fieldValue.length>p.default.MAX_GROUP_NAME_LEN){y=o.default.createElement("div",{className:"text-input-error-wrapper"},n.intl.formatMessage({id:"67fhSx",defaultMessage:"Group name"})," - ",n.intl.formatMessage({id:"ipcJZm",defaultMessage:"The group name should be under {max_len} characters"},{max_len:p.default.MAX_GROUP_NAME_LEN}))}var w=A?n.intl.formatMessage({id:"bhV8Xa",defaultMessage:"Create"}):function(){return o.default.createElement(c.Button,{disabled:!0},n.intl.formatMessage({id:"bhV8Xa",defaultMessage:"Create"}))};return o.default.createElement(s.ActionUtilityModal,{title:b,primaryAction:w,onPrimaryAction:g,onSecondaryAction:_,onRequestClose:h,id:"create-group-modal",shouldRequestCloseOnActions:!1,overlayClickClose:!0,className:"create-group-modal"},o.default.createElement("div",{className:"text-input"},y,o.default.createElement("div",{className:"text-input-wrapper"},o.default.createElement(u.Input,a.__assign({className:"text-input-input .group-name-input",id:"group-name-input",placeholder:n.intl.formatMessage({id:"ZqTi8N",defaultMessage:"Marketing, Design, etc."}),onPrimaryAction:g},i)))),v)},t.CREATE_GROUP_URL="/groups_ajax/make_new_group_with_users",t.CreateGroupModalAction=function(e){var o=e.canHaveAdminUi,s=e.isLimitedTeam,r=a.__rest(e,["canHaveAdminUi","isLimitedTeam"]);return l.modalAjax({modal:t.CreateGroupModal,ajax:{url:t.CREATE_GROUP_URL,data:function(e){var t=e.groupNameField,a=e.radio;e.canBeAdminManaged;return{name:t,members:JSON.stringify([{name:i.Viewer.get_viewer().display_name,email:i.Viewer.get_viewer().work_email,is_owner:f(s,o,"true"===a)}]),is_admin_managed:g(s,o,"true"===a)}},subject_user:i.Viewer.get_viewer().work_user},autoCloseOnError:!1,fields:{groupNameField:{fieldValue:""},radio:{fieldValue:"true"}}})(a.__assign({canHaveAdminUi:o,isLimitedTeam:s},r))},t.showCreateGroupModal=function(e){return r.showModal(o.default.createElement(t.CreateGroupModalAction,a.__assign({},e)))}})),define("modules/clean/groups/switch_to_member_managed_group_modal",["require","exports","tslib","create-react-class","react","react-dom-factories","prop-types","jquery","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/groups/group_members_form","modules/clean/groups/utils","modules/clean/react/modal","modules/clean/viewer","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p,c,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),s=a.__importDefault(s),r=a.__importDefault(r),n=a.__importDefault(n),i=a.__importDefault(i),l=a.__importStar(l),u=a.__importDefault(u),d=a.__importDefault(d);var g=p.Viewer.get_viewer(),_=o.default({displayName:"SwitchToMemberManagedGroupModal",propTypes:{group:n.default.object,onMemberManaged:n.default.func,insideAdminConsole:n.default.bool},getInitialState:function(){return{canProceed:!0,submitting:!1}},componentDidMount:function(){return i.default(".contacts-tokenizer-input").select()},_canProceed:function(){return null!=this.refs.members?this.refs.members.areAllContactsValid():void 0},onSubmit:function(e){var t=this;return e.preventDefault(),this.refs.members.getFinalData((function(e){var a=e.emails,o=t._canProceed();if(t.setState({canProceed:o}),o){t.setState({submitting:!0});var s=t.props.group.name,r=t.props.onMemberManaged;return l.WebRequest({url:"/groups_ajax/change_to_member_managed_type",data:{new_owners:JSON.stringify(a),group_id:t.props.group.id},subject_user:g.work_user,complete:function(){if(t.isMounted())return t.setState({submitting:!1})},success:function(e){f.Notify.success(c.intl.formatMessage({id:"i0sxuP",defaultMessage:"{group_name} is now user-managed"},{group_name:s})),m.Modal.close();var t=Array.from(a).map((function(e){return e.email}));return r(t)},error:function(e){if(d.default.isGroupDeleted(e))return m.Modal.close(),d.default.redirectToGroupsPage(t.props.insideAdminConsole)}})}}))},onMembersFormChange:function(){return this.setState({canProceed:this._canProceed()})},render:function(){return s.default.createElement(m.Modal,{title:c.intl.formatMessage({id:"6ByNKu",defaultMessage:"Make user-managed?"}),id:"switch-to-member-managed-group-modal",acceptButtonText:c.intl.formatMessage({id:"5hVLiZ",defaultMessage:"Make user-managed"}),dismissButtonText:c.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),acceptButtonDisabled:!this.state.canProceed,submitting:this.state.submitting,onAccept:this.onSubmit,ref:"modal"},r.default.label({className:"label-description"},c.intl.formatMessage({id:"H7nsto",defaultMessage:"This will become a user-managed group, and the person you choose below will be responsible for approving new members. Group members can leave whenever they like."})),r.default.br({}),r.default.br({}),r.default.label({className:"label-description-secondary"},c.intl.formatMessage({id:"OGgkeh",defaultMessage:"Who should manage this group?"})),s.default.createElement(u.default,{ref:"members",group:this.props.group,onChange:this.onMembersFormChange,errorMessageSpaceFixed:!1,includeCustomMessage:!1,emailPlaceholder:c.intl.formatMessage({id:"XzAvwC",defaultMessage:"Name or email address"}),disallowGroupMembers:!1}))}});t.default=_})),define("modules/clean/teams/admin/modals/fetch_ui_data_and_show_modal",["require","exports","tslib","react","modules/clean/teams/admin/api/admin_console_api_client","modules/clean/components/modals/show_modal","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,s,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchUserUiDataAndShowModal=void 0,o=a.__importDefault(o),s=a.__importDefault(s),t.fetchUserUiDataAndShowModal=function(e,t,l,u){return a.__awaiter(this,void 0,void 0,(function(){var d,m,p;return a.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,(new s.default).userUiInfo(e)];case 1:for(p in d=c.sent(),m={},u)m[u[p]]=d[p];return r.showModal(o.default.createElement(t,a.__assign({},m,l))),[3,3];case 2:return c.sent(),i.Notify.error(n.intl.formatMessage({id:"mfLT9G",defaultMessage:"Failed to load modal"})),[3,3];case 3:return[2]}}))}))}})),define("modules/clean/teams/modals/delete_team_modal",["require","exports","tslib","react","prop-types","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/react/modal","modules/clean/viewer","modules/core/browser","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,s,r,n,i,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteTeamModal=void 0,o=a.__importDefault(o),s=a.__importDefault(s),r=a.__importStar(r),l=a.__importStar(l);var m=i.Viewer.get_viewer(),p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={submitting:!1},t._teamDeleted=function(){return d.Notify.success(u.intl.formatMessage({id:"65ZjuM",defaultMessage:"You successfully deleted the team."})),l.redirect("/home")},t._onAccept=function(){return t.setState({submitting:!0}),r.WebRequest({url:"/team/manage/delete",data:{team_id:t.props.teamId,_subject_uid:m.work_user.id},complete:function(){return t._teamDeleted()},success:function(){return t._teamDeleted()}})},t}return a.__extends(t,e),t.prototype.render=function(){var e=u.intl.formatMessage({id:"lRG4Y3",defaultMessage:"The {team_name} team will be permanently deleted and all members will be removed. Your team’s folders will be converted to shared folders, nested shared folders will be flattened and your {team_name} groups will be deleted. Every member’s account will be converted to a personal Dropbox."},{team_name:this.props.teamName});return o.default.createElement(n.Modal,{title:u.intl.formatMessage({id:"JD67qu",defaultMessage:"Delete team?"}),acceptButtonText:u.intl.formatMessage({id:"9v2+SN",defaultMessage:"Delete"}),dismissButtonText:u.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),submitting:this.state.submitting,acceptButtonDisabled:this.state.submitting,dismissButtonDisabled:this.state.submitting,autoClose:!1,onAccept:this._onAccept},e)},t.displayName="DeleteTeamModal",t.propTypes={teamName:s.default.string.isRequired,teamId:s.default.number.isRequired},t})(o.default.Component);t.DeleteTeamModal=p})),define("modules/clean/teams/modals/sole_admin_warning_modal",["require","exports","tslib","react","modules/core/i18n","modules/clean/teams/admin/modals/alert_utility_modal","modules/clean/components/modals/show_modal"],(function(e,t,a,o,s,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showSoleAdminWarningModal=t.SoleAdminWarningModal=void 0,o=a.__importDefault(o),t.SoleAdminWarningModal=function(e){var t=e.teamName,a=e.action,n=e.onPrimaryAction,i=void 0===n?function(){}:n,l=e.onRequestClose,u=void 0===l?function(){}:l,d=s.intl.formatMessage({id:"2ti+Ua",defaultMessage:"You must give admin permissions to someone else"}),m=s.intl.formatMessage({id:"hCqb3Q",defaultMessage:"I understand"}),p="leave"===a?s.intl.formatMessage({id:"Ucjzq4",defaultMessage:"Since you’re the only admin of {team_name}, you need to give someone else on your team admin permissions before you leave the team. You can do this by clicking the gear icon to the right of a team member’s name and selecting “Give admin permissions”."},{team_name:t}):s.intl.formatMessage({id:"lPtN7+",defaultMessage:"In order to remove your admin permissions, you must first give admin permissions to someone else on your team. You can do this by clicking the gear icon to the right of a team member’s name and selecting “Give admin permissions”."});return o.default.createElement(r.AlertUtilityModal,{title:d,primaryAction:m,width:"698px",onPrimaryAction:i,onRequestClose:u},p)},t.showSoleAdminWarningModal=function(e){return n.showModal(t.SoleAdminWarningModal(a.__assign({},e)))}})),define("modules/clean/teams/modals/leave_team_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/teams/admin/modals/modal_ajax"],(function(e,t,a,o,s,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showLeaveLimitedTeamModal=t.LeaveLimitedTeamModalAction=t.LEAVE_TEAM_URL=t.LeaveLimitedTeamModal=void 0,o=a.__importDefault(o),t.LeaveLimitedTeamModal=function(e){e.userId;var t=e.teamName,a=e.canHaveAdminUi,r=e.onRequestClose,i=void 0===r?function(){}:r,l=e.onPrimaryAction,u=void 0===l?function(){}:l,d=e.onSecondaryAction,m=void 0===d?function(){}:d,p=n.intl.formatMessage({id:"A+7vH+",defaultMessage:"Leave team?"}),c=n.intl.formatMessage({id:"tEX5tu",defaultMessage:"Leave team"}),f="";return f=a?n.intl.formatMessage({id:"AkLAAg",defaultMessage:"You’ll lose access to all {team_name} groups. Your account will be converted to a personal Dropbox."},{team_name:t}):n.intl.formatMessage({id:"ZWIVFP",defaultMessage:"You’ll lose access to the {team_name} team folder and all {team_name} groups. Your account will be converted to a personal Dropbox."},{team_name:t}),o.default.createElement(s.ActionUtilityModal,{title:p,primaryAction:c,onPrimaryAction:u,onSecondaryAction:m,onRequestClose:i},f)},t.LEAVE_TEAM_URL="/team/manage/leave",t.LeaveLimitedTeamModalAction=function(e){var o=e.userId,s=e.teamName,r=e.canHaveAdminUi,l=a.__rest(e,["userId","teamName","canHaveAdminUi"]);return i.modalAjax({modal:t.LeaveLimitedTeamModal,ajax:{url:t.LEAVE_TEAM_URL,data:{user_id:o}},notify:{successNotify:n.intl.formatMessage({id:"ESoQOz",defaultMessage:"You left the team."})}})(a.__assign({userId:o,teamName:s,canHaveAdminUi:r},l))},t.showLeaveLimitedTeamModal=function(e){return r.showModal(o.default.createElement(t.LeaveLimitedTeamModalAction,a.__assign({},e)))}})),define("modules/clean/teams/modals/delete_group_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/viewer","modules/clean/teams/admin/modals/modal_ajax"],(function(e,t,a,o,s,r,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showDeleteGroupModal=t.DeleteGroupModalAction=t.DELETE_GROUP_URL=t.DeleteGroupModal=void 0,o=a.__importDefault(o),t.DeleteGroupModal=function(e){e.groupId;var t=e.groupName,a=e.onRequestClose,r=void 0===a?function(){}:a,i=e.onPrimaryAction,l=void 0===i?function(){}:i,u=e.onSecondaryAction,d=void 0===u?function(){}:u,m=n.intl.formatMessage({id:"o+5hmU",defaultMessage:"Delete “{group_name}”?"},{group_name:t}),p=n.intl.formatMessage({id:"9v2+SN",defaultMessage:"Delete"}),c=n.intl.formatMessage({id:"3MRvRq",defaultMessage:"<paragraph>Deleting “{group_name}” will cause all of its members to lose access to folders that have been shared with the group. You will not be able to undo this.</paragraph> <paragraph>It might take a little while for deleted groups to be removed from all their shared folders.</paragraph> <paragraph>Are you sure you want to delete the group?</paragraph>"},{paragraph:function(e){return o.default.createElement("p",null,e)},group_name:t});return o.default.createElement(s.ActionUtilityModal,{title:m,primaryAction:p,id:"delete-group-modal",onPrimaryAction:l,onSecondaryAction:d,onRequestClose:r},c)},t.DELETE_GROUP_URL="/groups_ajax/remove_group",t.DeleteGroupModalAction=function(e){var o=e.groupId,s=e.groupName,r=a.__rest(e,["groupId","groupName"]);return l.modalAjax({modal:t.DeleteGroupModal,ajax:{url:t.DELETE_GROUP_URL,data:{group_id:o},subject_user:i.Viewer.get_viewer().work_user},notify:{successNotify:n.intl.formatMessage({id:"npviR9",defaultMessage:"Deleting group..."})}})(a.__assign({groupId:o,groupName:s},r))},t.showDeleteGroupModal=function(e){return r.showModal(o.default.createElement(t.DeleteGroupModalAction,a.__assign({},e)))}})),define("modules/clean/teams/modals/remove_user_from_group_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/viewer","modules/clean/teams/admin/modals/modal_ajax"],(function(e,t,a,o,s,r,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showRemoveUserFromGroupModal=t.RemoveUserFromGroupModalAction=t.RemoveUserFromGroupModalActionWithoutCSS=t.REMOVE_FROM_GROUP_URL=t.RemoveUserFromGroupModal=void 0,o=a.__importDefault(o),t.RemoveUserFromGroupModal=function(e){e.groupId;var t=e.groupName,a=(e.userId,e.userDisplayName),r=e.removeSelf,i=e.onRequestClose,l=void 0===i?function(){}:i,u=e.onPrimaryAction,d=void 0===u?function(){}:u,m=e.onSecondaryAction,p=void 0===m?function(){}:m,c=r?n.intl.formatMessage({id:"HCULl2",defaultMessage:"Leave “{group_name}”?"},{group_name:t}):n.intl.formatMessage({id:"sIVZG2",defaultMessage:"Remove {name}?"},{name:a}),f=r?n.intl.formatMessage({id:"fjUgqX",defaultMessage:"Leave"}):n.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"}),g=r?(function(e){return n.intl.formatMessage({id:"NpPBjp",defaultMessage:"<paragraph>Leaving “{group_name}” will cause you to lose access to folders that have been shared with the group.</paragraph> <paragraph>It might take a little while to remove you from all of the group’s shared folders.</paragraph> <paragraph>Are you sure you want to leave the group?</paragraph>"},{paragraph:function(e){return o.default.createElement("p",null,e)},group_name:e})})(t):(function(e){return n.intl.formatMessage({id:"Tojmyg",defaultMessage:"<paragraph>Removing {name} will cause them to lose access to folders that have been shared with the group.</paragraph> <paragraph>It might take a little while to remove members from all of this group’s shared folders.</paragraph> <paragraph>Are you sure you want to do this?</paragraph>"},{paragraph:function(e){return o.default.createElement("p",null,e)},name:e})})(a);return o.default.createElement(s.ActionUtilityModal,{title:c,id:"remove-user-from-group-modal",primaryAction:f,onPrimaryAction:d,onSecondaryAction:p,onRequestClose:l},g)},t.REMOVE_FROM_GROUP_URL="/groups_ajax/remove_user_from_group",t.RemoveUserFromGroupModalActionWithoutCSS=function(e){var o=e.groupId,s=e.groupName,r=e.userId,u=e.userDisplayName,d=e.removeSelf,m=a.__rest(e,["groupId","groupName","userId","userDisplayName","removeSelf"]);return l.modalAjax({modal:t.RemoveUserFromGroupModal,ajax:{url:t.REMOVE_FROM_GROUP_URL,data:{group_id:o,user_id:r},subject_user:i.Viewer.get_viewer().work_user},notify:{successNotify:d?n.intl.formatMessage({id:"Mt43Vq",defaultMessage:"Leaving group..."}):n.intl.formatMessage({id:"9toIi4",defaultMessage:"Removing member..."})}})(a.__assign({groupId:o,groupName:s,userId:r,userDisplayName:u,removeSelf:d},m))},t.RemoveUserFromGroupModalAction=t.RemoveUserFromGroupModalActionWithoutCSS,t.showRemoveUserFromGroupModal=function(e){return r.showModal(o.default.createElement(t.RemoveUserFromGroupModalAction,a.__assign({},e)))}})),define("modules/clean/teams/modals/rename_group_modal",["require","exports","tslib","react","modules/core/i18n","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/clean/groups/utils","modules/clean/rondo/forms/index","modules/clean/teams/admin/modals/modal_ajax","spectrum/label","spectrum/button","modules/clean/viewer"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showRenameGroupModal=t.RenameGroupModalApp=t.RENAME_GROUP_URL=t.RenameGroupModal=void 0,o=a.__importDefault(o),i=a.__importDefault(i),t.RenameGroupModal=function(e){var t=e.origGroupName,n=e.groupNameField,u=e.onRequestClose,p=void 0===u?function(){}:u,c=e.onPrimaryAction,f=void 0===c?function(){}:c,g=e.onSecondaryAction,_=void 0===g?function(){}:g,M=function(){return n&&n.fieldValue.length>i.default.MAX_GROUP_NAME_LEN},h=!M()?o.default.createElement(d.Label,{className:"label-group-name",htmlFor:"group-name-input"},s.intl.formatMessage({id:"67fhSx",defaultMessage:"Group name"})):o.default.createElement(d.Label,{className:"label-group-name-error",htmlFor:"group-name-input"},s.intl.formatMessage({id:"67fhSx",defaultMessage:"Group name"})," ","- ",M()?s.intl.formatMessage({id:"08pXPf",defaultMessage:"Must be under 140 characters"}):"");return o.default.createElement(r.ActionUtilityModal,{title:s.intl.formatMessage({id:"+VWsfP",defaultMessage:"Edit ‘{group_name}’"},{group_name:t}),id:"rename-group-modal",primaryAction:function(){var e=!M();return o.default.createElement(m.Button,{onClick:f,disabled:!e},s.intl.formatMessage({id:"F5NZs5",defaultMessage:"Save changes"}))},onPrimaryAction:f,onSecondaryAction:_,onRequestClose:p,overlayClickClose:!0},o.default.createElement("div",{className:"update-group-modal-body"},o.default.createElement("div",null,h),o.default.createElement(l.Input,a.__assign({className:"group-name-input",id:"group-name-input",onPrimaryAction:f},n))))},t.RENAME_GROUP_URL="/groups_ajax/update_group",t.RenameGroupModalApp=function(e){var o=e.groupId,s=e.origGroupName,r=a.__rest(e,["groupId","origGroupName"]);return u.modalAjax({modal:t.RenameGroupModal,ajax:{url:t.RENAME_GROUP_URL,data:function(e){var t=e.groupNameField;return{group_id:o,new_name:t}},subject_user:p.Viewer.get_viewer().work_user},autoCloseOnError:!1,fields:{groupNameField:{fieldValue:s}}})(a.__assign({origGroupName:s},r))},t.showRenameGroupModal=function(e){return n.showModal(o.default.createElement(t.RenameGroupModalApp,a.__assign({},e)))}})),define("modules/clean/teams/modals/make_company_managed_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/viewer","modules/clean/teams/admin/modals/modal_ajax"],(function(e,t,a,o,s,r,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showMakeCompanyManagedModal=t.MakeCompanyManagedModalAction=t.MAKE_COMPANY_MANAGED_URL=t.MakeCompanyManagedModal=void 0,o=a.__importDefault(o),t.MakeCompanyManagedModal=function(e){e.groupId,e.groupName;var t=e.onRequestClose,a=void 0===t?function(){}:t,r=e.onPrimaryAction,i=void 0===r?function(){}:r,l=e.onSecondaryAction,u=void 0===l?function(){}:l,d=n.intl.formatMessage({id:"5397LL",defaultMessage:"Make company-managed?"}),m=n.intl.formatMessage({id:"J3G7RO",defaultMessage:"Make company-managed"}),p=n.intl.formatMessage({id:"/d7ogs",defaultMessage:"This will become a company-managed group, and admins will be responsible for adding and removing members."});return o.default.createElement(s.ActionUtilityModal,{title:d,primaryAction:m,onPrimaryAction:i,onSecondaryAction:u,onRequestClose:a},p)},t.MAKE_COMPANY_MANAGED_URL="/groups_ajax/change_to_admin_managed_type",t.MakeCompanyManagedModalAction=function(e){var o=e.groupId,s=e.groupName,r=a.__rest(e,["groupId","groupName"]);return l.modalAjax({modal:t.MakeCompanyManagedModal,ajax:{url:t.MAKE_COMPANY_MANAGED_URL,data:{group_id:o},subject_user:i.Viewer.get_viewer().work_user},notify:{successNotify:n.intl.formatMessage({id:"h5ZOYA",defaultMessage:"{group_name} is now company-managed"},{group_name:s})}})(a.__assign({groupId:o,groupName:s},r))},t.showMakeCompanyManagedModal=function(e){return r.showModal(o.default.createElement(t.MakeCompanyManagedModalAction,a.__assign({},e)))}})),define("modules/clean/groups/group_members_form",["require","exports","tslib","classnames","create-react-class","react","react-dom-factories","prop-types","lodash","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/analytics","modules/clean/contacts/contact","modules/clean/contacts/contact_token_state","modules/clean/contacts/tokenizer","modules/clean/contacts/types","modules/clean/react/input","modules/clean/viewer","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p,c,f,g,_,M,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),s=a.__importDefault(s),r=a.__importDefault(r),n=a.__importDefault(n),i=a.__importDefault(i),l=a.__importStar(l),u=a.__importStar(u),f=a.__importDefault(f),g=a.__importStar(g);var b=_.Viewer.get_viewer(),v=s.default({displayName:"GroupMembersForm",propTypes:{group:i.default.object,populatedContacts:i.default.arrayOf(i.default.instanceOf(m.Contact)),customClass:i.default.string,onChange:i.default.func,emailPlaceholder:i.default.string,messagePlaceholder:i.default.string,errorMessageSpaceFixed:i.default.bool,emailCheckerStore:i.default.object,includeCustomMessage:i.default.bool,disallowGroupMembers:i.default.bool,disallowCurrentUser:i.default.bool},getDefaultProps:function(){return{customClass:"",populatedContacts:[],emailPlaceholder:M.intl.formatMessage({id:"mU6Spv",defaultMessage:"Name or email"}),messagePlaceholder:M.intl.formatMessage({id:"Sj7Fsz",defaultMessage:"Add a message (optional)"}),includeCustomMessage:!0,disallowGroupMembers:!1,disallowCurrentUser:!1}},getInitialState:function(){return{errorMessage:null,groupUsersEmails:Array.from(this.props.group.users).map((function(e){return e.email}))}},fetchEmailsOfUsersInGroup:function(){var e=this;return u.WebRequest({url:"/groups_ajax/get_emails_of_users_in_group",data:{group_id:this.props.group.id},subject_user:b.work_user,success:function(t){if(e.isMounted()&&(t=JSON.parse(t)).data.emails.length>0)return e.setState({groupUsersEmails:t.data.emails})},error:function(){return h.Notify.error(M.intl.formatMessage({id:"7ojjS8",defaultMessage:"There was a problem please reopen the add-member window"}))}})},componentWillMount:function(){if(this.fetchEmailsOfUsersInGroup(),this.props.populatedContacts.length>0)return this._updateErrorMessage()},getContacts:function(){return this.refs.tokenizer.getContacts()},getFinalData:function(e){var t;this.refs.tokenizer.tokenizeAll();var a=this.getContacts();this.props.includeCustomMessage&&(t=this.refs.message.getValue());var o=l.filter(a,(function(e){return e.type===f.default.EMAIL})),s=l.map(o,(function(e){return{email:e.email,is_owner:!1}}));return this._updateErrorMessage(),e({emails:s,custom_message:t})},areAllContactsValid:function(){var e=this,t=this.refs.tokenizer.serializeInputData().tokens;return 0===t.length||l.every(t,(function(t){return e._validateContact(t).state===p.ContactTokenState.ok}))},isEmpty:function(){var e=this.refs.tokenizer.serializeInputData(),t=e.tokens,a=e.value;return 0===t.length&&0===a.length},_validateContact:function(e){var t={state:p.ContactTokenState.ok};return e.invalid?t={state:p.ContactTokenState.invalid,msg:M.intl.formatMessage({id:"85p8vn",defaultMessage:"One or more names or email addresses you entered are invalid."})}:this.props.disallowGroupMembers&&Array.from(this.state.groupUsersEmails).includes(e.email)?t={state:p.ContactTokenState.invalid,msg:M.intl.formatMessage({id:"P+eLkO",defaultMessage:"Member already exists in the group."})}:e.on_team||(t={state:p.ContactTokenState.invalid,msg:M.intl.formatMessage({id:"PVw1P4",defaultMessage:"This person isn’t on your team"})}),t},_updateErrorMessage:function(){for(var e=0,t=Array.from(this.refs.tokenizer.serializeInputData().tokens);e<t.length;e++){var a=t[e],o=this._validateContact(a),s=o.state,r=o.msg;if(s!==p.ContactTokenState.ok)return d.TeamsWebActionsLogger.log("groups_add_members_error",{error_reason:r}),void this.setState({errorMessage:r})}return this.setState({errorMessage:null})},onContentsChange:function(){return this._updateErrorMessage(),"function"==typeof this.props.onChange?this.props.onChange():void 0},render:function(){var e=this,t={"add-group-members-form":!0,"error-message-fixed":this.props.errorMessageSpaceFixed,"has-custom-message":this.props.includeCustomMessage};this.props.customClass&&(t[this.props.customClass]=!0);return n.default.div({className:o.default(t)},n.default.div({className:"error-message"},this.state.errorMessage),r.default.createElement(c.ContactsTokenizer,{ref:"tokenizer",user:b.work_user,placeholder:this.props.emailPlaceholder,onContentsChange:this.onContentsChange,autofocus:!0,populatedInputData:{tokens:this.props.populatedContacts,value:""},customContactValidator:this._validateContact,customContactFilter:function(t){var a=t.type===f.default.EMAIL&&t.team&&(t.dbx_team_id===b.team_dbtid||t.dbx_team_id===b.work_user.team_dbtid);return e.props.disallowGroupMembers&&(a=a&&!Array.from(e.state.groupUsersEmails).includes(t.email)),e.props.disallowCurrentUser&&(a=a&&t.email!==b.work_user.email),Boolean(a)}}),this.props.includeCustomMessage?r.default.createElement(g.textarea,{ref:"message",className:"custom-message","disable-errors":!0,"aria-label":"member emails",placeholder:this.props.messagePlaceholder}):void 0)}});t.default=v})),define("modules/clean/teams/admin/widgets/remove_user_for_limited_team_modal/remove_user_for_limited_team_modal",["require","exports","tslib","react","react-intl","modules/core/i18n","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/teams/admin/modals/modal_ajax","modules/clean/teams/admin/modals/fetch_ui_data_and_show_modal"],(function(e,t,a,o,s,r,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showRemoveUserForLimitedTeamModal=t.RemoveUserForLimitedTeamModalAction=t.SUCCESS_NOTIFY=t.REMOVE_USER_URL=t.RemoveUserForLimitedTeamModal=void 0,o=a.__importDefault(o),t.RemoveUserForLimitedTeamModal=function(e){var t=e.displayName,a=e.fName,i=e.teamName,l=e.email,u=e.isAdmin,d=e.isActive,m=e.onRequestClose,p=void 0===m?function(){}:m,c=e.onPrimaryAction,f=void 0===c?function(){}:c,g=e.onSecondaryAction,_=void 0===g?function(){}:g,M=d?r.intl.formatMessage({id:"aZS/dA",defaultMessage:"Remove member?"}):r.intl.formatMessage({id:"Bo6T4v",defaultMessage:"Remove pending member?"}),h=r.intl.formatMessage(t?s.defineMessage({id:"G7jTKb",defaultMessage:"{display_name} ({email})"}):s.defineMessage({id:"Rny2OZ",defaultMessage:"{email}"}),{display_name:t,email:l}),b=r.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"}),v=r.intl.formatMessage((function(e,t){return t&&e?s.defineMessage({id:"lhzTwh",defaultMessage:"{id_string} will lose access to all {team_name} groups. {first_name}’s account will be converted to a personal Dropbox."}):t&&!e?s.defineMessage({id:"zZwlxO",defaultMessage:"{id_string} will lose access to the {team_name} team folder and be removed from all {team_name} groups. {first_name}’s account will be converted to a personal Dropbox."}):s.defineMessage({id:"ujO/36",defaultMessage:"{id_string} will be removed from the members list. Any invitation or activation links you’ve sent will no longer work."})})(u,d),{id_string:h,team_name:i,first_name:a});return o.default.createElement(n.ActionUtilityModal,{title:M,primaryAction:b,onPrimaryAction:f,onSecondaryAction:_,onRequestClose:p},v)},t.REMOVE_USER_URL=function(e){return e?"/team/join_request/reject":"/team/manage/kick"},t.SUCCESS_NOTIFY=function(e){return e?r.intl.formatMessage({id:"+Ujbpb",defaultMessage:"Member removed."}):r.intl.formatMessage({id:"YgZF+b",defaultMessage:"Pending member removed."})},t.RemoveUserForLimitedTeamModalAction=function(e){var o=e.userId,s=e.displayName,r=e.fName,n=e.teamName,l=e.email,u=e.isAdmin,d=e.isActive,m=e.joinRequestStatus,p=a.__rest(e,["userId","displayName","fName","teamName","email","isAdmin","isActive","joinRequestStatus"]);return i.modalAjax({modal:t.RemoveUserForLimitedTeamModal,ajax:{url:t.REMOVE_USER_URL(m),data:{user_id:o}},notify:{successNotify:t.SUCCESS_NOTIFY(d)}})(a.__assign({userId:o,displayName:s,fName:r,teamName:n,email:l,isAdmin:u,isActive:d,joinRequestStatus:m},p))},t.showRemoveUserForLimitedTeamModal=function(e){l.fetchUserUiDataAndShowModal(e.userId,t.RemoveUserForLimitedTeamModalAction,e,{fname:"fName"})}})),define("modules/clean/teams/modals/team_admin_roles_modal",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/css","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/clean/teams/admin/modals/modal_ajax","spectrum/button","modules/clean/rondo/forms/index","modules/clean/teams/constants","modules/clean/react/sprite","modules/clean/viewer"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showTeamAdminRolesModal=t.TeamAdminRolesModalApp=t.TeamAdminRolesModalAppWithoutCSS=t.CHANGE_ADMIN_ROLE_URL=t.TeamAdminRolesModal=void 0;var f=(function(e){function t(t){var r=e.call(this,t)||this;return r._getOptionForRoleWithIllustration=function(e,t,s){var n=r._getAdminRoleName(e);return o.default.createElement("label",{htmlFor:"role_"+e},o.default.createElement("div",{className:"team-role-option"},o.default.createElement("div",{className:"team-role-input"},o.default.createElement(d.RadioButton,a.__assign({id:"role_"+e,className:"inputRadio"+e,value:e,name:"newAdminRole"},r.props.newAdminRole))),o.default.createElement("div",{className:"team-role-illustation"},o.default.createElement(p.Sprite,{group:"teams",name:s,alt:n})),o.default.createElement("div",{className:"team-role-desc"},o.default.createElement("span",{className:"team-role-title"},n),o.default.createElement("br",null),t)))},r._getOptionForRole=function(e,t,s){return o.default.createElement("label",{htmlFor:"role_"+e},o.default.createElement("div",{className:"team-role-option"},o.default.createElement("div",{className:"team-role-input"},o.default.createElement(d.RadioButton,a.__assign({id:"role_"+e,className:"inputRadio"+e,value:s.toString(),name:"newAdminRole"},r.props.newAdminRole))),o.default.createElement("div",{className:"team-role-desc"},o.default.createElement("span",{className:"team-role-title"},e),o.default.createElement("br",null),o.default.createElement("span",{className:"team-role-description"},t))))},r._isSameRole=function(){return r.props.newAdminRole.fieldValue===r.origAdminRoleString},r._getRolesModalTitle=function(){return r.props.isAdmin?s.intl.formatMessage({id:"5yjSod",defaultMessage:"Change {name}’s role"},{name:r.props.displayName}):s.intl.formatMessage({id:"MY92Te",defaultMessage:"Make {name} an admin"},{name:r.props.displayName})},r._getAdminRolesModalBody=function(){return o.default.createElement("div",{className:"team-role-modal"},o.default.createElement("a",{href:"/help/9056",target:"_blank",rel:"noreferrer"},s.intl.formatMessage({id:"t5Lipo",defaultMessage:"Learn about the different roles"})),o.default.createElement("br",null),o.default.createElement("br",null),r._getRoleList())},r._getRoleList=function(){var e=r.props,t=e.isAddAdminRoleDialogV2Enabled,a=e.teamAvailableRoles;if(t){var n=[];return a.forEach((function(e,t){n.push(r._getOptionForRole(e.name,e.description,e.role_id)),t<a.length-1&&n.push(o.default.createElement("div",{className:"team-role-divider"}))})),o.default.createElement("div",{className:"team-role-panel-v2"},n)}return o.default.createElement("div",{className:"team-role-panel"},r._getOptionForRoleWithIllustration(m.ADMIN_ROLE.SUPER.toString(),s.intl.formatMessage({id:"iaAy83",defaultMessage:"Manage everything for all admins and members"}),"team_admin"),o.default.createElement("div",{className:"team-role-divider"}),r._getOptionForRoleWithIllustration(m.ADMIN_ROLE.USER_MANAGEMENT.toString(),s.intl.formatMessage({id:"oWO0ug",defaultMessage:"Add, remove, and manage member accounts"}),"accounts_admin"),o.default.createElement("div",{className:"team-role-divider"}),r._getOptionForRoleWithIllustration(m.ADMIN_ROLE.HELPDESK.toString(),s.intl.formatMessage({id:"0y269U",defaultMessage:"Help members with limited tasks, including password reset"}),"support_admin"))},r._getConfirmChangesModalTitle=function(){return r.props.isAdmin?r.props.newAdminRole.fieldValue===m.ADMIN_ROLE.NONE.toString()?s.intl.formatMessage({id:"nuqQkL",defaultMessage:"Remove {name}’s admin role"},{name:r.props.displayName}):s.intl.formatMessage({id:"5yjSod",defaultMessage:"Change {name}’s role"},{name:r.props.displayName}):s.intl.formatMessage({id:"MY92Te",defaultMessage:"Make {name} an admin"},{name:r.props.displayName})},r._getConfirmChangesModalBodyTextForModalV2=function(){if(r.props.isAdmin){if(r.props.newAdminRole.fieldValue===m.ADMIN_ROLE.NONE.toString()){var e=(a=r._getAdminRole(r.origAdminRoleString))?a.name.toLowerCase():null;return s.intl.formatMessage({id:"aThimy",defaultMessage:"{name} won’t have access to the admin console or {role} permissions."},{name:r.props.displayName,role:e})}if(r._isSameRole()){var t=(n=r._getAdminRole(r.props.newAdminRole.fieldValue))?n.name:null;return s.intl.formatMessage({id:"A4hF74",defaultMessage:"{name} is already a {new_role}."},{name:r.props.displayName,new_role:t})}var a;t=(n=r._getAdminRole(r.props.newAdminRole.fieldValue))?n.name:null,e=(a=r._getAdminRole(r.origAdminRoleString))?a.name:null;return s.intl.formatMessage({id:"tiKa++",defaultMessage:"{name} will have a different set of admin permissions.{br}{br}<b>New role:</b> {new_role} admin{br}<b>Old role:</b> {old_role} admin"},{name:r.props.displayName,old_role:e,new_role:t,b:function(e){return o.default.createElement("b",null,e)},br:o.default.createElement("br",null)})}var n;t=(n=r._getAdminRole(r.props.newAdminRole.fieldValue))?n.name.toLowerCase():null;return s.intl.formatMessage({id:"0pot0F",defaultMessage:"{name} will have access to the admin console and {role_name} permissions."},{name:r.props.displayName,role_name:t})},r._getConfirmChangesModalBodyText=function(){if(r.props.isAdmin)return r.props.newAdminRole.fieldValue===m.ADMIN_ROLE.NONE.toString()?s.intl.formatMessage({id:"+fGoXc",defaultMessage:"{name} won’t have access to the admin console and won’t be able to manage other accounts. Are you sure you want to continue?"},{name:r.props.displayName}):r._isSameRole()?s.intl.formatMessage({id:"A4hF74",defaultMessage:"{name} is already a {new_role}."},{name:r.props.displayName,new_role:r._getAdminRoleName(r.props.newAdminRole.fieldValue)}):s.intl.formatMessage({id:"VMVrbc",defaultMessage:"Are you sure you want to change permissions for {name} from {old_role} to {new_role}?"},{name:r.props.displayName,old_role:r._getAdminRoleName(r.origAdminRoleString),new_role:r._getAdminRoleName(r.props.newAdminRole.fieldValue)});switch(r.props.newAdminRole.fieldValue){case m.ADMIN_ROLE.SUPER.toString():return s.intl.formatMessage({id:"xBHDnW",defaultMessage:"Team Admins can manage everything for all admins and members. Are you sure you want to continue?"});case m.ADMIN_ROLE.USER_MANAGEMENT.toString():return s.intl.formatMessage({id:"pRfx2F",defaultMessage:"User Management Admins can add, remove, and manage member accounts. Are you sure you want to continue?"});case m.ADMIN_ROLE.HELPDESK.toString():return s.intl.formatMessage({id:"k0bKME",defaultMessage:"Support Admins can help members with limited tasks, including password reset. Are you sure you want to continue?"});default:return}},r._getConfirmChangesModalBody=function(){return o.default.createElement("div",null,o.default.createElement("p",null,r.props.isAddAdminRoleDialogV2Enabled?r._getConfirmChangesModalBodyTextForModalV2():r._getConfirmChangesModalBodyText()))},r._goToConfirmChanges=function(){r.setState({isRoleSelectionPage:!1})},r._onLinkClick=function(){r.props.newAdminRole.actionFieldChange(m.ADMIN_ROLE.NONE.toString()),r.setState({isRoleSelectionPage:!1})},r._roleSelectionActionButton=function(){return r.props.isAdmin?o.default.createElement(u.Button,{onClick:r._goToConfirmChanges},s.intl.formatMessage({id:"ZPvZld",defaultMessage:"Change"})):o.default.createElement(u.Button,{onClick:r._goToConfirmChanges},s.intl.formatMessage({id:"YcxVqg",defaultMessage:"Add"}))},r._roleSelectionDismissButton=function(){return s.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})},r._confirmChangesActionButton=function(){return r.props.isAdmin?r.props.newAdminRole.fieldValue===m.ADMIN_ROLE.NONE.toString()?s.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"}):r._isSameRole()?function(){return o.default.createElement("div",null)}:s.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"}):s.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"})},r._confirmChangesDismissButton=function(){return r._isSameRole()&&r.props.isAdmin?s.intl.formatMessage({id:"W4An+g",defaultMessage:"Got it"}):s.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})},r._linkButton=function(){return r.state.isRoleSelectionPage&&r.props.isAdmin?s.intl.formatMessage({id:"wBdS/p",defaultMessage:"Remove admin role"}):void 0},r.state={isRoleSelectionPage:!0},r.origAdminRoleString=r.props.origAdminRole.toString(),r}return a.__extends(t,e),t.prototype._getAdminRoleName=function(e){return m.ADMIN_ROLE_NAMES[Number(e)]},t.prototype._getAdminRole=function(e){for(var t=0,a=this.props.teamAvailableRoles;t<a.length;t++){var o=a[t];if(o.role_id==Number(e))return o}return null},t.prototype.render=function(){var e=this,t=this.props,a=t.onPrimaryAction,s=t.onSecondaryAction,r=t.onRequestClose,i=this.state.isRoleSelectionPage,l=i?this._getRolesModalTitle():this._getConfirmChangesModalTitle(),u=i?this._getAdminRolesModalBody():this._getConfirmChangesModalBody(),d=i?function(){return e._roleSelectionActionButton()}:this._confirmChangesActionButton(),m=i?this._roleSelectionDismissButton():this._confirmChangesDismissButton(),p=this._linkButton();return o.default.createElement(n.ActionUtilityModal,{className:"main-team-role",title:l,id:"team-admin-roles=modal",primaryAction:d,secondaryAction:m,onPrimaryAction:a,onSecondaryAction:s,onRequestClose:r,link:p,onLink:this._onLinkClick},u)},t})((o=a.__importDefault(o)).default.Component);t.TeamAdminRolesModal=f,t.CHANGE_ADMIN_ROLE_URL="/account/team/set_admin_status",t.TeamAdminRolesModalAppWithoutCSS=function(e){var o=e.userId,r=e.origAdminRole,n=e.displayName,i=a.__rest(e,["userId","origAdminRole","displayName"]);return l.modalAjax({modal:f,ajax:{url:t.CHANGE_ADMIN_ROLE_URL,data:function(e){var t=e.newAdminRole;return{user_id:o,on:t!==m.ADMIN_ROLE.NONE.toString()?"yes":"no",role:t}},subject_user:c.Viewer.get_viewer().work_user},fields:{newAdminRole:{fieldValue:r!==m.ADMIN_ROLE.NONE?r.toString():"0"}},notify:{successNotify:s.intl.formatMessage({id:"cK1WRa",defaultMessage:"Changed {name}'s role."},{name:n}),errorNotify:s.intl.formatMessage({id:"9alsnN",defaultMessage:"Couldn't change {name}'s role."},{name:n})}})(a.__assign({userId:o,origAdminRole:r,displayName:n},i))},t.TeamAdminRolesModalApp=r.requireCssWithComponent(t.TeamAdminRolesModalAppWithoutCSS,["/static/css/teams/admin_team_modals-vflijCiW6.css"]),t.showTeamAdminRolesModal=function(e){return i.showModal(o.default.createElement(t.TeamAdminRolesModalApp,a.__assign({},e)))}})),define("modules/clean/groups/single_group_page",["require","exports","tslib","create-react-class","react","react-dom-factories","prop-types","dig-components/typography","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/analytics","modules/clean/avatar/group_avatar","modules/clean/css","modules/clean/groups/add_group_members_modal","modules/clean/groups/group_member_list","modules/clean/teams/modals/remove_user_from_group_modal","modules/clean/teams/modals/rename_group_modal","modules/clean/groups/switch_to_member_managed_group_modal","modules/clean/groups/utils","modules/clean/react/button","modules/clean/react/image","modules/core/browser","modules/clean/react/modal","modules/clean/static_urls","modules/clean/viewer","modules/core/i18n","dig-components/text_fields"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p,c,f,g,_,M,h,b,v,y,A,w,R,N){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),s=a.__importDefault(s),r=a.__importDefault(r),n=a.__importDefault(n),l=a.__importStar(l),d=a.__importDefault(d),m=a.__importStar(m),p=a.__importDefault(p),_=a.__importDefault(_),M=a.__importDefault(M),h=a.__importStar(h),v=a.__importStar(v);var C=s.default.createElement,S=w.Viewer.get_viewer(),E=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showRenameGroupModal=function(){return g.showRenameGroupModal({groupId:t.props.group.id,origGroupName:t.props.group.name,success:function(){t.props.onGroupChanged(!0,null)},error:function(e,a){M.default.isGroupDeleted(e)&&(a(),M.default.redirectToGroupsPage(t.props.insideAdminConsole),t.props.onGroupChanged(!0,null))}})},t.showAddMembersModal=function(){return y.Modal.showInstance(s.default.createElement(p.default,{group:t.props.group,insideAdminConsole:t.props.insideAdminConsole,onGroupChanged:t.props.onGroupChanged}))},t.renderGroupInfo=function(){var e;if(t.props.group.is_team_group)e=R.intl.formatMessage({id:"Vo1r9t",defaultMessage:"This group was created automatically and includes invited members. To change who’s in the group, admins can add or remove members of {team_name}"},{team_name:t.props.teamName});else{var a=void 0;if(t.props.group.is_admin_managed)a=t.props.teamName;else if(t.props.group.owners.length>0){for(var o=[],s=0,n=Array.from(t.props.group.owners);s<n.length;s++){var i=n[s];o.push(i.name)}a=o.join(", ")}else a="-";e=R.intl.formatMessage({id:"ej4A0X",defaultMessage:"Managed by {owners}"},{owners:a})}return t.props.insideAdminConsole?r.default.div({className:"current-location"},r.default.span({className:"group-info-container"},C(d.default,{group:t.props.group,dimension:48,optionalClass:"u-mar-right-s"})),r.default.span({className:"group-info"},r.default.span({className:"group-name-container"},r.default.span({className:"group-name"},t.props.group.name)),r.default.span({className:"group-managers"},e))):[r.default.h2({className:"group-name"},R.intl.formatMessage({id:"DrXtUG",defaultMessage:"Information"})),r.default.h3({className:"group-managers u-mar-bottom-xs"},e)]},t.onAdminManaged=function(){return t.props.onGroupChanged(!0,null)},t.onMemberManaged=function(e){var a=0;t.props.group.is_admin_managed=!1,t.props.group.owners=[];for(var o=0,s=Array.from(t.props.group.users);o<s.length;o++){var r=s[o];Array.from(e).includes(r.email)&&(r.is_owner=!0,t.props.group.owners.push(r),a+=1)}var n=a<e.length;return t.props.onGroupChanged(n,t.props.group)},t.showSwitchToMemberManagedGroupModal=function(){return y.Modal.showInstance(s.default.createElement(_.default,{group:t.props.group,onMemberManaged:t.onMemberManaged,insideAdminConsole:t.props.insideAdminConsole}))},t.renderNonOwnerMemberButtons=function(){return s.default.createElement(h.button,{className:"leave-group-button",importance:"tertiary",onClick:function(){return f.showRemoveUserFromGroupModal({groupId:t.props.group.id,groupName:t.props.group.name,userId:S.work_user.id,userDisplayName:S.work_user.display_name,removeSelf:!0,onPrimaryAction:function(){v.set_hash("groups")}})}},R.intl.formatMessage({id:"kleJEv",defaultMessage:"Leave group"}))},t}return a.__extends(t,e),t.prototype.render=function(){return r.default.div({className:"single-group-header"},r.default.div({className:"group-header"},this.renderGroupInfo()))},t.displayName="SingleGroupHeader",t.propTypes={group:n.default.object,canHaveAdminUi:n.default.bool,teamName:n.default.string,onGroupChanged:n.default.func,groupControlledByAdmin:n.default.bool,isLimitedTeam:n.default.bool,insideAdminConsole:n.default.bool,isMaestroDesign:n.default.bool},t})(s.default.Component),D=o.default({displayName:"SingleGroupPage",propTypes:{groupId:n.default.string,canHaveAdminUi:n.default.bool,teamName:n.default.string,groupControlledByAdmin:n.default.bool,isLimitedTeam:n.default.bool,insideAdminConsole:n.default.bool,isMaestroDesign:n.default.bool,onNewGroupFetched:n.default.func},memberInputRef:s.default.createRef(),getInitialState:function(){return{group:void 0}},componentWillMount:function(){return this.fetchGroup(this.props.groupId)},componentWillReceiveProps:function(e){if(this.props.groupId!==e.groupId)return this.setState({group:void 0}),this.fetchGroup(e.groupId)},fetchGroup:function(e,t,a,o,s){var r=this;return void 0===t&&(t=0),void 0===a&&(a="display_name_lower"),void 0===o&&(o=1),void 0===s&&(s=null),this.setState({loading:!0,search_query:s}),l.WebRequest({url:"/groups_ajax/get_group_info",data:{group_id:e,offset:t,limit:M.default.MAX_ROWS_TO_FETCH_FROM_SERVER,sort_column:a,sort_direction:o,search_query:s},subject_user:S.work_user,success:function(e){if(r.isMounted()){if(e=JSON.parse(e),r.state.search_query!==s)return;return r.setState({group:e.data,loading:!1}),"function"==typeof r.props.onNewGroupFetched?r.props.onNewGroupFetched(e.data):void 0}},error:function(e){return M.default.redirectToGroupsPage(r.props.insideAdminConsole)}})},onUserTextChange:function(e){var t=this,a=e.target.value;window.clearTimeout(this.searchTimeout),a.trim().length>0||0===a.length?this.searchTimeout=window.setTimeout((function(){return a.length>0?t.fetchGroup(t.props.groupId,0,null,null,a):t.fetchGroup(t.props.groupId)}),500):this.memberInputRef.current.value=""},renderSpinner:function(){return r.default.div({className:"groups-spinner"},s.default.createElement(b.Image,{src:A.static_url("/static/images/icons/ajax-loading-small-blue-vflVk_QNP.gif"),srcHiRes:A.static_url("/static/images/icons/ajax-loading-small-blue@2x-vfl14X6Ll.gif"),alt:R.intl.formatMessage({id:"jybGUg",defaultMessage:"Loading"})}))},onGroupChanged:function(e,t,a,o){return void 0===a&&(a=null),void 0===o&&(o=null),e?this.fetchGroup(this.props.groupId,0,a,o,this.state.search_query):(this.setState({group:t}),"function"==typeof this.props.onNewGroupFetched?this.props.onNewGroupFetched(t):void 0)},showRenameGroupModal:function(){return null!=this.refs.single_group_header?this.refs.single_group_header.showRenameGroupModal():void 0},showAddMembersModal:function(){var e={group_owner_ids:this.state.group.users.filter((function(e){return e.is_owner})).map((function(e){return e.user_id})),team_id:this.state.group.team_id,team_type:S.team_type,group_id:this.props.groupId};return u.TeamsWebActionsLogger.log("groups_add_members_clicked",e),null!=this.refs.single_group_header?this.refs.single_group_header.showAddMembersModal():void 0},showSwitchToMemberManagedGroupModal:function(){return null!=this.refs.single_group_header?this.refs.single_group_header.showSwitchToMemberManagedGroupModal():void 0},onAdminManaged:function(){return null!=this.refs.single_group_header?this.refs.single_group_header.onAdminManaged():void 0},render:function(){return this.state.loading&&!this.state.group?this.renderSpinner():(m.require_css("/static/css/react/contacts_tokenizer-vflPxjRxg.css"),r.default.div({className:"single-group-view"},s.default.createElement(E,{ref:"single_group_header",group:this.state.group,canHaveAdminUi:this.props.canHaveAdminUi,teamName:this.props.teamName,onGroupChanged:this.onGroupChanged,groupControlledByAdmin:this.props.groupControlledByAdmin,isLimitedTeam:this.props.isLimitedTeam,insideAdminConsole:this.props.insideAdminConsole,isMaestroDesign:this.props.isMaestroDesign}),r.default.span({className:"team-admin-maestro-search"},s.default.createElement(i.Text,{tagName:"div",variant:"label",color:"faint",size:"small",className:"maestro-search-outer-label"},R.intl.formatMessage({id:"b5cAXX",defaultMessage:"Search group members"})),s.default.createElement("span",{className:"member-maestro-find-panel"},s.default.createElement(N.TextInput,{ref:this.memberInputRef,name:"search-input",onChange:this.onUserTextChange,placeholder:R.intl.formatMessage({id:"fZfcZ4",defaultMessage:"Name or email"}),className:"text-input-input"}))),this.state.loading?this.renderSpinner():s.default.createElement(c.MemberList,{group:this.state.group,canHaveAdminUi:this.props.canHaveAdminUi,onGroupChanged:this.onGroupChanged,isMaestroDesign:!0,insideAdminConsole:this.props.insideAdminConsole,search_query:this.state.search_query})))}});t.default=D})),define("modules/clean/groups/group_member_list",["require","exports","tslib","classnames","create-react-class","react","react-dom-factories","prop-types","dig-components/typography","spectrum/overflow_button","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/avatar/avatar_with_default","modules/clean/avatar/initials_avatar","modules/clean/teams/modals/remove_user_from_group_modal","modules/clean/teams/modals/change_group_owner_modal","modules/clean/groups/utils","modules/clean/react/bubble_menu","modules/clean/react/button","modules/core/browser","modules/clean/react/dbox_app_promo","modules/clean/react/sprite","modules/clean/react/table","modules/clean/viewer","modules/core/i18n","modules/core/notify","modules/core/user_i18n","modules/clean/react/sticky_position"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p,c,f,g,_,M,h,b,v,y,A,w,R,N,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemberList=void 0,o=a.__importDefault(o),s=a.__importDefault(s),r=a.__importDefault(r),n=a.__importDefault(n),i=a.__importDefault(i),d=a.__importStar(d),m=a.__importDefault(m),g=a.__importDefault(g),M=a.__importStar(M),h=a.__importStar(h),y=a.__importDefault(y),N=a.__importStar(N);var S=A.Viewer.get_viewer(),E=s.default({displayName:"MemberList",propTypes:{group:i.default.object,canHaveAdminUi:i.default.bool,onGroupChanged:i.default.func,isMaestroDesign:i.default.bool,insideAdminConsole:i.default.bool,search_query:i.default.string},viewerIsOwner:function(){return this.props.group.is_owner},canManageGroup:function(){return!this.props.group.is_team_group&&(this.props.canHaveAdminUi||this.viewerIsOwner())},onRemoveUserSuccess:function(e){var t,a,o=this.props.group.user_count+this.props.group.pending_req_count-1;return 0!=(t=o,a=g.default.MAX_ROWS_PER_PAGE,((t=+t)%(a=+a)+a)%a)||this.props.isMaestroDesign?this.refs.members.forceRefresh():this.props.onGroupChanged(!0,this.props.group)},onClickRemoveUser:function(e){var t=this,a=e.user_id===S.work_user.id;return c.showRemoveUserFromGroupModal({groupId:this.props.group.id,groupName:this.props.group.name,userId:e.user_id,userDisplayName:e.name?e.name:e.email,removeSelf:a,onPrimaryAction:function(){a?h.set_hash("groups"):t.onRemoveUserSuccess(e)}})},onClickApproveJoinReq:function(e){var t=this;return d.WebRequest({url:"/groups_ajax/approve",data:{group_id:this.props.group.id,requesting_user_id:e.user_id},subject_user:S.work_user,success:function(e){return R.Notify.success(w.intl.formatMessage({id:"0D0tb3",defaultMessage:"Request approved."})),t.refs.members.forceRefresh()},error:function(e){if(g.default.isGroupDeleted(e))return g.default.redirectToGroupsPage(t.props.insideAdminConsole)}})},onClickRemoveJoinReq:function(e){var t=this;return d.WebRequest({url:"/groups_ajax/remove",data:{group_id:this.props.group.id,requesting_user_id:e.user_id},subject_user:S.work_user,success:function(e){return R.Notify.success(w.intl.formatMessage({id:"/8b+8B",defaultMessage:"Request removed."})),t.refs.members.forceRefresh()},error:function(e){if(g.default.isGroupDeleted(e))return g.default.redirectToGroupsPage(t.props.insideAdminConsole)}})},onClickMakeGroupOwner:function(e){var t=this;return f.showChangeGroupOwnerModal({userId:e.user_id,userDisplayName:e.name,groupId:this.props.group.id,enableGroupOwnerPermissions:!0,success:function(a){e.is_owner=!0;var o={name:e.name,email:e.email};return t.props.group.owners.push(o),t.props.onGroupChanged(!1,t.props.group)},error:function(e){if(g.default.isGroupDeleted(e))return g.default.redirectToGroupsPage(t.props.insideAdminConsole)}})},onClickRemoveGroupOwner:function(e){var t=this;return f.showChangeGroupOwnerModal({userId:e.user_id,userDisplayName:e.name,groupId:this.props.group.id,enableGroupOwnerPermissions:!1,success:function(a){return e.is_owner=!1,t.props.group.owners=t.props.group.owners.filter((function(t){return t.email!==e.email})),e.user_id===S.work_user.id&&(t.props.group.is_owner=!1),t.props.onGroupChanged(!1,t.props.group)},error:function(e){if(g.default.isGroupDeleted(e))return g.default.redirectToGroupsPage(t.props.insideAdminConsole)}})},renderSettingsForPendingMember:function(e){if(this.props.isMaestroDesign){var t=String.fromCharCode("176"),a=n.default.button({className:"settings-button"},t+t+t);return n.default.div({className:"approve-options-container u-mar-top-xxs"},r.default.createElement(M.button,{importance:"secondary",className:"approve-join-req-button",onClick:this.onClickApproveJoinReq.bind(this,e)},w.intl.formatMessage({id:"eyx/FG",defaultMessage:"Approve"})),r.default.createElement(_.BubbleMenu,{targetButton:a,position:C.StickyPosition.BOTTOM_LEFT,shouldShowArrow:!1,verticalDisplacement:-3,items:[r.default.createElement(_.BubbleMenuItem,{onClick:this.onClickRemoveJoinReq.bind(this,e)},w.intl.formatMessage({id:"LFX+Vf",defaultMessage:"Remove request"}))]}))}var o=n.default.button({className:"remove-request-button",onClick:this.onClickRemoveJoinReq.bind(this,e)},n.default.img({src:"/static/images/x-vflYKfRuL.png",alt:w.intl.formatMessage({id:"lrQa4y",defaultMessage:"Remove join request"})}));return n.default.span({className:"pending-request-buttons"},r.default.createElement(b.Actionable,{handler:this.onClickApproveJoinReq.bind(this,e)},n.default.button({className:"button-secondary button-small action-button approve-join-req-button"},w.intl.formatMessage({id:"eyx/FG",defaultMessage:"Approve"}))),o)},renderSettingsForMember:function(e){if(this.props.group.is_admin_managed)return n.default.button({className:"remove-user-button",onClick:this.onClickRemoveUser.bind(this,e)},n.default.img({src:"/static/images/x-vflYKfRuL.png",alt:w.intl.formatMessage({id:"HqEpaM",defaultMessage:"Remove user"})}));var t=void 0;t=this.props.isMaestroDesign?r.default.createElement(u.OverflowButton,{className:"settings-button","aria-label":"More links"}):n.default.button({className:"settings-button"},r.default.createElement(v.Sprite,{group:"web",name:"gear",alt:w.intl.formatMessage({id:"/fH0Wt",defaultMessage:"Member settings"})}));var a=[r.default.createElement(_.BubbleMenuItem,{onClick:this.onClickRemoveUser.bind(this,e)},w.intl.formatMessage({id:"HqEpaM",defaultMessage:"Remove user"}))];return e.is_owner?a.push(r.default.createElement(_.BubbleMenuItem,{onClick:this.onClickRemoveGroupOwner.bind(this,e)},w.intl.formatMessage({id:"E7Mnxf",defaultMessage:"Remove manager permissions"}))):e.can_be_owner&&a.push(r.default.createElement(_.BubbleMenuItem,{onClick:this.onClickMakeGroupOwner.bind(this,e)},w.intl.formatMessage({id:"G76Bc1",defaultMessage:"Make manager"}))),r.default.createElement(_.BubbleMenu,{targetButton:t,position:C.StickyPosition.BOTTOM_LEFT,shouldShowArrow:!1,verticalDisplacement:-5,items:a})},columnTypes:{displayName:function(e){var t=this;return{field:"display_name",header:w.intl.formatMessage({id:"cJojIg",defaultMessage:"Name"}),classes:{"display-name-column":!0},width:e,sortable:!this.props.search_query,render:function(e){var a=o.default({"u-mar-right-s":!0,"u-mar-left-xs":!t.props.isMaestroDesign,"u-mar-left-s":t.props.isMaestroDesign});return[r.default.createElement(m.default,{dimension:t.props.isMaestroDesign?32:24,photoUrl:e.photo_url,optionalClass:a,defaultAvatar:r.default.createElement(p.InitialsAvatarWithColorDerivedFromName,{dimension:t.props.isMaestroDesign?32:24,initials:N.getInitials(e.name||e.email),name:e.name,shape:"CIRCLE",optionalClass:a})}),n.default.span({className:t.props.isMaestroDesign?"user-info":"user-name"},n.default.span({className:o.default("user-name-part",{pending:e.is_pending,"user-info__text":t.props.isMaestroDesign})},e.name?e.name:"-"),t.props.isMaestroDesign?n.default.div({className:"user-info__subtext"},e.email):n.default.span({className:"user-status"},e.is_owner?" · "+w.intl.formatMessage({id:"ur4wUO",defaultMessage:"Manager"}):e.is_pending?" · "+w.intl.formatMessage({id:"lvYIwW",defaultMessage:"Pending"}):void 0))]}}},userEmail:function(e){return{field:"email",header:w.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"}),classes:{"email-column":!0},width:e,sortable:!this.props.search_query,render:function(e){return n.default.span({className:"user-email"},n.default.span({className:o.default({pending:e.is_pending})},e.email))}}},userStatus:function(e){return{field:"member_type",header:w.intl.formatMessage({id:"uufVvn",defaultMessage:"Status"}),classes:{"user-status-column":!0},width:e,initialSortDir:y.default.DESC_DIR,sortable:!this.props.search_query,render:function(e){return e.is_owner?w.intl.formatMessage({id:"ur4wUO",defaultMessage:"Manager"}):e.is_pending?w.intl.formatMessage({id:"lvYIwW",defaultMessage:"Pending"}):w.intl.formatMessage({id:"aFPJim",defaultMessage:"Member"})}}},joinedDate:function(e){var t=this;return{field:"localized_joined_ts",header:w.intl.formatMessage({id:"Q6HGJm",defaultMessage:"Joined"}),width:e,sortable:!this.props.search_query,render:function(e){return t.props.isMaestroDesign&&e.is_pending?n.default.span({className:"pending-request-buttons"},r.default.createElement(b.Actionable,{handler:t.onClickApproveJoinReq.bind(t,e)},n.default.button({className:"button-secondary button-small action-button approve-join-req-button"},w.intl.formatMessage({id:"eyx/FG",defaultMessage:"Approve"})))):e.localized_joined_ts}}},settings:function(e){var t=this;return{width:e,classes:{"settings-column":!0},sortable:!1,render:function(e){return t.canManageGroup()?e.is_pending?t.renderSettingsForPendingMember(e):t.renderSettingsForMember(e):""}}}},componentWillMount:function(){return this.columnTypes=(function(e,t){var a={};for(var o in e){var s=e[o];a[o]=s.bind(t)}return a})(this.columnTypes,this)},tableRowClasses:function(e){return this.props.isMaestroDesign&&e.is_pending?{"pending-member-row":!0}:{}},getGroupMembers:function(e,t){var a=this;return d.WebRequest({url:"/groups_ajax/get_group_info",data:{group_id:this.props.group.id,offset:e.offset,limit:e.limit,sort_column:e.sortColumn,sort_direction:e.sortDir,search_query:this.props.search_query},subject_user:S.work_user,success:function(e){var o=(e=JSON.parse(e)).data.pending_req_users.concat(e.data.users);return t(null,{rows:o,total:e.data.user_count+e.data.pending_req_count}),a.props.onGroupChanged(!1,e.data)},error:function(e){return g.default.redirectToGroupsPage(a.props.insideAdminConsole)}})},renderMemberTable:function(){var e,t=this.props.group.pending_req_users.concat(this.props.group.users);return e=this.props.isMaestroDesign?this.canManageGroup?[this.columnTypes.displayName("50%"),this.columnTypes.userStatus("25%"),this.columnTypes.settings("25%")]:[this.columnTypes.displayName("50%"),this.columnTypes.userStatus("50%")]:this.canManageGroup?[this.columnTypes.displayName(300),this.columnTypes.userEmail(250),this.columnTypes.joinedDate(147),this.columnTypes.settings(103)]:[this.columnTypes.displayName(300),this.columnTypes.userEmail(250),this.columnTypes.joinedDate(250)],r.default.createElement(y.default,{ref:"members",columns:e,initialData:{rows:t,total:this.props.group.user_count+this.props.group.pending_req_count},initialSortColumn:0,emptyMessage:this.props.search_query?w.intl.formatMessage({id:"L5UkRT",defaultMessage:"No members found"}):w.intl.formatMessage({id:"PsDrag",defaultMessage:"This group has no members."}),rowsPerPage:g.default.MAX_ROWS_PER_PAGE,paginatorClasses:this.props.isMaestroDesign?"u-mar-top-xs":"",infiniteScroll:this.props.isMaestroDesign,classes:{"grey-style":!0},rowClasses:this.tableRowClasses,rowsPerRequestForInfiniteScroll:g.default.MAX_ROWS_TO_FETCH_FROM_SERVER,onRequestData:this.getGroupMembers})},render:function(){return n.default.div({className:"member-list-container"},n.default.div({className:"group-user-info"},this.props.isMaestroDesign&&!this.props.insideAdminConsole||this.props.search_query?void 0:r.default.createElement(l.Text,{className:"member-count"},w.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:this.props.group.user_count}))),this.renderMemberTable(),this.props.search_query&&this.props.group.has_more?n.default.div({className:"more-search-results"},w.intl.formatMessage({id:"Qt557N",defaultMessage:"We found more members than we can display. Don’t see who you’re looking for? Try narrowing your search."})):void 0)}});t.MemberList=E})),define("modules/clean/teams/limited_team_tooltip_runner",["require","exports","tslib","immutable","react","react-dom","react-dom-factories","prop-types","lodash","jquery","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/react/bubble","modules/clean/react/css","modules/clean/static_urls","modules/core/exception"],(function(e,t,a,o,s,r,n,i,l,u,d,m,p,c,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipSpec=t.LimitedTeamTooltipRunner=void 0,o=a.__importStar(o),s=a.__importDefault(s),r=a.__importStar(r),n=a.__importDefault(n),i=a.__importDefault(i),l=a.__importStar(l),u=a.__importDefault(u),d=a.__importStar(d),m=a.__importDefault(m);var g=s.default.createElement,_=o.Record({heading:"",body:"",buttonText:"",arrowDirection:null,cssSelector:"",imageHref:"",imageHrefHires:"",imageHeight:"",imageWidth:null,onButtonClick:null,onButtonClickImmediate:null});t.TooltipSpec=_;var M=function(e,t,a){var o,s=Object.keys(e.tooltipSpecs);if(l.difference(e[t],s).length&&(o="Invalid prop "+t+" supplied to "+a+". All "+t+" values must exist in tooltipSpecs"),e[t]||(o="Prop "+t+" must be supplied to "+a+"."),o)return new Error(o)},h=(function(e){function t(t){var a=e.call(this,t)||this;return a.state={currentStepNumber:a.props.initialServerStep-a.props.serverStepOffset,waitingForServerResponse:!1},a.BUBBLE_WIDTH=250,a._initBubbleTracking=function(){return a._setBubbleLocation(),u.default(window).resize(a._setBubbleLocation)},a._specForStepNumber=function(e){return a.props.tooltipSpecs[a.props.tooltipSpecOrder[e]]},a._recordStepSeen=function(e){return d.WebRequest({url:"/team/onboarding_event",data:{stage:a.state.currentStepNumber+a.props.serverStepOffset},success:e})},a._recordAndAdvance=function(){if(!a.state.waitingForServerResponse){a.setState({waitingForServerResponse:!0});var e=a._specForStepNumber(a.state.currentStepNumber);return"function"==typeof e.onButtonClickImmediate&&e.onButtonClickImmediate(),a._recordStepSeen((function(t){var o=parseInt(JSON.parse(t).next_state);if(a.state.currentStepNumber===a.props.tooltipSpecOrder.length-1)return a.props.lastTooltipDismissedCb(o);var s=function(){return a.setState({currentStepNumber:o-a.props.serverStepOffset,waitingForServerResponse:!1}),"function"==typeof a.props.onStepAdvancedCb?a.props.onStepAdvancedCb(o):void 0};return e.onButtonClick?e.onButtonClick(s):s()}))}},a._setBubbleLocation=a._setBubbleLocation.bind(a),a}return a.__extends(t,e),t.prototype.componentDidMount=function(){return"complete"===document.readyState?this._initBubbleTracking():u.default(window).load(this._initBubbleTracking)},t.prototype.componentDidUpdate=function(){return this._setBubbleLocation()},t.prototype.componentWillUnmount=function(){return u.default(window).off("resize",this._setBubbleLocation)},t.prototype._setBubbleLocation=function(){var e,t,a=this._specForStepNumber(this.state.currentStepNumber);f.assert([m.default.ARROW.TOP,m.default.ARROW.LEFT,m.default.ARROW.LEFT_TOP].includes(a.arrowDirection),"trying to setBubbleLocation with unsupported arrow direction. Please add code for computing bubble location");var o=u.default(".react-bubble-box__arrow-border"),s=u.default(a.cssSelector);if(s.length){var n=u.default(r.findDOMNode(this.refs.tooltipBubble)),i=s.offset(),l=n.offsetParent().offset(),d=i.left-l.left,p=i.top-l.top,c=function(e){return Math.floor(e.outerWidth()/2)},g=function(e){return Math.floor(e.outerHeight()/2)};switch(a.arrowDirection){case m.default.ARROW.TOP:var _=o.outerHeight();_>40&&(_=18),e=d-c(n)+c(s),t=p+s.outerHeight()+_;break;case m.default.ARROW.LEFT:var M=o.outerWidth();M>40&&(M=18),e=d+s.outerWidth()+M,t=p-g(n)+g(s);break;case m.default.ARROW.LEFT_TOP:(M=o.outerWidth())>40&&(M=18),e=d+s.outerWidth()+M,t=p-g(s)}return n.css({top:t,left:e,visibility:"visible"})}},t.prototype.render=function(){var e=this._specForStepNumber(this.state.currentStepNumber);return n.default.div({className:"limited-team-tooltips"},g(m.default,{ref:"tooltipBubble",arrow:e.arrowDirection,className:"limited-team-tooltips__bubble",style:{position:"absolute",width:this.BUBBLE_WIDTH,visibility:"hidden"}},n.default.div({className:"limited-team-tooltips__bubble-contents"},n.default.img({src:c.static_url(e.imageHref),srcHiRes:c.static_url(e.imageHrefHires||e.imageHref),className:"limited-team-tooltips__bubble-image",width:e.imageWidth||.84*this.BUBBLE_WIDTH,height:e.imageHeight,alt:""}),n.default.h2({},e.heading),n.default.p({},e.body),n.default.button({className:"button-primary limited-team-tooltips__bubble-button",onClick:this._recordAndAdvance},e.buttonText))))},t.displayName="LimitedTeamTooltipRunner",t.propTypes={initialServerStep:i.default.number.isRequired,serverStepOffset:i.default.number.isRequired,tooltipSpecs:i.default.objectOf(i.default.instanceOf(_)).isRequired,tooltipSpecOrder:M,lastTooltipDismissedCb:i.default.func,onStepAdvancedCb:i.default.func},t})(s.default.Component),b=p.requireCssWithComponent(h,["/static/css/react/bubble_box-vflhusCtq.css"]);t.LimitedTeamTooltipRunner=b})),define("modules/clean/teams/limited_team_tooltips",["require","exports","tslib","create-react-class","react","prop-types","modules/clean/react/bubble","modules/clean/teams/limited_team_tooltip_runner","modules/core/browser","modules/core/i18n"],(function(e,t,a,o,s,r,n,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),s=a.__importDefault(s),r=a.__importDefault(r),n=a.__importDefault(n),l=a.__importStar(l);var d=s.default.createElement,m=o.default({displayName:"LimitedTeamTooltips",propTypes:{onboardingState:r.default.number.isRequired,lastTooltipDismissedCb:r.default.func},_getTooltipSpecs:function(){return{TEAM_TAB:new i.TooltipSpec({heading:u.intl.formatMessage({id:"kH07jA",defaultMessage:"Manage membership"}),body:u.intl.formatMessage({id:"O2g73l",defaultMessage:"Invite people, remove members, and customize your work Dropbox here."}),arrowDirection:n.default.ARROW.LEFT,buttonText:u.intl.formatMessage({id:"vJgZg+",defaultMessage:"Next"}),cssSelector:".team-nav-item",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_manage-vflXw6tGQ.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_manage@2x-vflS2wbhg.png",imageHeight:130,onButtonClick:function(){return l.redirect("/team")}}),INVITE_MEMBERS:new i.TooltipSpec({heading:u.intl.formatMessage({id:"dpTWyj",defaultMessage:"Invite more people"}),body:u.intl.formatMessage({id:"UjpizQ",defaultMessage:"Invite coworkers to join your work Dropbox here."}),arrowDirection:n.default.ARROW.TOP,buttonText:u.intl.formatMessage({id:"vJgZg+",defaultMessage:"Next"}),cssSelector:".invite-button",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_invite-vflwGI3rs.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_invite@2x-vflujxc7r.png",imageHeight:130}),GROUPS:new i.TooltipSpec({heading:u.intl.formatMessage({id:"dVxcsW",defaultMessage:"Create and view groups"}),body:u.intl.formatMessage({id:"4aMOmP",defaultMessage:"Keep things organized by adding people to groups."}),arrowDirection:n.default.ARROW.TOP,buttonText:u.intl.formatMessage({id:"vJgZg+",defaultMessage:"Next"}),cssSelector:"#tab_team-tab-groups",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_groups-vflUdtiBT.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_groups@2x-vflYWShtX.png",imageHeight:130}),SETTINGS:new i.TooltipSpec({heading:u.intl.formatMessage({id:"iRcegI",defaultMessage:"Customize settings"}),body:u.intl.formatMessage({id:"5qtD+j",defaultMessage:"Update Paper sharing settings, change the name of your Dropbox, and more."}),arrowDirection:n.default.ARROW.TOP,buttonText:u.intl.formatMessage({id:"vJgZg+",defaultMessage:"Next"}),cssSelector:".settings-button",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_settings-vflTnLAOr.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_settings@2x-vflClprJl.png",imageHeight:130}),PAPER:new i.TooltipSpec({heading:u.intl.formatMessage({id:"neBk7u",defaultMessage:"Dropbox Paper"}),body:u.intl.formatMessage({id:"oKTCoc",defaultMessage:"Check out the best way to create and build on ideas with your team."}),arrowDirection:n.default.ARROW.LEFT,buttonText:u.intl.formatMessage({id:"vJgZg+",defaultMessage:"Next"}),cssSelector:".composer-nav-item",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_paper-vflQyNMh5.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_paper@2x-vfl7TJoJA.png",imageHeight:130,onButtonClickImmediate:function(){return l.open_tab("/paper")}})}},BUBBLE_INFO_ARRAY:["TEAM_TAB","INVITE_MEMBERS","GROUPS","SETTINGS","PAPER"],render:function(){return d(i.LimitedTeamTooltipRunner,{initialServerStep:this.props.onboardingState,lastTooltipDismissedCb:this.props.lastTooltipDismissedCb,serverStepOffset:2,tooltipSpecs:this._getTooltipSpecs(),tooltipSpecOrder:this.BUBBLE_INFO_ARRAY})}});t.default=m})),define("modules/clean/teams/modals/change_group_owner_modal",["require","exports","tslib","react","modules/core/i18n","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/clean/teams/admin/modals/modal_ajax","modules/clean/viewer"],(function(e,t,a,o,s,r,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showChangeGroupOwnerModal=t.ChangeGroupOwnerModalAction=t.CHANGE_GROUP_OWNER_URL=t.ChangeGroupOwnerModal=void 0,o=a.__importDefault(o),t.ChangeGroupOwnerModal=function(e){e.userId;var t=e.userDisplayName,a=(e.groupId,e.enableGroupOwnerPermissions),n=e.onRequestClose,i=void 0===n?function(){}:n,l=e.onPrimaryAction,u=void 0===l?function(){}:l,d=e.onSecondaryAction,m=void 0===d?function(){}:d,p=a?s.intl.formatMessage({id:"+AX7ED",defaultMessage:"<paragraph>{name} will be able to add and remove managers, and change group information.</paragraph> <paragraph>{name} will also be able to delete the group.</paragraph>"},{paragraph:function(e){return o.default.createElement("p",null,e)},name:t}):s.intl.formatMessage({id:"s2SQzc",defaultMessage:"{name} will no longer be able to add and remove managers, change group information, or delete the group."},{name:t});return o.default.createElement(r.ActionUtilityModal,{title:a?s.intl.formatMessage({id:"NkyguJ",defaultMessage:"Make {name} a manager?"},{name:t}):s.intl.formatMessage({id:"rnh6DR",defaultMessage:"Remove manager permissions from {name}?"},{name:t}),primaryAction:a?s.intl.formatMessage({id:"G76Bc1",defaultMessage:"Make manager"}):s.intl.formatMessage({id:"E7Mnxf",defaultMessage:"Remove manager permissions"}),onPrimaryAction:u,onSecondaryAction:m,onRequestClose:i},p)},t.CHANGE_GROUP_OWNER_URL="/groups_ajax/change_group_member_type",t.ChangeGroupOwnerModalAction=function(e){var o=e.userId,s=e.userDisplayName,r=e.groupId,n=e.enableGroupOwnerPermissions,u=a.__rest(e,["userId","userDisplayName","groupId","enableGroupOwnerPermissions"]);return i.modalAjax({modal:t.ChangeGroupOwnerModal,ajax:{url:t.CHANGE_GROUP_OWNER_URL,data:{group_id:r,user_id:o,is_owner:n},subject_user:l.Viewer.get_viewer().work_user}})(a.__assign({userId:o,userDisplayName:s,groupId:r,enableGroupOwnerPermissions:n},u))},t.showChangeGroupOwnerModal=function(e){return n.showModal(o.default.createElement(t.ChangeGroupOwnerModalAction,a.__assign({},e)))}}));
//# sourceMappingURL=pkg-team-deferred.min.js-vflWtMpga.map