define(["require","exports","tslib","react","lodash","spectrum/tokenized_input","spectrum/token","rondo/index","modules/clean/teams/admin/pages/activity/activity_modal/types","modules/clean/react/modal","modules/core/i18n","modules/clean/teams/admin/pages/activity/behaviors/activity_categories_behavior","rondo-react/index","modules/clean/teams/admin/pages/activity/activity_modal/activity_modal","modules/clean/teams/admin/pages/activity/behaviors/activity_logger"],(function(e,t,i,n,o,r,s,a,c,u,l,d,p,f,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityPickerWidget=t.ActivitiesPicker=void 0,n=i.__importDefault(n),o=i.__importStar(o);var m=function(e){return e&&e.focus(),!!e},g=function(e){switch(e.key){case"ArrowLeft":return y(e,"previousElementSibling");case"ArrowRight":return y(e,"nextElementSibling");default:return!1}},y=function(e,t){return e.preventDefault(),t?m(e.currentTarget[t]):y(e,"previousElementSibling")||y(e,"nextElementSibling")},h=(function(e){function t(t){var i=e.call(this,t)||this;return i.onClose=function(e){var t=i.props;(0,t.onClose)(t.token.id),y(e)},i.state={selected:!1},i}return i.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.token.label,o={onKeyDown:g,tooltipContent:t,onClose:this.onClose,selected:this.state.selected,onFocus:function(){return e.setState({selected:!0})},onBlur:function(){return e.setState({selected:!1})}};return n.default.createElement(s.Token,i.__assign({},o),t)},t})(n.default.Component),_=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showActivityModal=function(){var e={allCategories:t.props.categories,filteredCategories:t.props.categories,search:"",checkedCategories:t.props.selectedCategoryIds,checkedActivities:t.props.selectedActivityIds,highlightedCategory:t.props.categories[0].id,onSubmit:t.update,onClose:t.focusAddButton};v.logActivityPageEventToHive({eventName:"activity_modal_opened",extra:{}}),u.Modal.showInstance(n.default.createElement(f.ActivityModalWidget,{initialState:e}))},t.setButtonRef=function(e){t.buttonEl=e},t.focusAddButton=function(){o.defer((function(){return m(t.buttonEl)}))},t.update=function(e,n){t.props.actionFieldChange(i.__spreadArrays(t.props.activities.filter((function(e){return n.indexOf(e.id)>=0})),o.flatten(t.props.categories.filter((function(t){return e.indexOf(t.id)>=0})).map((function(e){return e.activities})))))},t.onClose=function(e){var i=t.props.selectedItems.find((function(t){return t.id===e}));i&&t.props.actionFieldRemove(c.isCategory(i)?i.activities:i)},t}return i.__extends(t,e),Object.defineProperty(t.prototype,"tokens",{get:function(){var e=this;return this.props.selectedItems.map((function(t,i){return n.default.createElement(h,{key:t.id,token:t,onClose:e.onClose})}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputProps",{get:function(){return{type:"button",value:l.intl.formatMessage({id:"Y7dZop",defaultMessage:"Add activity"})+" +",className:"no-class tokenized-input",onClick:this.showActivityModal,tabIndex:0,onKeyDown:g,ref:this.setButtonRef}},enumerable:!1,configurable:!0}),t.prototype.render=function(){return n.default.createElement(r.TokenizedInput,{className:this.props.className,tokens:this.tokens,inputProps:this.inputProps})},t})(n.default.Component);t.ActivitiesPicker=_;var b=a.createBehavior(d.ActivityCategoriesBehavior);t.ActivityPickerWidget=p.widget(b,_)}));
//# sourceMappingURL=activities_picker.min.js-vfltHU85u.map