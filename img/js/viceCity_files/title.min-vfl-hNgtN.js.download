define(["require","exports","tslib","classnames","react","modules/clean/em_string","modules/clean/previews/util","modules/clean/file_store/utils","modules/clean/react/starred/star","modules/clean/react/starred/constants","modules/clean/react/title_bubble","modules/clean/react/home/resource_id_types","modules/clean/react/starred/actions","modules/core/i18n","modules/clean/react/sticky_position","modules/clean/react/size_class/utils","modules/clean/react/starred/browse_exports"],(function(e,t,r,i,a,s,n,o,l,d,u,f,m,c,p,h,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Title=void 0,i=r.__importDefault(i),a=r.__importDefault(a),n=r.__importStar(n);var E=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasFetchedStarStatus=!1,t.shouldDisplayStarred=function(){var e=t.props,r=e.sharedLinkInfo;return e.shouldDisplayStarred&&!r},t}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.fetchStarred()},t.prototype.componentWillReceiveProps=function(){this.fetchStarred()},t.prototype.fetchStarred=function(){var e=this;this.shouldDisplayStarred()&&!this.hasFetchedStarStatus&&(this.hasFetchedStarStatus=!0,setTimeout((function(){e.props.user&&e.props.file.file_id&&m.StarredActions.fetchStatuses(e.props.user.role,[{id:e.props.file.file_id,type:f.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}])}),0))},t.prototype.render=function(){var e=this.props,t=e.file,r=e.maxFilenameEmLength,n=e.sharedLinkInfo,u=e.shouldDisplayMetadata,m=e.sizeClass,c=e.user,p=!h.isSmallerThanLarge(m),E=p&&!!n&&!!n.ownerTeamName,S=p&&!n&&!!t.ts,M=i.default({fileinfo:!0,"u-pad-top-xxs":E||S,"u-pad-right-xs":!0});return a.default.createElement("div",{className:M},a.default.createElement("h1",{className:"filename"},a.default.createElement("div",{className:"filename--text"},s.Emstring.em_snippet(o.getFilename(t),r)),this.shouldDisplayStarred()?a.default.createElement(l.Star,{id:t.file_id,idType:f.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID,isDir:t.is_dir,ref:"Star",user:c,tooltipPlacement:"bottom",source:d.StarredSource.FILE_VIEWER,itemName:_.itemNameFromStarrableItem(t)}):null),u&&E?a.default.createElement(g,{sharedLinkInfo:n}):null,u&&S?a.default.createElement(y,{file:t,user:c}):null)},t.defaultProps={shouldDisplayStarred:!0,shouldDisplayMetadata:!0},t})(a.default.Component);t.Title=E;var g=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"ownerText",{get:function(){var e=this.props.sharedLinkInfo,t=e.ownerName,r=e.ownerTeamName;return t?c.intl.formatMessage({id:"V1gDEG",defaultMessage:"from {owner} ({team})"},{owner:s.Emstring.em_snippet(t,24),team:s.Emstring.em_snippet(r,18)}):c.intl.formatMessage({id:"mL9XU3",defaultMessage:"from {team}"},{team:s.Emstring.em_snippet(r,18)})},enumerable:!1,configurable:!0}),t.prototype.render=function(){return a.default.createElement("span",{className:"file-modifier"},this.ownerText)},t})(a.default.Component),y=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getModifierString=function(){var e=t.props.file,r=e.last_modified_name;return 2!==e.event_type?c.intl.formatMessage({id:"tJLY2M",defaultMessage:"Modified"}):r?c.intl.formatMessage({id:"BBy1WT",defaultMessage:"{modifier} edited"},{modifier:r}):c.intl.formatMessage({id:"G4VbZW",defaultMessage:"You edited"})},t.redirectToVersionHistory=function(){var e=t.props,r=e.file,i=e.user;if(!i)throw new Error("no user set");n.redirectToVersionHistory(r,i)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.file;return a.default.createElement("span",{className:"file-modifier"},this.getModifierString(),a.default.createElement(u.TitleBubble,{content:c.intl.formatMessage({id:"6ZAdx/",defaultMessage:"View version history"}),position:p.StickyPosition.BOTTOM,isTargetPositionFixed:!0},a.default.createElement("a",{className:"file-modifier",onClick:this.redirectToVersionHistory,href:"#"},n.getModifierString(e))))},t})(a.default.Component)}));
//# sourceMappingURL=title.min.js-vflhqB2vZ.map