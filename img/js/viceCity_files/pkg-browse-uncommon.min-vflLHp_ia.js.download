define("modules/clean/base64",["require","exports"],(function(e,t){"use strict";function i(e){var t=[],i=0,n=0,r=0,o=0,s=0;for(e+="";i<e.length;)(r=e.charCodeAt(i))<128?(t[n++]=String.fromCharCode(r),i++):r>191&&r<224?(o=e.charCodeAt(i+1),t[n++]=String.fromCharCode((31&r)<<6|63&o),i+=2):(o=e.charCodeAt(i+1),s=e.charCodeAt(i+2),t[n++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s),i+=3);return t.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0,t.encode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=void 0,n=void 0,r=void 0,o=void 0,s=void 0,l=0,_=0,a="",u=[];if(!e)return e;for(;i=(s=e.charCodeAt(l++)<<16|e.charCodeAt(l++)<<8|e.charCodeAt(l++))>>18&63,n=s>>12&63,r=s>>6&63,o=63&s,u[_++]=t.charAt(i)+t.charAt(n)+t.charAt(r)+t.charAt(o),l<e.length;);a=u.join("");var c=e.length%3;return(c?a.slice(0,c-3):a)+"===".slice(c||3)},t.decode=function(e,t){var n=t?function(e){return e}:i;if("function"==typeof window.atob)return n(window.atob(e));var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,s=0,l=[];if(!e)return e;for(e+="";;){var _=r.indexOf(e.charAt(o++)),a=r.indexOf(e.charAt(o++)),u=r.indexOf(e.charAt(o++)),c=r.indexOf(e.charAt(o++)),d=_<<18|a<<12|u<<6|c,g=d>>16&255,v=d>>8&255,f=255&d;if(l[s++]=64===u?String.fromCharCode(g):64===c?String.fromCharCode(g,v):String.fromCharCode(g,v,f),!(o<e.length))break}var m=l.join("");return m=n(m)}})),define("modules/clean/react/browse/action_logger",["require","exports","tslib","modules/clean/analytics","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/browse/logger","modules/clean/react/browse/logger_util","modules/clean/search/search_bar/data/selectors","modules/clean/search/search_bar/data/store","modules/clean/web_user_action_events","modules/clean/user_survey/user_survey"],(function(e,t,i,n,r,o,s,l,_,a,u,c){"use strict";function d(e){s.browseLogger.log(e)}function g(e){var t=e.uid,n=e.source,o=e.action,s=e.num_files_selected,_=e.num_folders_selected,a=e.view_type,u=e.result,c=e.error_summary,g=e.action_surface,v=e.action_source,f=e.batch_success_count,m=e.batch_fail_count,p=e.lookup_error_type,y=e.extra,E={num_files_selected:s,num_folders_selected:_,source:n,view_type:a,error_summary:c};if(l.isFile(u)){var w=(R=u).request_id,h=R.ns_id,b=R.sjid,S=R.file_id,A=R.fq_path,L=R.bytes,O=R.ext;E=i.__assign(i.__assign({},E),{request_id:w,file_nsid:h,file_sjid:b,file_id:S,file_name:r.filename(A),file_path:A,file_size:L,file_extension:O})}else if(l.isPaper(u)){var R;w=(R=u).request_id;E=i.__assign(i.__assign({},E),{request_id:w})}d({user_id:t,event_name:o,source:n,view_type:a,request_id:E.request_id,file_nsid:E.file_nsid,file_sjid:E.file_sjid,file_id:E.file_id,file_name:E.file_name,file_path:E.file_path,file_size:E.file_size,file_extension:E.file_extension,action_source:v,extra:i.__assign(i.__assign({},y),{num_files_selected:String(E.num_files_selected),num_folders_selected:String(E.num_folders_selected),error_summary:E.error_summary||null,action_surface:g||null,batch_success_count:f?String(f):null,batch_fail_count:m?String(m):null,lookup_error_type:p||null})})}Object.defineProperty(t,"__esModule",{value:!0}),t.logFolderRulesModal=t.logCreateAutomatedFolderClick=t.logBrowseLoaded=t.logFileAction=t.logRightClickItems=t.logContextMenuClick=t.logKeyboardShortcutUsage=t.logFileCreateSuccess=t.logPageView=t.logFileCreateClick=t.logFileUploadFSWReturned=t.logPermanentDeleteFiles=t.logDeleteFiles=t.logOpenCopyModal=t.logDownload=t.logAddComment=t.logRenameFiles=t.logOpenMoveModal=t.logVersions=t.logCopyFiles=t.logOpenAddToCollectionModal=t.logMoveFiles=t.logFileOperationModalClick=t.logRestore=t.logSwitchViewType=t.logSortRecords=t.logToggleDeletedFiles=t.logViewShareModal=t.logFolderExplorerCollapseRow=t.logFolderExplorerExpandRow=t.logOpenRow=t.logBrowseAction=t.logWebUserAction=t.BrowseLogEventSource=void 0,r=i.__importStar(r),_=i.__importStar(_),(function(e){e.MAESTRO_RIGHT_SIDEBAR="MAESTRO_RIGHT_SIDEBAR",e.MAESTRO_PHOTOS_RIGHT_SIDEBAR="MAESTRO_PHOTOS_RIGHT_SIDEBAR",e.LEGACY_HEADER_ACTIONS="LEGACY_HEADER_ACTIONS",e.DRAG="DRAG"})(t.BrowseLogEventSource||(t.BrowseLogEventSource={})),s.browseLogger.registerRowInjector(s.screenSizeInjector),t.logWebUserAction=d,t.logBrowseAction=g,t.logOpenRow=function(e){var t=e.uid,i=e.entity_type,n=e.source,r=e.view_type,s=e.file_nsid,l=e.file_sjid,_=e.file_id,a=e.file_name,c=e.file_path,g=e.file_size,v=e.file_type,f=e.file_extension,m=e.request_id,p=e.action_source,y=e.vaultApi,E=e.vaultLoggingTypes;d({user_id:t,event_name:u.WebUserActionLogEvent.OPEN_ROW,source:n,view_type:r,file_nsid:s,file_sjid:l,file_id:_,file_name:a,file_path:c,file_size:g,file_extension:f,request_id:m,action_source:p,extra:{entity_type:i}}),v===o.FileTypes.VAULT_FOLDER&&null!=y&&null!=E&&y.logProductAnalyticsEvent({actionSurface:E.AnalyticsEventActionSurface.BROWSE,eventAction:E.AnalyticsEventAction.SELECT,eventObject:E.AnalyticsEventObject.VAULT_FOLDER})},t.logFolderExplorerExpandRow=function(e){var t=e.uid,i=e.entity_type,n=e.source,r=e.file_name,o=e.file_path;d({user_id:t,event_name:u.WebUserActionLogEvent.FOLDER_EXPLORER_EXPAND_ROW,source:n,file_name:r,file_path:o,extra:{entity_type:i}})},t.logFolderExplorerCollapseRow=function(e){var t=e.uid,i=e.entity_type,n=e.source,r=e.file_name,o=e.file_path;d({user_id:t,event_name:u.WebUserActionLogEvent.FOLDER_EXPLORER_COLLAPSE_ROW,source:n,file_name:r,file_path:o,extra:{entity_type:i}})},t.logViewShareModal=function(e){var t=e.uid,i=e.modal_session_id,n=e.file_nsid,r=e.file_sjid,o=e.file_id,s=e.file_name,l=e.file_path;d({user_id:t,event_name:u.WebUserActionLogEvent.VIEW_SHARE_MODEL,file_nsid:n,file_sjid:r,file_id:o,file_name:s,file_path:l,extra:{modal_session_id:i}})},t.logToggleDeletedFiles=function(e){var t=e.uid,i=e.show_deleted_files,n=e.view_type;d({user_id:t,event_name:u.WebUserActionLogEvent.TOGGLE_DELETED_FILES,view_type:n,extra:{show_deleted_files:i.toString()}})},t.logSortRecords=function(e){var t=e.uid,i=e.sort_by,n=e.sort_direction,r=e.view_type;d({user_id:t,event_name:u.WebUserActionLogEvent.SORT_RECORDS,view_type:r,extra:{sort_by:i,sort_direction:n}})},t.logSwitchViewType=function(e){var t=e.uid,i=e.isSearchMode,r=e.viewType;d({user_id:t,event_name:u.WebUserActionLogEvent.SWITCH_VIEW_TYPE,view_type:r}),i&&n.SearchClientActivityLogger.log("switch_view_type",t,{search_session_id:_.searchSessionId(a.getStoreForSearchBar().getState()),view_type:r})},t.logRestore=function(e){var t=e.uid,i=e.source,n=e.view_type,r=e.file_nsid,o=e.file_path,s=e.file_name,l=e.num_files_selected,_=e.num_folders_selected;d({user_id:t,event_name:u.WebUserActionLogEvent.RESTORE,source:i,view_type:n,file_nsid:r,file_path:o,file_name:s,extra:{num_files_selected:l?l.toString():null,num_folders_selected:_?_.toString():null}})},t.logFileOperationModalClick=function(e){var t=e.uid,i=e.event_name,n=e.selectedPath;d({user_id:t,event_name:i,extra:n?{selectedPath:n}:{}})},t.logMoveFiles=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.MOVE})),c.UserSurvey.trackEvent("move_item","browse")},t.logOpenAddToCollectionModal=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.OPEN_ADD_TO_COLLECTION_MODAL}))},t.logCopyFiles=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.COPY}))},t.logVersions=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.VERSIONS}))},t.logOpenMoveModal=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.OPEN_MOVE_MODAL}))},t.logRenameFiles=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.RENAME}))},t.logAddComment=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.ADD_COMMENT}))},t.logDownload=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.DOWNLOAD})),c.UserSurvey.trackEvent("download_item","browse")},t.logOpenCopyModal=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.OPEN_COPY_MODAL}))},t.logDeleteFiles=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.DELETE}))},t.logPermanentDeleteFiles=function(e){g(i.__assign(i.__assign({},e),{action:u.WebUserActionLogEvent.PERMANENT_DELETE}))},t.logFileUploadFSWReturned=function(e){var t=e.uid,i=e.file_name,n=e.upload_id,r=e.all_fsw_ids,o=e.filtered_fsw_ids;d({user_id:t,event_name:u.WebUserActionLogEvent.FILE_UPLOAD_FSW_RETURNED,file_name:i,upload_id:n,all_fsw_ids:r,filtered_fsw_ids:o}),c.UserSurvey.trackEvent("upload_item","browse")},t.logFileCreateClick=function(e){var t=e.uid,i=e.source,n=e.action,r=e.depth_folder_selected,o=e.selection_mode,s=e.empty_folder;d({user_id:t,source:i,event_name:n,extra:{depth_folder_selected:void 0!==r?r.toString():null,selection_mode:o,empty_folder:s?"true":"false"}})},t.logPageView=function(e){var t=e.uid,i=e.view_type,n=e.url,r=e.navigation_depth;d({user_id:t,event_name:u.WebUserActionLogEvent.PAGE_VIEW,view_type:i,extra:{url:n,navigation_depth:void 0!==r?r.toString():null}})},t.logFileCreateSuccess=function(e){var t=e.uid,i=e.document_type,n=e.time_elapsed,r=e.open_id,o=e.selection_mode,s=e.empty_folder;d({user_id:t,event_name:u.WebUserActionLogEvent.FILE_CREATE_SUCCESS,extra:{document_type:i.toString(),time_elapsed:n.toString(),open_id:r,create_completed_timestamp_ms:Date.now().toString(),selection_mode:o||null,empty_folder:s?"true":"false"}}),c.UserSurvey.trackEvent("create_item","browse")},t.logKeyboardShortcutUsage=function(e){var t=e.user_id,i=e.view_type,n=e.keyboard_shortcut_type;d({user_id:t,event_name:u.WebUserActionLogEvent.KEYBOARD_SHORTCUT,view_type:i,extra:{keyboard_shortcut_type:n}})},t.logContextMenuClick=function(e){var t=e.uid,i=e.viewType,n=e.action_surface,r=e.numFilesSelected,o=e.numFoldersSelected;d({user_id:t,event_name:u.WebUserActionLogEvent.CONTEXT_MENU_CLICK,view_type:i,extra:{action_surface:n,num_files_selected:r?r.toString():null,num_folders_selected:o?o.toString():null}})},t.logRightClickItems=function(e){var t=e.uid,i=e.viewType,n=e.action_surface,r=e.numFilesSelected,o=e.numFoldersSelected;d({user_id:t,event_name:u.WebUserActionLogEvent.RIGHT_CLICK_ITEMS,view_type:i,extra:{action_surface:n,num_files_selected:r?r.toString():null,num_folders_selected:o?o.toString():null}})},t.logFileAction=function(e){var t=e.uid,n=e.action,r=e.num_files_selected,o=e.num_folders_selected,s=e.source,l=e.view_type,_=e.jobId,a=e.error_summary,u=e.error,c=e.batch_success_count,g=e.batch_fail_count,v=e.lookup_error_type,f=e.extra,m=void 0===f?{}:f;d({user_id:t,event_name:n,source:s,view_type:l,extra:i.__assign({num_files_selected:r?r.toString():null,num_folders_selected:o?o.toString():null,error_summary:a||null,error:u||null,job_id:_||null,batch_success_count:c?String(c):null,batch_fail_count:g?String(g):null,lookup_error_type:v||null},m)})},t.logBrowseLoaded=function(e){var t=e.uid,i=e.view_type,n=e.url,r=e.navigation_depth,o=e.folder_type;d({user_id:t,event_name:u.WebUserActionLogEvent.BROWSE_LOADED,view_type:i,extra:{url:n,navigation_depth:void 0!==r?r.toString():null,folder_type:null!=o?o:null}})},t.logCreateAutomatedFolderClick=function(e){d({user_id:e.uid,source:e.source,file_path:e.file_path,file_nsid:e.file_nsid,event_name:u.WebUserActionLogEvent.CREATE_AUTOMATED_FOLDER_CLICK})},t.logFolderRulesModal=function(e){var t=e.uid,i=e.modal_session_id,n=e.event_name;d({user_id:t,file_nsid:e.file_nsid,event_name:n,file_path:e.file_path,extra:{error:e.error||null,pdfToggleStatus:e.pdfToggleStatus||null,unzipToggleStatus:e.unzipToggleStatus||null,isFolderRulesEnabled:e.isFolderRulesEnabled||null,modal_session_id:i}})}})),define("modules/clean/react/browse/logger",["require","exports","tslib","modules/clean/logging/hive/schemas/web-user-action","modules/clean/logging/telemetry"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.screenSizeInjector=t.browseLogger=t.BrowseLogger=void 0,r=i.__importStar(r);var o=function(e){var t=this;this.registerRowInjector=function(e){t.rowInjectors.push(e)},this.log=function(e){var r={};t.rowInjectors.forEach((function(e){var t=e();r=i.__assign(i.__assign(i.__assign({},r),t),{extra:i.__assign(i.__assign({},r.extra),t.extra)})})),t.hiveLogger.log(new n.WebUserActionRow(i.__assign(i.__assign(i.__assign({},r),e),{extra:i.__assign(i.__assign({},r.extra),e.extra)})))},this.hiveLogger=e||new r.HiveLogger,this.rowInjectors=[]};t.BrowseLogger=o,t.browseLogger=new o,t.screenSizeInjector=function(){return{browser_width:window.innerWidth,browser_height:window.innerHeight,device_width:window.screen&&window.screen.width,device_height:window.screen&&window.screen.height}}})),define("dropbox/proto/js_init_data/user_survey/user_survey",["require","exports","tslib","protobufjs/minimal"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.user_survey=void 0;var r,o=(n=i.__importStar(n)).Reader,s=n.Writer,l=(n.util,n.roots.default||(n.roots.default={}));t.default=l,t.user_survey=l.user_survey=((r=l.user_survey||{}).UserSurveyInitData=(function(e){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.iframeSrc="",e.prototype.surveyUserId="",e.prototype.isCsmTeam=!1,e.prototype.isTestAccount=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.iframeSrc&&Object.hasOwnProperty.call(e,"iframeSrc")&&t.uint32(10).string(e.iframeSrc),null!=e.surveyUserId&&Object.hasOwnProperty.call(e,"surveyUserId")&&t.uint32(18).string(e.surveyUserId),null!=e.isCsmTeam&&Object.hasOwnProperty.call(e,"isCsmTeam")&&t.uint32(24).bool(e.isCsmTeam),null!=e.isTestAccount&&Object.hasOwnProperty.call(e,"isTestAccount")&&t.uint32(32).bool(e.isTestAccount),t},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new l.user_survey.UserSurveyInitData;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.iframeSrc=e.string();break;case 2:n.surveyUserId=e.string();break;case 3:n.isCsmTeam=e.bool();break;case 4:n.isTestAccount=e.bool();break;default:e.skipType(7&r)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/user_survey.UserSurveyInitData"},e})(r.UserSurveyInitData||{}),r)})),define("modules/clean/user_survey/user_survey",["require","exports","tslib","proto_utils/unpack","dropbox/proto/js_init_data/user_survey/user_survey","modules/constants/page_load","modules/clean/viewer","modules/clean/logging/telemetry","modules/clean/logging/hive/schemas/web-user_survey"],(function(e,t,i,n,r,o,s,l,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moduleInit=t.UserSurvey=t.USER_SURVEY_AGGREGATE_EVENTS_MAP=void 0;var a=new((l=i.__importStar(l)).HiveLogger);t.USER_SURVEY_AGGREGATE_EVENTS_MAP=new Map([["browse_csat_trigger",[{event:"share_item",eventSurface:"browse"},{event:"move_item",eventSurface:"browse"},{event:"rename_item",eventSurface:"browse"},{event:"delete_item",eventSurface:"browse"},{event:"download_item",eventSurface:"browse"},{event:"upload_item",eventSurface:"browse"},{event:"create_item",eventSurface:"browse"}]]]);var u=null,c=null,d=void 0;function g(e,t){u&&(u.height=e,u.width=t)}function v(e){var t=e.data.eventType;if(e.origin===c&&e.source===(null==u?void 0:u.contentWindow))switch(t){case"surveyResized":g(e.data.surveyHeight,e.data.surveyWidth);break;case"surveyPresented":a.log(new _.UserSurveyLoggingTableRow({event_name:"shown_survey",user_survey_id:d}));break;case"surveyClosed":g("0","0"),a.log(new _.UserSurveyLoggingTableRow({event_name:"closed_survey",user_survey_id:d}))}}function f(e){u||(u=(function(e){c=e;var t=document.createElement("iframe");return t.src=c,t.setAttribute("sandbox","allow-scripts allow-same-origin"),t.setAttribute("class","usersurvey-iframe"),t.setAttribute("id","usersurvey-iframe"),t.setAttribute("allowTransparency","true"),t.setAttribute("height","0"),t.setAttribute("width","0"),document.body.insertBefore(t,document.body.childNodes[0]),t})("https://"+e.iframeSrc)),u.addEventListener("load",(function(){m("setUserId",{userId:e.surveyUserId}),d=e.surveyUserId,p("locale",o.USER_LOCALE),p("isCsmTeam",e.isCsmTeam?"true":"false"),p("isTestUser",e.isTestAccount?"true":"false"),s.Viewer.get_viewer().get_users().find((function(e){return e.is_dropbox_admin}))?p("isDropboxAdmin","true"):y("isDropboxAdmin")})),window.addEventListener("message",v)}function m(e,t){if(u&&u.contentWindow&&c){var i={eventType:e,eventData:t};u.contentWindow.postMessage(i,c)}}function p(e,t){m("addAttribute",{key:e,value:t})}function y(e){m("removeAttribute",{key:e})}t.UserSurvey={trackEvent:function(e,i){var n="web_"+e;m("trackEvent",{eventName:n}),m("trackEvent",{eventName:n+"_from_"+i}),t.USER_SURVEY_AGGREGATE_EVENTS_MAP.forEach((function(t,n){for(var r=0,o=t;r<o.length;r++){var s=o[r];e===s.event&&s.eventSurface===i&&m("trackEvent",{eventName:n})}}))},addAttribute:p,addCallback:function(){},removeAttribute:y},t.moduleInit=function(e){f(n.unpackProto(e,r.user_survey.UserSurveyInitData))}})),define("modules/clean/logging/hive/schemas/web-user_survey",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserSurveyLoggingTableRow=void 0;var i=function(e){this.category="web-user_survey",this.session_id=null,this.team_id=null,this.ua_browser_name=null,this.ua_browser_version=null,this.locale_user_selected=null,this.user_agent=null,this.active_user_id=null,this.user_id=null,this.event_name=e.event_name,this.user_survey_id=e.user_survey_id,this.extras=e.extras,Object.seal(this)};t.UserSurveyLoggingTableRow=i}));
//# sourceMappingURL=pkg-browse-uncommon.min.js-vflRyiAq8.map