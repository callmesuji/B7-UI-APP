define(["require","exports","tslib","react","dig-components/modal","dig-components/typography","dig-components/buttons"],(function(e,t,n,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.splitByUtilityModalProps=function(e){var t=e.valid,o=e.setFocus,i=e.actionBlockRequest,a=e.actionUnblockRequest,r=e.actionDataReady,c=e.actionAccept,l=e.actionCancel,s=e.actionOpen,d=e.actionClose,u=(e.height,e.overflowY,e.displayCloseButton,e.className),p=e.bodyClassName,y=e.onRequestClose,m=e.width,v=(e.onReady,e.open),f=e.overlayClassName,h=e.primaryAction,C=e.secondaryAction,A=e.title,b=e.link,g=(e.variant,e.onPrimaryAction),E=e.onSecondaryAction,B=e.onLink,_=(e.children,e.isCentered);return{modal:{bodyClassName:p,className:u,onRequestClose:y,width:m,open:v,overlayClassName:f,primaryAction:h,secondaryAction:C,title:A,link:b,onPrimaryAction:g,onSecondaryAction:E,onLink:B,isCentered:void 0===_||_},modalBehavior:{valid:t,setFocus:o,actionBlockRequest:i,actionUnblockRequest:a,actionDataReady:r,actionAccept:c,actionCancel:l,actionOpen:s,actionClose:d},rest:n.__rest(e,["valid","setFocus","actionBlockRequest","actionUnblockRequest","actionDataReady","actionAccept","actionCancel","actionOpen","actionClose","height","overflowY","displayCloseButton","className","bodyClassName","onRequestClose","width","onReady","open","overlayClassName","primaryAction","secondaryAction","title","link","variant","onPrimaryAction","onSecondaryAction","onLink","children","isCentered"])}},t.disabledPrimaryButton=function(e,t,i,a){var c=t;if(""!==c&&!c)throw new Error("Primary element is not set on utility modal");var l=c;return c="string"==typeof c?function(t){var c={variant:"primary",onClick:function(){return null==t?void 0:t()},isLoading:e};return!1===i&&(c.disabled=!0),o.createElement("span",{ref:a||void 0},o.createElement(r.Button,n.__assign({},c),l))}:function(e){var t={ref:a};return!1===i&&(t.disabled=!0),o.cloneElement(l(e),t)}};var c=(function(e){function c(t){var i=e.call(this,t)||this;return i.setPrimaryActionElement=function(e){return i.primaryActionElement=e},i.firstFocusableElement=function(){return i.primaryActionElement.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0]},i.modalBody=function(){var e=i.props.bodyClassName,t=void 0===e?"dig-Modal-body":e;return document.querySelector("."+t)},i.modalOverlay=function(){return document.querySelector(".rn-modal-overlay")},i.setFocus=function(){return n.__awaiter(i,void 0,void 0,(function(){var e=this;return n.__generator(this,(function(t){return setTimeout((function(){var t=e.props.valid,n=void 0===t||t,o=e.modalBody();if(o&&!o.contains(document.activeElement)){var i=o;if(n&&e.primaryActionElement){var a=e.firstFocusableElement();a&&(i=a)}i.focus()}}),0),[2]}))}))},i.accept=function(){var e=i.props,t=e.actionAccept,n=e.valid;(void 0===n||n)&&t()},i.onKeyDown=function(e){13===e.keyCode&&i.accept()},i.onRequestClose=function(e){var t=i.props,n=t.actionCancel,o=t.onRequestClose,a=t.displayCloseButton,r=void 0===a||a;o&&o(e);var c=27===e.keyCode,l=e.target===i.modalOverlay();(c||l)&&n(),n&&r&&n()},i.cloneElement=function(e,t){return e?"string"==typeof e?e:o.cloneElement(e,n.__assign(n.__assign({},t),{onKeyDown:i.onKeyDown})):null},t.setFocus&&t.setFocus(i.setFocus),i}return n.__extends(c,e),c.prototype.componentDidMount=function(){this.props.open&&this.setFocus()},c.prototype.componentDidUpdate=function(e){this.props.open&&!e.open&&this.setFocus()},c.prototype.render=function(){var e=this,c=this.props,l=c.primaryAction,s=c.actionCancel,d=c.actionAccept,u=c.onPrimaryAction,p=c.secondaryAction,y=c.onSecondaryAction,m=c.valid,v=void 0===m||m,f=c.title,h=c.link,C=c.onLink,A=c.displayCloseButton,b=void 0===A||A,g=c.width,E=c.variant,B=c.overflowY,_=c.height,k=c.onReady,R=c.onAfterOpen,q=c.ariaLabel,w=c.modalButtonLoading,P=void 0!==w&&w,F=t.splitByUtilityModalProps(this.props),N=F.modal,M=F.rest,D=t.disabledPrimaryButton(P,l,v,this.setPrimaryActionElement),S="string"==typeof p?function(e){return o.createElement(r.Button,{variant:"opacity",onClick:e,disabled:P},p)}:"function"==typeof p?p:void 0,O="string"==typeof h?function(e){return o.createElement(r.Button,{variant:"transparent",onClick:e},h)}:"function"==typeof h?h:void 0,L=g||(E&&"small"===E?"small":"standard"),U={};return _&&(U.height=_),B&&(U.overflowY="auto"),o.createElement(i.Modal,n.__assign({},N,{width:L,onAfterOpen:R||k,onRequestClose:this.onRequestClose,onKeyPress:this.onKeyDown,overlayClassName:"rn-modal-overlay",withCloseButton:b?"cancel":void 0,"aria-label":q}),o.createElement(i.Modal.Header,{hasBottomSpacing:"title-standard"},o.createElement(a.Title,null,f)),o.createElement(i.Modal.Body,{style:U},o.Children.map(this.props.children,(function(t){return e.cloneElement(t,M)}))),o.createElement(i.Modal.Footer,null,O&&O(C||function(){}),S&&S(y||s),D(u||d)))},c})(o.Component);t.UtilityModal=c}));
//# sourceMappingURL=utility_modal.min.js-vfl_WIlt8.map